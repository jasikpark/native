var $i=Object.create;var fe=Object.defineProperty;var Yi=Object.getOwnPropertyDescriptor;var Wi=Object.getOwnPropertyNames;var Bi=Object.getPrototypeOf,Qi=Object.prototype.hasOwnProperty;var Ji=g=>fe(g,"__esModule",{value:!0});var tn=(g,n)=>()=>(n||g((n={exports:{}}).exports,n),n.exports);var en=(g,n,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of Wi(n))!Qi.call(g,f)&&f!=="default"&&fe(g,f,{get:()=>n[f],enumerable:!(l=Yi(n,f))||l.enumerable});return g},rn=g=>en(Ji(fe(g!=null?$i(Bi(g)):{},"default",g&&g.__esModule&&"default"in g?{get:()=>g.default,enumerable:!0}:{value:g,enumerable:!0})),g);var Er=tn((ne,xr)=>{(function(g,n){typeof ne=="object"&&typeof xr!="undefined"?n(ne):typeof define=="function"&&define.amd?define(["exports"],n):n(g.flubber=g.flubber||{})})(ne,function(g){"use strict";function n(t){return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&di.indexOf(t)>=0}function l(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function f(t){return t>=48&&t<=57}function y(t){return t>=48&&t<=57||t===43||t===45||t===46}function d(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function v(t){for(;t.index<t.max&&n(t.path.charCodeAt(t.index));)t.index++}function x(t){var r,e=t.index,i=e,a=t.max,s=!1,o=!1,h=!1,c=!1;if(i>=a)return void(t.err="SvgPath: missed param (at pos "+i+")");if(r=t.path.charCodeAt(i),r!==43&&r!==45||(i++,r=i<a?t.path.charCodeAt(i):0),!f(r)&&r!==46)return void(t.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")");if(r!==46){if(s=r===48,i++,r=i<a?t.path.charCodeAt(i):0,s&&i<a&&r&&f(r))return void(t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+e+")");for(;i<a&&f(t.path.charCodeAt(i));)i++,o=!0;r=i<a?t.path.charCodeAt(i):0}if(r===46){for(c=!0,i++;f(t.path.charCodeAt(i));)i++,h=!0;r=i<a?t.path.charCodeAt(i):0}if(r===101||r===69){if(c&&!o&&!h||(i++,r=i<a?t.path.charCodeAt(i):0,r!==43&&r!==45||i++,!(i<a&&f(t.path.charCodeAt(i)))))return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<a&&f(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(e,i))+0}function A(t){var r,e;r=t.path[t.segmentStart],e=r.toLowerCase();var i=t.data;if(e==="m"&&i.length>2&&(t.result.push([r,i[0],i[1]]),i=i.slice(2),e="l",r=r==="m"?"l":"L"),e==="r")t.result.push([r].concat(i));else for(;i.length>=Yt[e]&&(t.result.push([r].concat(i.splice(0,Yt[e]))),Yt[e]););}function E(t){var r,e,i,a,s=t.max;if(t.segmentStart=t.index,r=t.path.charCodeAt(t.index),!l(r))return void(t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")");if(i=Yt[t.path[t.index].toLowerCase()],t.index++,v(t),t.data=[],!i)return void A(t);for(e=!1;;){for(a=i;a>0;a--){if(x(t),t.err.length)return;t.data.push(t.param),v(t),e=!1,t.index<s&&t.path.charCodeAt(t.index)===44&&(t.index++,v(t),e=!0)}if(!e&&(t.index>=t.max||!y(t.path.charCodeAt(t.index))))break}A(t)}function w(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}function S(){if(!(this instanceof S))return new S;this.queue=[],this.cache=null}function N(t,r,e,i){var a=t*i-r*e<0?-1:1,s=Math.sqrt(t*t+r*r),o=Math.sqrt(t*t+r*r),h=t*e+r*i,c=h/(s*o);return c>1&&(c=1),c<-1&&(c=-1),a*Math.acos(c)}function I(t,r,e,i,a,s,o,h,c,p){var m=p*(t-e)/2+c*(r-i)/2,u=-c*(t-e)/2+p*(r-i)/2,b=o*o,T=h*h,M=m*m,R=u*u,P=b*T-b*R-T*M;P<0&&(P=0),P/=b*R+T*M,P=Math.sqrt(P)*(a===s?-1:1);var _=P*o/h*u,Z=P*-h/o*m,ht=p*_-c*Z+(t+e)/2,G=c*_+p*Z+(r+i)/2,U=(m-_)/o,tt=(u-Z)/h,nt=(-m-_)/o,Et=(-u-Z)/h,Tt=N(1,0,U,tt),at=N(U,tt,nt,Et);return s===0&&at>0&&(at-=Rt),s===1&&at<0&&(at+=Rt),[ht,G,Tt,at]}function H(t,r){var e=4/3*Math.tan(r/4),i=Math.cos(t),a=Math.sin(t),s=Math.cos(t+r),o=Math.sin(t+r);return[i,a,i-a*e,a+i*e,s+o*e,o-s*e,s,o]}function C(t,r,e){if(!(this instanceof C))return new C(t,r,e);this.rx=t,this.ry=r,this.ax=e}function L(t){if(!(this instanceof L))return new L(t);var r=vi(t);this.segments=r.segments,this.err=r.err,this.__stack=[]}function D(t){var r=t.match(Pi);return r?r.map(Number):[]}function k(t,r,e,i,a,s,o,h){this.a={x:t,y:r},this.b={x:e,y:i},this.c={x:a,y:s},this.d={x:o,y:h},o!=null&&h!==null&&h!==void 0?(this.getArcLength=B,this.getPoint=j,this.getDerivative=q):(this.getArcLength=Y,this.getPoint=O,this.getDerivative=V),this.init()}function V(t,r,e){return{x:2*(1-e)*(t[1]-t[0])+2*e*(t[2]-t[1]),y:2*(1-e)*(r[1]-r[0])+2*e*(r[2]-r[1])}}function q(t,r,e){return O([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(r[1]-r[0]),3*(r[2]-r[1]),3*(r[3]-r[2])],e)}function K(t,r,e,i,a){for(var s=1,o=t/r,h=(t-e(i,a,o))/r;s>.001;){var c=e(i,a,o+h),p=e(i,a,o-h),m=Math.abs(t-c)/r,u=Math.abs(t-p)/r;m<s?(s=m,o+=h):u<s?(s=u,o-=h):h/=2}return o}function O(t,r,e){return{x:(1-e)*(1-e)*t[0]+2*(1-e)*e*t[1]+e*e*t[2],y:(1-e)*(1-e)*r[0]+2*(1-e)*e*r[1]+e*e*r[2]}}function j(t,r,e){return{x:(1-e)*(1-e)*(1-e)*t[0]+3*(1-e)*(1-e)*e*t[1]+3*(1-e)*e*e*t[2]+e*e*e*t[3],y:(1-e)*(1-e)*(1-e)*r[0]+3*(1-e)*(1-e)*e*r[1]+3*(1-e)*e*e*r[2]+e*e*e*r[3]}}function Y(t,r,e){e===void 0&&(e=1);var i=t[0]-2*t[1]+t[2],a=r[0]-2*r[1]+r[2],s=2*t[1]-2*t[0],o=2*r[1]-2*r[0],h=4*(i*i+a*a),c=4*(i*s+a*o),p=s*s+o*o;if(h===0)return e*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(r[2]-r[0],2));var m=c/(2*h),u=p/h,b=e+m,T=u-m*m;return Math.sqrt(h)/2*(b*Math.sqrt(b*b+T)-m*Math.sqrt(m*m+T)+T*Math.log(Math.abs((b+Math.sqrt(b*b+T))/(m+Math.sqrt(m*m+T)))))}function lt(t,r){return Oi[t][r]}function W(t,r,e){var i,a,s,o=e.length-1;if(o===0)return 0;if(t===0){for(a=0,s=0;s<=o;s++)a+=lt(o,s)*Math.pow(1-r,o-s)*Math.pow(r,s)*e[s];return a}for(i=new Array(o),s=0;s<o;s++)i[s]=o*(e[s+1]-e[s]);return W(t-1,r,i)}function ot(t,r,e){var i=W(1,e,t),a=W(1,e,r),s=i*i+a*a;return Math.sqrt(s)}function B(t,r,e){var i,a,s,o;for(e===void 0&&(e=1),i=e/2,a=0,s=0;s<20;s++)o=i*Ci[20][s]+i,a+=ki[20][s]*ot(t,r,o);return i*a}function vt(t,r,e,i){var a=t*i-r*e<0?-1:1,s=t*e+r*i;return s>1&&(s=1),s<-1&&(s=-1),a*Math.acos(s)}function Mr(t,r,e,i,a,s,o,h,c,p){var m=p*(t-e)/2+c*(r-i)/2,u=-c*(t-e)/2+p*(r-i)/2,b=o*o,T=h*h,M=m*m,R=u*u,P=b*T-b*R-T*M;P<0&&(P=0),P/=b*R+T*M,P=Math.sqrt(P)*(a===s?-1:1);var _=P*o/h*u,Z=P*-h/o*m,ht=p*_-c*Z+(t+e)/2,G=c*_+p*Z+(r+i)/2,U=(m-_)/o,tt=(u-Z)/h,nt=(-m-_)/o,Et=(-u-Z)/h,Tt=vt(1,0,U,tt),at=vt(U,tt,nt,Et);return s===0&&at>0&&(at-=_t),s===1&&at<0&&(at+=_t),[ht,G,Tt,at]}function Ir(t,r){var e=4/3*Math.tan(r/4),i=Math.cos(t),a=Math.sin(t),s=Math.cos(t+r),o=Math.sin(t+r);return[i,a,i-a*e,a+i*e,s+o*e,o-s*e,s,o]}function ae(t,r,e,i,a,s,o,h,c){var p=0,m=[],u=[];Ri(t,r,e,i,a,s,o,h,c).forEach(function(b){var T=new it(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]),M=T.getTotalLength();p+=M,m.push(M),u.push(T)}),this.length=p,this.partialLengths=m,this.curves=u}function Mt(t,r,e,i){this.x0=t,this.x1=r,this.y0=e,this.y1=i}function bt(t,r){return Math.sqrt((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]))}function ke(t,r,e){return[t[0]+(r[0]-t[0])*e,t[1]+(r[1]-t[1])*e]}function Pr(t,r){return bt(t,r)<1e-9}function Oe(t,r,e){var i=t.map(function(a,s){return Cr(a,r[s])});return function(a){var s=i.map(function(o){return o(a)});return e?Ne(s):s}}function Cr(t,r){return function(e){return t.map(function(i,a){return i+e*(r[a]-i)})}}function It(t){return typeof t=="number"&&isFinite(t)}function Gt(t){return kr(t)?yi(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function kr(t){for(var r=0;r<t.length-2;r++){var e=t[r],i=t[r+1],a=t[r+2];if(e[0]*(i[1]-a[1])+i[0]*(a[1]-e[1])+a[0]*(e[1]-i[1]))return!0}return!1}function Re(t){return new Li(t).abs()}function _e(t){return t.toString().split("M").map(function(r,e){return r=r.trim(),e&&r?"M"+r:r}).filter(function(r){return r})}function Ne(t){return"M"+t.join("L")+"Z"}function Or(t){return _e(Re(t))}function Rr(t,r){var e=Re(t);return _r(e)||Nr(e,r)}function _r(t){var r=t.segments||[],e=[];if(!r.length||r[0][0]!=="M")return!1;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1],h=a[2];if(s==="M"&&i||s==="Z")break;if(s==="M"||s==="L")e.push([o,h]);else if(s==="H")e.push([o,e[e.length-1][1]]);else{if(s!=="V")return!1;e.push([e[e.length-1][0],o])}}return!!e.length&&{ring:e}}function Nr(t,r){var e,i,a=_e(t)[0],s=[],o=3;if(!a)throw new TypeError(pe);i=Hr(a),e=i.getTotalLength(),r&&It(r)&&r>0&&(o=Math.max(o,Math.ceil(e/r)));for(var h=0;h<o;h++){var c=i.getPointAtLength(e*h/o);s.push([c.x,c.y])}return{ring:s,skipBisect:!0}}function Hr(t){if(typeof window!="undefined"&&window&&window.document)try{var r=window.document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"d",t),r}catch(e){}return _i(t)}function Xt(t,r){for(var e=t.length+r,i=he(t)/r,a=0,s=0,o=i/2;t.length<e;){var h=t[a],c=t[(a+1)%t.length],p=bt(h,c);o<=s+p?(t.splice(a+1,0,p?ke(h,c,(o-s)/p):h.slice(0)),o+=i):(s+=p,a++)}}function Dr(t,r){r===void 0&&(r=1/0);for(var e=0;e<t.length;e++)for(var i=t[e],a=e===t.length-1?t[0]:t[e+1];bt(i,a)>r;)a=ke(i,a,.5),t.splice(e+1,0,a)}function St(t,r){var e,i,a;if(typeof t=="string"){var s=Rr(t,r);t=s.ring,a=s.skipBisect}else if(!Array.isArray(t))throw new TypeError(pe);if(e=t.slice(0),!qr(e))throw new TypeError(pe);return e.length>1&&Pr(e[0],e[e.length-1])&&e.pop(),i=$e(e),i>0&&e.reverse(),!a&&r&&It(r)&&r>0&&Dr(e,r),e}function qr(t){return t.every(function(r){return Array.isArray(r)&&r.length>=2&&It(r[0])&&It(r[1])})}function He(t,r,e){var i;return i=t.length-r.length,Xt(t,i<0?-1*i:0),Xt(r,i>0?i:0),Hi(t,r),Oe(t,r,e)}function se(t,r,e){e=e||2;var i=r&&r.length,a=i?r[0]*e:t.length,s=De(t,0,a,e,!0),o=[];if(!s)return o;var h,c,p,m,u,b,T;if(i&&(s=Ur(t,r,s,e)),t.length>80*e){h=p=t[0],c=m=t[1];for(var M=e;M<a;M+=e)u=t[M],b=t[M+1],u<h&&(h=u),b<c&&(c=b),u>p&&(p=u),b>m&&(m=b);T=Math.max(p-h,m-c)}return Ct(s,o,e,h,c,T),o}function De(t,r,e,i,a){var s,o;if(a===ce(t,r,e,i)>0)for(s=r;s<e;s+=i)o=Ve(s,t[s],t[s+1],o);else for(s=e-i;s>=r;s-=i)o=Ve(s,t[s],t[s+1],o);return o&&xt(o,o.next)&&(Ot(o),o=o.next),o}function Pt(t,r){if(!t)return t;r||(r=t);var e,i=t;do if(e=!1,i.steiner||!xt(i,i.next)&&X(i.prev,i,i.next)!==0)i=i.next;else{if(Ot(i),(i=r=i.prev)===i.next)return null;e=!0}while(e||i!==r);return r}function Ct(t,r,e,i,a,s,o){if(t){!o&&s&&Xr(t,i,a,s);for(var h,c,p=t;t.prev!==t.next;)if(h=t.prev,c=t.next,s?Vr(t,i,a,s):Kr(t))r.push(h.i/e),r.push(t.i/e),r.push(c.i/e),Ot(t),t=c.next,p=c.next;else if((t=c)===p){o?o===1?(t=zr(t,r,e),Ct(t,r,e,i,a,s,2)):o===2&&Fr(t,r,e,i,a,s):Ct(Pt(t),r,e,i,a,s,1);break}}}function Kr(t){var r=t.prev,e=t,i=t.next;if(X(r,e,i)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if($t(r.x,r.y,e.x,e.y,i.x,i.y,a.x,a.y)&&X(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Vr(t,r,e,i){var a=t.prev,s=t,o=t.next;if(X(a,s,o)>=0)return!1;for(var h=a.x<s.x?a.x<o.x?a.x:o.x:s.x<o.x?s.x:o.x,c=a.y<s.y?a.y<o.y?a.y:o.y:s.y<o.y?s.y:o.y,p=a.x>s.x?a.x>o.x?a.x:o.x:s.x>o.x?s.x:o.x,m=a.y>s.y?a.y>o.y?a.y:o.y:s.y>o.y?s.y:o.y,u=oe(h,c,r,e,i),b=oe(p,m,r,e,i),T=t.nextZ;T&&T.z<=b;){if(T!==t.prev&&T!==t.next&&$t(a.x,a.y,s.x,s.y,o.x,o.y,T.x,T.y)&&X(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(T=t.prevZ;T&&T.z>=u;){if(T!==t.prev&&T!==t.next&&$t(a.x,a.y,s.x,s.y,o.x,o.y,T.x,T.y)&&X(T.prev,T,T.next)>=0)return!1;T=T.prevZ}return!0}function zr(t,r,e){var i=t;do{var a=i.prev,s=i.next.next;!xt(a,s)&&qe(a,i,i.next,s)&&kt(a,s)&&kt(s,a)&&(r.push(a.i/e),r.push(i.i/e),r.push(s.i/e),Ot(i),Ot(i.next),i=t=s),i=i.next}while(i!==t);return i}function Fr(t,r,e,i,a,s){var o=t;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&Wr(o,h)){var c=Ke(o,h);return o=Pt(o,o.next),c=Pt(c,c.next),Ct(o,r,e,i,a,s),void Ct(c,r,e,i,a,s)}h=h.next}o=o.next}while(o!==t)}function Ur(t,r,e,i){var a,s,o,h,c,p=[];for(a=0,s=r.length;a<s;a++)o=r[a]*i,h=a<s-1?r[a+1]*i:t.length,c=De(t,o,h,i,!1),c===c.next&&(c.steiner=!0),p.push(Yr(c));for(p.sort(jr),a=0;a<p.length;a++)Zr(p[a],e),e=Pt(e,e.next);return e}function jr(t,r){return t.x-r.x}function Zr(t,r){if(r=Gr(t,r)){var e=Ke(r,t);Pt(e,e.next)}}function Gr(t,r){var e,i=r,a=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y){var h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=a&&h>o){if(o=h,h===a){if(s===i.y)return i;if(s===i.next.y)return i.next}e=i.x<i.next.x?i:i.next}}i=i.next}while(i!==r);if(!e)return null;if(a===o)return e.prev;var c,p=e,m=e.x,u=e.y,b=1/0;for(i=e.next;i!==p;)a>=i.x&&i.x>=m&&$t(s<u?a:o,s,m,u,s<u?o:a,s,i.x,i.y)&&((c=Math.abs(s-i.y)/(a-i.x))<b||c===b&&i.x>e.x)&&kt(i,t)&&(e=i,b=c),i=i.next;return e}function Xr(t,r,e,i){var a=t;do a.z===null&&(a.z=oe(a.x,a.y,r,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,$r(a)}function $r(t){var r,e,i,a,s,o,h,c,p=1;do{for(e=t,t=null,s=null,o=0;e;){for(o++,i=e,h=0,r=0;r<p&&(h++,i=i.nextZ);r++);for(c=p;h>0||c>0&&i;)h===0?(a=i,i=i.nextZ,c--):c!==0&&i?e.z<=i.z?(a=e,e=e.nextZ,h--):(a=i,i=i.nextZ,c--):(a=e,e=e.nextZ,h--),s?s.nextZ=a:t=a,a.prevZ=s,s=a;e=i}s.nextZ=null,p*=2}while(o>1);return t}function oe(t,r,e,i,a){return t=32767*(t-e)/a,r=32767*(r-i)/a,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),t|r<<1}function Yr(t){var r=t,e=t;do r.x<e.x&&(e=r),r=r.next;while(r!==t);return e}function $t(t,r,e,i,a,s,o,h){return(a-o)*(r-h)-(t-o)*(s-h)>=0&&(t-o)*(i-h)-(e-o)*(r-h)>=0&&(e-o)*(s-h)-(a-o)*(i-h)>=0}function Wr(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!Br(t,r)&&kt(t,r)&&kt(r,t)&&Qr(t,r)}function X(t,r,e){return(r.y-t.y)*(e.x-r.x)-(r.x-t.x)*(e.y-r.y)}function xt(t,r){return t.x===r.x&&t.y===r.y}function qe(t,r,e,i){return!!(xt(t,r)&&xt(e,i)||xt(t,i)&&xt(e,r))||X(t,r,e)>0!=X(t,r,i)>0&&X(e,i,t)>0!=X(e,i,r)>0}function Br(t,r){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==r.i&&e.next.i!==r.i&&qe(e,e.next,t,r))return!0;e=e.next}while(e!==t);return!1}function kt(t,r){return X(t.prev,t,t.next)<0?X(t,r,t.next)>=0&&X(t,t.prev,r)>=0:X(t,r,t.prev)<0||X(t,t.next,r)<0}function Qr(t,r){var e=t,i=!1,a=(t.x+r.x)/2,s=(t.y+r.y)/2;do e.y>s!=e.next.y>s&&a<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==t);return i}function Ke(t,r){var e=new le(t.i,t.x,t.y),i=new le(r.i,r.x,r.y),a=t.next,s=r.prev;return t.next=r,r.prev=t,e.next=a,a.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function Ve(t,r,e,i){var a=new le(t,r,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Ot(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function le(t,r,e){this.i=t,this.x=r,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ce(t,r,e,i){for(var a=0,s=r,o=e-i;s<e;s+=i)a+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return a}function ze(t,r){var e=r.id,i=r.bbox,a=r.properties==null?{}:r.properties,s=Fe(t,r);return e==null&&i==null?{type:"Feature",properties:a,geometry:s}:i==null?{type:"Feature",id:e,properties:a,geometry:s}:{type:"Feature",id:e,bbox:i,properties:a,geometry:s}}function Fe(t,r){function e(m,u){u.length&&u.pop();for(var b=p[m<0?~m:m],T=0,M=b.length;T<M;++T)u.push(c(b[T],T));m<0&&zi(u,M)}function i(m){return c(m)}function a(m){for(var u=[],b=0,T=m.length;b<T;++b)e(m[b],u);return u.length<2&&u.push(u[0]),u}function s(m){for(var u=a(m);u.length<4;)u.push(u[0]);return u}function o(m){return m.map(s)}function h(m){var u,b=m.type;switch(b){case"GeometryCollection":return{type:b,geometries:m.geometries.map(h)};case"Point":u=i(m.coordinates);break;case"MultiPoint":u=m.coordinates.map(i);break;case"LineString":u=a(m.arcs);break;case"MultiLineString":u=m.arcs.map(a);break;case"Polygon":u=o(m.arcs);break;case"MultiPolygon":u=m.arcs.map(o);break;default:return null}return{type:b,coordinates:u}}var c=Vi(t.transform),p=t.arcs;return h(r)}function Jr(t){for(var r,e=-1,i=t.length,a=t[i-1],s=0;++e<i;)r=a,a=t[e],s+=r[0]*a[1]-r[1]*a[0];return Math.abs(s)}function ti(t,r){function e(c){switch(c.type){case"GeometryCollection":c.geometries.forEach(e);break;case"Polygon":i(c.arcs);break;case"MultiPolygon":c.arcs.forEach(i)}}function i(c){c.forEach(function(p){p.forEach(function(m){(s[m=m<0?~m:m]||(s[m]=[])).push(c)})}),o.push(c)}function a(c){return Jr(Fe(t,{type:"Polygon",arcs:[c]}).coordinates[0])}var s={},o=[],h=[];return r.forEach(e),o.forEach(function(c){if(!c._){var p=[],m=[c];for(c._=1,h.push(p);c=m.pop();)p.push(c),c.forEach(function(u){u.forEach(function(b){s[b<0?~b:b].forEach(function(T){T._||(T._=1,m.push(T))})})})}}),o.forEach(function(c){delete c._}),{type:"MultiPolygon",arcs:h.map(function(c){var p,m=[];if(c.forEach(function(R){R.forEach(function(P){P.forEach(function(_){s[_<0?~_:_].length<2&&m.push(_)})})}),m=Ui(t,m),(p=m.length)>1)for(var u,b,T=1,M=a(m[0]);T<p;++T)(u=a(m[T]))>M&&(b=m[0],m[0]=m[T],m[T]=b,M=u);return m})}}function ei(t){return function(r,e){return Qe(t(r),e)}}function ri(t,r){var e={},i={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return t.forEach(function(a){var s=[];a.forEach(function(o,h){var c=o[0]<o[1]?o.join(","):o[1]+","+o[0],p=o.map(function(m){return r[m]});c in e?s.push(~e[c]):(s.push(e[c]=i.arcs.length),i.arcs.push(p))}),i.objects.triangles.geometries.push({type:"Polygon",area:Math.abs($e(a.map(function(o){return r[o[0]]}))),arcs:[s]})}),i.objects.triangles.geometries.sort(function(a,s){return a.area-s.area}),i}function ii(t,r){for(var e=t.objects.triangles.geometries,i=Je(function(a){return a.area}).left;e.length>r;)(function(){var a=e[0],s=ji(e)[0][0],o=e[s],h=ti(t,[a,o]);h.area=a.area+o.area,h.type="Polygon",h.arcs=h.arcs[0],e.splice(s,1),e.shift(),e.splice(i(e,h.area),0,h)})();if(r>e.length)throw new RangeError("Can't collapse topology into "+r+" pieces.");return Fi(t,t.objects.triangles).features.map(function(a){return a.geometry.coordinates[0].pop(),a.geometry.coordinates[0]})}function ni(t){for(var r=qi(t.reduce(function(s,o){return s.concat([o[0]],[o[1]])},[])),e=[],i=0,a=r.length;i<a;i+=3)e.push([[r[i],r[i+1]],[r[i+1],r[i+2]],[r[i+2],r[i]]]);return e}function ai(t,r,e){function i(o,h,c){h===void 0&&(h=[]),c===void 0&&(c=0);for(var p=0;p<o.length;p++){var m=o.splice(p,1),u=e[m[0]][h.length];c+u<a&&(o.length?i(o.slice(),h.concat(m),c+u):(a=c+u,s=h.concat(m))),o.length&&o.splice(p,0,m[0])}}var a=1/0,s=t.map(function(o,h){return h});return i(s),s}function si(t,r){var e=bt(Gt(t),Gt(r));return e*e}function Ue(t,r,e){e===void 0&&(e={});var i=e.maxSegmentLength;i===void 0&&(i=10);var a=e.string;a===void 0&&(a=!0);var s=e.single;s===void 0&&(s=!1);var o=St(t,i);o.length<r.length+2&&Xt(o,r.length+2-o.length);var h,c=Gi(o,r.length),p=r.map(function(u){return St(u,i)}),m=typeof t=="string"&&t;return s&&!r.every(function(u){return typeof u=="string"})||(h=r.slice(0)),je(c,p,{match:!0,string:a,single:s,t0:m,t1:h})}function oi(t,r,e){e===void 0&&(e={});var i=e.maxSegmentLength;i===void 0&&(i=10);var a=e.string;a===void 0&&(a=!0);var s=e.single;s===void 0&&(s=!1);var o=Ue(r,t,{maxSegmentLength:i,string:a,single:s});return s?function(h){return o(1-h)}:o.map(function(h){return function(c){return h(1-c)}})}function li(t,r,e){e===void 0&&(e={});var i=e.maxSegmentLength;i===void 0&&(i=10);var a=e.string;a===void 0&&(a=!0);var s=e.single;if(s===void 0&&(s=!1),!Array.isArray(t)||!Array.isArray(r)||t.length!==r.length||!t.length)throw new TypeError(Ni);var o,h,c=function(u){return St(u,i)},p=t.map(c),m=r.map(c);return s?(t.every(function(u){return typeof u=="string"})&&(o=t.slice(0)),r.every(function(u){return typeof u=="string"})&&(h=r.slice(0))):(o=t.slice(0),h=r.slice(0)),je(p,m,{string:a,single:s,t0:o,t1:h,match:!1})}function je(t,r,e){e===void 0&&(e={});var i=e.string,a=e.single,s=e.t0,o=e.t1,h=e.match,c=h?Xi(t,r):t.map(function(u,b){return b}),p=c.map(function(u,b){return He(t[u],r[b],i)});if(h&&Array.isArray(s)&&(s=c.map(function(u){return s[u]})),a&&i&&(Array.isArray(s)&&(s=s.join(" ")),Array.isArray(o)&&(o=o.join(" "))),a){var m=i?function(u){return p.map(function(b){return b(u)}).join(" ")}:function(u){return p.map(function(b){return b(u)})};return i&&(s||o)?function(u){return u<1e-4&&s||1-u<1e-4&&o||m(u)}:m}return i?(s=Array.isArray(s)?s.map(function(u){return typeof u=="string"&&u}):[],o=Array.isArray(o)?o.map(function(u){return typeof u=="string"&&u}):[],p.map(function(u,b){return s[b]||o[b]?function(T){return T<1e-4&&s[b]||1-T<1e-4&&o[b]||u(T)}:u})):p}function Ze(t,r,e,i,a){return Xe(ui(t,r,e),i,gi(t,r,e),2*Math.PI*e,a)}function ci(t,r,e,i,a){var s=Ze(r,e,i,t,a);return function(o){return s(1-o)}}function Ge(t,r,e,i,a,s){return Xe(pi(t,r,e,i),a,mi(t,r,e,i),2*e+2*i,s)}function hi(t,r,e,i,a,s){var o=Ge(r,e,i,a,t,s);return function(h){return o(1-h)}}function Xe(t,r,e,i,a){a===void 0&&(a={});var s=a.maxSegmentLength;s===void 0&&(s=10);var o=a.string;o===void 0&&(o=!0);var h,c,p=St(r,s);return It(i)&&p.length<i/s&&Xt(p,Math.ceil(i/s-p.length)),h=t(p),c=Oe(h,p,o),o?function(m){return m<1e-4?e:c(m)}:c}function ui(t,r,e){return function(i){var a=Gt(i),s=he(i.concat([i[0]])),o=Math.atan2(i[0][1]-a[1],i[0][0]-a[0]),h=0;return i.map(function(c,p){var m;return p&&(h+=bt(c,i[p-1])),m=o+2*Math.PI*(s?h/s:p/i.length),[Math.cos(m)*e+t,Math.sin(m)*e+r]})}}function pi(t,r,e,i){return function(a){var s=Gt(a),o=he(a.concat([a[0]])),h=Math.atan2(a[0][1]-s[1],a[0][0]-s[0]),c=0;h<0&&(h=2*Math.PI+h);var p=h/(2*Math.PI);return a.map(function(m,u){u&&(c+=bt(m,a[u-1]));var b=fi((p+(o?c/o:u/a.length))%1);return[t+b[0]*e,r+b[1]*i]})}}function fi(t){return t<=1/8?[1,.5+4*t]:t<=3/8?[1.5-4*t,1]:t<=5/8?[0,2.5-4*t]:t<=7/8?[4*t-2.5,0]:[1,4*t-3.5]}function gi(t,r,e){var i=t-e+","+r,a=t+e+","+r,s="A"+e+","+e+",0,1,1,";return"M"+i+s+a+s+i+"Z"}function mi(t,r,e,i){var a=t+e,s=r+i;return"M"+t+","+r+"L"+a+","+r+"L"+a+","+s+"L"+t+","+s+"Z"}var $e=function(t){for(var r,e=-1,i=t.length,a=t[i-1],s=0;++e<i;)r=a,a=t[e],s+=r[1]*a[0]-r[0]*a[1];return s/2},yi=function(t){for(var r,e,i=-1,a=t.length,s=0,o=0,h=t[a-1],c=0;++i<a;)r=h,h=t[i],c+=e=r[0]*h[1]-h[0]*r[1],s+=(r[0]+h[0])*e,o+=(r[1]+h[1])*e;return c*=3,[s/c,o/c]},he=function(t){for(var r,e,i=-1,a=t.length,s=t[a-1],o=s[0],h=s[1],c=0;++i<a;)r=o,e=h,s=t[i],o=s[0],h=s[1],r-=o,e-=h,c+=Math.sqrt(r*r+e*e);return c},Yt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},di=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],vi=function(t){var r=new d(t),e=r.max;for(v(r);r.index<e&&!r.err.length;)E(r);return r.err.length?r.result=[]:r.result.length&&("mM".indexOf(r.result[0][0])<0?(r.err="SvgPath: string should start with `M` or `m`",r.result=[]):r.result[0][0]="M"),{err:r.err,segments:r.result}};S.prototype.matrix=function(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0?this:(this.cache=null,this.queue.push(t),this)},S.prototype.translate=function(t,r){return t===0&&r===0||(this.cache=null,this.queue.push([1,0,0,1,t,r])),this},S.prototype.scale=function(t,r){return t===1&&r===1||(this.cache=null,this.queue.push([t,0,0,r,0,0])),this},S.prototype.rotate=function(t,r,e){var i,a,s;return t!==0&&(this.translate(r,e),i=t*Math.PI/180,a=Math.cos(i),s=Math.sin(i),this.queue.push([a,s,-s,a,0,0]),this.cache=null,this.translate(-r,-e)),this},S.prototype.skewX=function(t){return t!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},S.prototype.skewY=function(t){return t!==0&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},S.prototype.toArray=function(){var t=this;if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var r=1;r<this.queue.length;r++)t.cache=w(t.cache,t.queue[r]);return this.cache},S.prototype.calc=function(t,r,e){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),i=this.cache,[t*i[0]+r*i[2]+(e?0:i[4]),t*i[1]+r*i[3]+(e?0:i[5])]):[t,r]};var mt=S,bi={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},xi=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Ei=/[\s,]+/,Ti=function(t){var r,e,i=new mt;return t.split(xi).forEach(function(a){if(a.length){if(bi[a]!==void 0)return void(r=a);switch(e=a.split(Ei).map(function(s){return+s||0}),r){case"matrix":return void(e.length===6&&i.matrix(e));case"scale":return void(e.length===1?i.scale(e[0],e[0]):e.length===2&&i.scale(e[0],e[1]));case"rotate":return void(e.length===1?i.rotate(e[0],0,0):e.length===3&&i.rotate(e[0],e[1],e[2]));case"translate":return void(e.length===1?i.translate(e[0],0):e.length===2&&i.translate(e[0],e[1]));case"skewX":return void(e.length===1&&i.skewX(e[0]));case"skewY":return void(e.length===1&&i.skewY(e[0]))}}}),i},Rt=2*Math.PI,Ai=function(t,r,e,i,a,s,o,h,c){var p=Math.sin(c*Rt/360),m=Math.cos(c*Rt/360),u=m*(t-e)/2+p*(r-i)/2,b=-p*(t-e)/2+m*(r-i)/2;if(u===0&&b===0)return[];if(o===0||h===0)return[];o=Math.abs(o),h=Math.abs(h);var T=u*u/(o*o)+b*b/(h*h);T>1&&(o*=Math.sqrt(T),h*=Math.sqrt(T));var M=I(t,r,e,i,a,s,o,h,p,m),R=[],P=M[2],_=M[3],Z=Math.max(Math.ceil(Math.abs(_)/(Rt/4)),1);_/=Z;for(var ht=0;ht<Z;ht++)R.push(H(P,_)),P+=_;return R.map(function(G){for(var U=0;U<G.length;U+=2){var tt=G[U+0],nt=G[U+1];tt*=o,nt*=h;var Et=m*tt-p*nt,Tt=p*tt+m*nt;G[U+0]=Et+M[0],G[U+1]=Tt+M[1]}return G})},Ye=Math.PI/180;C.prototype.transform=function(t){var r=Math.cos(this.ax*Ye),e=Math.sin(this.ax*Ye),i=[this.rx*(t[0]*r+t[2]*e),this.rx*(t[1]*r+t[3]*e),this.ry*(-t[0]*e+t[2]*r),this.ry*(-t[1]*e+t[3]*r)],a=i[0]*i[0]+i[2]*i[2],s=i[1]*i[1]+i[3]*i[3],o=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),h=(a+s)/2;if(o<1e-10*h)return this.rx=this.ry=Math.sqrt(h),this.ax=0,this;var c=i[0]*i[1]+i[2]*i[3];o=Math.sqrt(o);var p=h+o/2,m=h-o/2;return this.ax=Math.abs(c)<1e-10&&Math.abs(p-s)<1e-10?90:180*Math.atan(Math.abs(c)>Math.abs(p-s)?(p-a)/c:c/(p-s))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(p),this.ry=Math.sqrt(m)):(this.ax+=90,this.rx=Math.sqrt(m),this.ry=Math.sqrt(p)),this},C.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx};var wi=C;L.prototype.__matrix=function(t){var r,e=this;t.queue.length&&this.iterate(function(i,a,s,o){var h,c,p,m;switch(i[0]){case"v":h=t.calc(0,i[1],!0),c=h[0]===0?["v",h[1]]:["l",h[0],h[1]];break;case"V":h=t.calc(s,i[1],!1),c=h[0]===t.calc(s,o,!1)[0]?["V",h[1]]:["L",h[0],h[1]];break;case"h":h=t.calc(i[1],0,!0),c=h[1]===0?["h",h[0]]:["l",h[0],h[1]];break;case"H":h=t.calc(i[1],o,!1),c=h[1]===t.calc(s,o,!1)[1]?["H",h[0]]:["L",h[0],h[1]];break;case"a":case"A":var u=t.toArray(),b=wi(i[1],i[2],i[3]).transform(u);if(u[0]*u[3]-u[1]*u[2]<0&&(i[5]=i[5]?"0":"1"),h=t.calc(i[6],i[7],i[0]==="a"),i[0]==="A"&&i[6]===s&&i[7]===o||i[0]==="a"&&i[6]===0&&i[7]===0){c=[i[0]==="a"?"l":"L",h[0],h[1]];break}c=b.isDegenerate()?[i[0]==="a"?"l":"L",h[0],h[1]]:[i[0],b.rx,b.ry,b.ax,i[4],i[5],h[0],h[1]];break;case"m":m=a>0,h=t.calc(i[1],i[2],m),c=["m",h[0],h[1]];break;default:for(p=i[0],c=[p],m=p.toLowerCase()===p,r=1;r<i.length;r+=2)h=t.calc(i[r],i[r+1],m),c.push(h[0],h[1])}e.segments[a]=c},!0)},L.prototype.__evaluateStack=function(){var t,r,e=this;if(this.__stack.length){if(this.__stack.length===1)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=mt(),r=this.__stack.length;--r>=0;)t.matrix(e.__stack[r].toArray());this.__matrix(t),this.__stack=[]}},L.prototype.toString=function(){var t,r,e=this,i=[];this.__evaluateStack();for(var a=0;a<this.segments.length;a++)r=e.segments[a][0],t=a>0&&r!=="m"&&r!=="M"&&r===e.segments[a-1][0],i=i.concat(t?e.segments[a].slice(1):e.segments[a]);return i.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},L.prototype.translate=function(t,r){return this.__stack.push(mt().translate(t,r||0)),this},L.prototype.scale=function(t,r){return this.__stack.push(mt().scale(t,r||r===0?r:t)),this},L.prototype.rotate=function(t,r,e){return this.__stack.push(mt().rotate(t,r||0,e||0)),this},L.prototype.skewX=function(t){return this.__stack.push(mt().skewX(t)),this},L.prototype.skewY=function(t){return this.__stack.push(mt().skewY(t)),this},L.prototype.matrix=function(t){return this.__stack.push(mt().matrix(t)),this},L.prototype.transform=function(t){return t.trim()?(this.__stack.push(Ti(t)),this):this},L.prototype.round=function(t){var r,e=0,i=0,a=0,s=0;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(o){var h=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":return h&&(o[1]+=a),a=o[1]-o[1].toFixed(t),void(o[1]=+o[1].toFixed(t));case"V":case"v":return h&&(o[1]+=s),s=o[1]-o[1].toFixed(t),void(o[1]=+o[1].toFixed(t));case"Z":case"z":return a=e,void(s=i);case"M":case"m":return h&&(o[1]+=a,o[2]+=s),a=o[1]-o[1].toFixed(t),s=o[2]-o[2].toFixed(t),e=a,i=s,o[1]=+o[1].toFixed(t),void(o[2]=+o[2].toFixed(t));case"A":case"a":return h&&(o[6]+=a,o[7]+=s),a=o[6]-o[6].toFixed(t),s=o[7]-o[7].toFixed(t),o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t),o[3]=+o[3].toFixed(t+2),o[6]=+o[6].toFixed(t),void(o[7]=+o[7].toFixed(t));default:return r=o.length,h&&(o[r-2]+=a,o[r-1]+=s),a=o[r-2]-o[r-2].toFixed(t),s=o[r-1]-o[r-1].toFixed(t),void o.forEach(function(c,p){p&&(o[p]=+o[p].toFixed(t))})}}),this},L.prototype.iterate=function(t,r){var e,i,a,s=this.segments,o={},h=!1,c=0,p=0,m=0,u=0;if(r||this.__evaluateStack(),s.forEach(function(b,T){var M=t(b,T,c,p);Array.isArray(M)&&(o[T]=M,h=!0);var R=b[0]===b[0].toLowerCase();switch(b[0]){case"m":case"M":return c=b[1]+(R?c:0),p=b[2]+(R?p:0),m=c,void(u=p);case"h":case"H":return void(c=b[1]+(R?c:0));case"v":case"V":return void(p=b[1]+(R?p:0));case"z":case"Z":return c=m,void(p=u);default:c=b[b.length-2]+(R?c:0),p=b[b.length-1]+(R?p:0)}}),!h)return this;for(a=[],e=0;e<s.length;e++)if(o[e]!==void 0)for(i=0;i<o[e].length;i++)a.push(o[e][i]);else a.push(s[e]);return this.segments=a,this},L.prototype.abs=function(){return this.iterate(function(t,r,e,i){var a,s=t[0],o=s.toUpperCase();if(s!==o)switch(t[0]=o,s){case"v":return void(t[1]+=i);case"a":return t[6]+=e,void(t[7]+=i);default:for(a=1;a<t.length;a++)t[a]+=a%2?e:i}},!0),this},L.prototype.rel=function(){return this.iterate(function(t,r,e,i){var a,s=t[0],o=s.toLowerCase();if(s!==o&&(r!==0||s!=="M"))switch(t[0]=o,s){case"V":return void(t[1]-=i);case"A":return t[6]-=e,void(t[7]-=i);default:for(a=1;a<t.length;a++)t[a]-=a%2?e:i}},!0),this},L.prototype.unarc=function(){return this.iterate(function(t,r,e,i){var a,s,o,h=[],c=t[0];return c!=="A"&&c!=="a"?null:(c==="a"?(s=e+t[6],o=i+t[7]):(s=t[6],o=t[7]),a=Ai(e,i,s,o,t[4],t[5],t[1],t[2],t[3]),a.length===0?[[t[0]==="a"?"l":"L",t[6],t[7]]]:(a.forEach(function(p){h.push(["C",p[2],p[3],p[4],p[5],p[6],p[7]])}),h))}),this},L.prototype.unshort=function(){var t,r,e,i,a,s=this.segments;return this.iterate(function(o,h,c,p){var m,u=o[0],b=u.toUpperCase();h&&(b==="T"?(m=u==="t",e=s[h-1],e[0]==="Q"?(t=e[1]-c,r=e[2]-p):e[0]==="q"?(t=e[1]-e[3],r=e[2]-e[4]):(t=0,r=0),i=-t,a=-r,m||(i+=c,a+=p),s[h]=[m?"q":"Q",i,a,o[1],o[2]]):b==="S"&&(m=u==="s",e=s[h-1],e[0]==="C"?(t=e[3]-c,r=e[4]-p):e[0]==="c"?(t=e[3]-e[5],r=e[4]-e[6]):(t=0,r=0),i=-t,a=-r,m||(i+=c,a+=p),s[h]=[m?"c":"C",i,a,o[1],o[2],o[3],o[4]]))}),this};var Si=L,Li=Si,ue={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Mi=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Ii=function(t){var r=[];return t.replace(Mi,function(e,i,a){var s=i.toLowerCase();for(a=D(a),s==="m"&&a.length>2&&(r.push([i].concat(a.splice(0,2))),s="l",i=i==="m"?"l":"L");a.length>=0;){if(a.length===ue[s])return a.unshift(i),r.push(a);if(a.length<ue[s])throw new Error("malformed path data");r.push([i].concat(a.splice(0,ue[s])))}}),r},Pi=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,it=function(t,r,e,i,a,s,o,h){return new k(t,r,e,i,a,s,o,h)};k.prototype={constructor:k,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var r=K(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r)},getTangentAtLength:function(t){var r=K(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),e=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],r),i=Math.sqrt(e.x*e.x+e.y*e.y);return i>0?{x:e.x/i,y:e.y/i}:{x:0,y:0}},getPropertiesAtLength:function(t){var r,e=K(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),i=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),a=Math.sqrt(i.x*i.x+i.y*i.y);r=a>0?{x:i.x/a,y:i.y/a}:{x:0,y:0};var s=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e);return{x:s.x,y:s.y,tangentX:r.x,tangentY:r.y}}};var Ci=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],ki=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Oi=[[1],[1,1],[1,2,1],[1,3,3,1]],_t=2*Math.PI,Ri=function(t,r,e,i,a,s,o,h,c){var p=Math.sin(a*_t/360),m=Math.cos(a*_t/360),u=m*(t-h)/2+p*(r-c)/2,b=-p*(t-h)/2+m*(r-c)/2;if(u===0&&b===0)return[];if(e===0||i===0)return[];e=Math.abs(e),i=Math.abs(i);var T=u*u/(e*e)+b*b/(i*i);T>1&&(e*=Math.sqrt(T),i*=Math.sqrt(T));var M=Mr(t,r,h,c,s,o,e,i,p,m),R=[],P=M[2],_=M[3],Z=Math.max(Math.ceil(Math.abs(_)/(_t/4)),1);_/=Z;for(var ht=0;ht<Z;ht++)R.push(Ir(P,_)),P+=_;return R.map(function(G){for(var U=0;U<G.length;U+=2){var tt=G[U+0],nt=G[U+1];tt*=e,nt*=i;var Et=m*tt-p*nt,Tt=p*tt+m*nt;G[U+0]=Et+M[0],G[U+1]=Tt+M[1]}return G})},We=function(t,r,e,i,a,s,o,h,c){return new ae(t,r,e,i,a,s,o,h,c)};ae.prototype={constructor:ae,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){var r=this;t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var i=0,a=0;a<e;a++)i+=r.partialLengths[a];return this.curves[e].getPointAtLength(t-i)},getTangentAtLength:function(t){var r=this;t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var i=0,a=0;a<e;a++)i+=r.partialLengths[a];return this.curves[e].getTangentAtLength(t-i)},getPropertiesAtLength:function(t){var r=this.getTangentAtLength(t),e=this.getPointAtLength(t);return{x:e.x,y:e.y,tangentX:r.x,tangentY:r.y}}};var ct=function(t,r,e,i){return new Mt(t,r,e,i)};Mt.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},Mt.prototype.getPointAtLength=function(t){var r=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),e=(this.x1-this.x0)*r,i=(this.y1-this.y0)*r;return{x:this.x0+e,y:this.y0+i}},Mt.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},Mt.prototype.getPropertiesAtLength=function(t){var r=this.getPointAtLength(t),e=this.getTangentAtLength();return{x:r.x,y:r.y,tangentX:e.x,tangentY:e.y}};var _i=function(t){function r(o){if(!o)return null;for(var h,c=Ii(o),p=[0,0],m=[0,0],u=0;u<c.length;u++)c[u][0]==="M"?(p=[c[u][1],c[u][2]],a.push(null)):c[u][0]==="m"?(p=[c[u][1]+p[0],c[u][2]+p[1]],a.push(null)):c[u][0]==="L"?(e+=Math.sqrt(Math.pow(p[0]-c[u][1],2)+Math.pow(p[1]-c[u][2],2)),a.push(new ct(p[0],c[u][1],p[1],c[u][2])),p=[c[u][1],c[u][2]]):c[u][0]==="l"?(e+=Math.sqrt(Math.pow(c[u][1],2)+Math.pow(c[u][2],2)),a.push(new ct(p[0],c[u][1]+p[0],p[1],c[u][2]+p[1])),p=[c[u][1]+p[0],c[u][2]+p[1]]):c[u][0]==="H"?(e+=Math.abs(p[0]-c[u][1]),a.push(new ct(p[0],c[u][1],p[1],p[1])),p[0]=c[u][1]):c[u][0]==="h"?(e+=Math.abs(c[u][1]),a.push(new ct(p[0],p[0]+c[u][1],p[1],p[1])),p[0]=c[u][1]+p[0]):c[u][0]==="V"?(e+=Math.abs(p[1]-c[u][1]),a.push(new ct(p[0],p[0],p[1],c[u][1])),p[1]=c[u][1]):c[u][0]==="v"?(e+=Math.abs(c[u][1]),a.push(new ct(p[0],p[0],p[1],p[1]+c[u][1])),p[1]=c[u][1]+p[1]):c[u][0]==="z"||c[u][0]==="Z"?(e+=Math.sqrt(Math.pow(c[0][1]-p[0],2)+Math.pow(c[0][2]-p[1],2)),a.push(new ct(p[0],c[0][1],p[1],c[0][2])),p=[c[0][1],c[0][2]]):c[u][0]==="C"?(h=new it(p[0],p[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],c[u][6]),e+=h.getTotalLength(),p=[c[u][5],c[u][6]],a.push(h)):c[u][0]==="c"?(h=new it(p[0],p[1],p[0]+c[u][1],p[1]+c[u][2],p[0]+c[u][3],p[1]+c[u][4],p[0]+c[u][5],p[1]+c[u][6]),e+=h.getTotalLength(),p=[c[u][5]+p[0],c[u][6]+p[1]],a.push(h)):c[u][0]==="S"?(h=u>0&&["C","c","S","s"].indexOf(c[u-1][0])>-1?new it(p[0],p[1],2*p[0]-c[u-1][c[u-1].length-4],2*p[1]-c[u-1][c[u-1].length-3],c[u][1],c[u][2],c[u][3],c[u][4]):new it(p[0],p[1],p[0],p[1],c[u][1],c[u][2],c[u][3],c[u][4]),e+=h.getTotalLength(),p=[c[u][3],c[u][4]],a.push(h)):c[u][0]==="s"?(h=u>0&&["C","c","S","s"].indexOf(c[u-1][0])>-1?new it(p[0],p[1],p[0]+h.d.x-h.c.x,p[1]+h.d.y-h.c.y,p[0]+c[u][1],p[1]+c[u][2],p[0]+c[u][3],p[1]+c[u][4]):new it(p[0],p[1],p[0],p[1],p[0]+c[u][1],p[1]+c[u][2],p[0]+c[u][3],p[1]+c[u][4]),e+=h.getTotalLength(),p=[c[u][3]+p[0],c[u][4]+p[1]],a.push(h)):c[u][0]==="Q"?(h=new it(p[0],p[1],c[u][1],c[u][2],c[u][3],c[u][4]),e+=h.getTotalLength(),a.push(h),p=[c[u][3],c[u][4]],m=[c[u][1],c[u][2]]):c[u][0]==="q"?(h=new it(p[0],p[1],p[0]+c[u][1],p[1]+c[u][2],p[0]+c[u][3],p[1]+c[u][4]),e+=h.getTotalLength(),m=[p[0]+c[u][1],p[1]+c[u][2]],p=[c[u][3]+p[0],c[u][4]+p[1]],a.push(h)):c[u][0]==="T"?(h=u>0&&["Q","q","T","t"].indexOf(c[u-1][0])>-1?new it(p[0],p[1],2*p[0]-m[0],2*p[1]-m[1],c[u][1],c[u][2]):new ct(p[0],c[u][1],p[1],c[u][2]),a.push(h),e+=h.getTotalLength(),m=[2*p[0]-m[0],2*p[1]-m[1]],p=[c[u][1],c[u][2]]):c[u][0]==="t"?(h=u>0&&["Q","q","T","t"].indexOf(c[u-1][0])>-1?new it(p[0],p[1],2*p[0]-m[0],2*p[1]-m[1],p[0]+c[u][1],p[1]+c[u][2]):new ct(p[0],p[0]+c[u][1],p[1],p[1]+c[u][2]),e+=h.getTotalLength(),m=[2*p[0]-m[0],2*p[1]-m[1]],p=[c[u][1]+p[0],c[u][2]+p[0]],a.push(h)):c[u][0]==="A"?(h=new We(p[0],p[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],c[u][6],c[u][7]),e+=h.getTotalLength(),p=[c[u][6],c[u][7]],a.push(h)):c[u][0]==="a"&&(h=new We(p[0],p[1],c[u][1],c[u][2],c[u][3],c[u][4],c[u][5],p[0]+c[u][6],p[1]+c[u][7]),e+=h.getTotalLength(),p=[p[0]+c[u][6],p[1]+c[u][7]],a.push(h)),i.push(e);return r}var e=0,i=[],a=[];r.getTotalLength=function(){return e},r.getPointAtLength=function(o){var h=s(o);return a[h.i].getPointAtLength(h.fraction)},r.getTangentAtLength=function(o){var h=s(o);return a[h.i].getTangentAtLength(h.fraction)},r.getPropertiesAtLength=function(o){var h=s(o);return a[h.i].getPropertiesAtLength(h.fraction)};var s=function(o){o<0?o=0:o>e&&(o=e);for(var h=i.length-1;i[h]>=o&&i[h]>0;)h--;return h++,{fraction:o-i[h-1],i:h}};return r(t)},pe=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`,Ni="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).",Hi=function(t,r){for(var e,i,a,s=t.length,o=1/0,h=0;h<s;h++)(function(c){i=0,r.forEach(function(p,m){var u=bt(t[(c+m)%s],p);i+=u*u}),i<o&&(o=i,e=c)})(h);e&&(a=t.splice(0,e),t.splice.apply(t,[t.length,0].concat(a)))},Di=function(t,r,e){e===void 0&&(e={});var i=e.maxSegmentLength;i===void 0&&(i=10);var a=e.string;a===void 0&&(a=!0);var s=St(t,i),o=St(r,i),h=He(s,o,a);return!a||typeof t!="string"&&typeof r!="string"?h:function(c){return c<1e-4&&typeof t=="string"?t:1-c<1e-4&&typeof r=="string"?r:h(c)}},qi=se;se.deviation=function(t,r,e,i){var a=r&&r.length,s=a?r[0]*e:t.length,o=Math.abs(ce(t,0,s,e));if(a)for(var h=0,c=r.length;h<c;h++){var p=r[h]*e,m=h<c-1?r[h+1]*e:t.length;o-=Math.abs(ce(t,p,m,e))}var u=0;for(h=0;h<i.length;h+=3){var b=i[h]*e,T=i[h+1]*e,M=i[h+2]*e;u+=Math.abs((t[b]-t[M])*(t[T+1]-t[b+1])-(t[b]-t[T])*(t[M+1]-t[b+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)},se.flatten=function(t){for(var r=t[0][0].length,e={vertices:[],holes:[],dimensions:r},i=0,a=0;a<t.length;a++){for(var s=0;s<t[a].length;s++)for(var o=0;o<r;o++)e.vertices.push(t[a][s][o]);a>0&&(i+=t[a-1].length,e.holes.push(i))}return e};var Ki=function(t){return t},Vi=function(t){if(t==null)return Ki;var r,e,i=t.scale[0],a=t.scale[1],s=t.translate[0],o=t.translate[1];return function(h,c){c||(r=e=0);var p=2,m=h.length,u=new Array(m);for(u[0]=(r+=h[0])*i+s,u[1]=(e+=h[1])*a+o;p<m;)u[p]=h[p],++p;return u}},zi=function(t,r){for(var e,i=t.length,a=i-r;a<--i;)e=t[a],t[a++]=t[i],t[i]=e},Fi=function(t,r){return r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(e){return ze(t,e)})}:ze(t,r)},Ui=function(t,r){function e(p){var m,u=t.arcs[p<0?~p:p],b=u[0];return t.transform?(m=[0,0],u.forEach(function(T){m[0]+=T[0],m[1]+=T[1]})):m=u[u.length-1],p<0?[m,b]:[b,m]}function i(p,m){for(var u in p){var b=p[u];delete m[b.start],delete b.start,delete b.end,b.forEach(function(T){a[T<0?~T:T]=1}),h.push(b)}}var a={},s={},o={},h=[],c=-1;return r.forEach(function(p,m){var u,b=t.arcs[p<0?~p:p];b.length<3&&!b[1][0]&&!b[1][1]&&(u=r[++c],r[c]=p,r[m]=u)}),r.forEach(function(p){var m,u,b=e(p),T=b[0],M=b[1];if(m=o[T])if(delete o[m.end],m.push(p),m.end=M,u=s[M]){delete s[u.start];var R=u===m?m:m.concat(u);s[R.start=m.start]=o[R.end=u.end]=R}else s[m.start]=o[m.end]=m;else if(m=s[M])if(delete s[m.start],m.unshift(p),m.start=T,u=o[T]){delete o[u.end];var P=u===m?m:u.concat(m);s[P.start=u.start]=o[P.end=m.end]=P}else s[m.start]=o[m.end]=m;else m=[p],s[m.start=T]=o[m.end=M]=m}),i(o,s),i(s,o),r.forEach(function(p){a[p<0?~p:p]||h.push([p])}),h},Be=function(t,r){for(var e=0,i=t.length;e<i;){var a=e+i>>>1;t[a]<r?e=a+1:i=a}return e},ji=function(t){function r(R,P){R.forEach(function(_){_<0&&(_=~_);var Z=a[_];Z?Z.push(P):a[_]=[P]})}function e(R,P){R.forEach(function(_){r(_,P)})}function i(R,P){R.type==="GeometryCollection"?R.geometries.forEach(function(_){i(_,P)}):R.type in o&&o[R.type](R.arcs,P)}var a={},s=t.map(function(){return[]}),o={LineString:r,MultiLineString:e,Polygon:e,MultiPolygon:function(R,P){R.forEach(function(_){e(_,P)})}};t.forEach(i);for(var h in a)for(var c=a[h],p=c.length,m=0;m<p;++m)for(var u=m+1;u<p;++u){var b,T=c[m],M=c[u];(b=s[T])[h=Be(b,M)]!==M&&b.splice(h,0,M),(b=s[M])[h=Be(b,T)]!==T&&b.splice(h,0,T)}return s},Qe=function(t,r){return t<r?-1:t>r?1:t>=r?0:NaN},Je=function(t){return t.length===1&&(t=ei(t)),{left:function(r,e,i,a){for(i==null&&(i=0),a==null&&(a=r.length);i<a;){var s=i+a>>>1;t(r[s],e)<0?i=s+1:a=s}return i},right:function(r,e,i,a){for(i==null&&(i=0),a==null&&(a=r.length);i<a;){var s=i+a>>>1;t(r[s],e)>0?a=s:i=s+1}return i}}},Zi=Je(Qe),Gi=(Zi.right,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),function(t,r){return ii(ri(ni(t),t),r)}),Xi=function(t,r){if(t.length>8)return t.map(function(i,a){return a});var e=t.map(function(i){return r.map(function(a){return si(i,a)})});return ai(t,r,e)};g.interpolate=Di,g.separate=Ue,g.combine=oi,g.interpolateAll=li,g.splitPathString=Or,g.toPathString=Ne,g.fromCircle=Ze,g.toCircle=ci,g.fromRect=Ge,g.toRect=hi,Object.defineProperty(g,"__esModule",{value:!0})})});var Q=class{constructor(n){this.map=new Map(n)}getMap(){return this.map}get(n){return this.map.get(n)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(n,l){return this.map.set(n,l),this}add(n){let f=this.size;return this.set(f,n),this}get size(){return this.map.size}get length(){return this.map.size}last(n=1){let l=this.keys()[this.size-n];return this.get(l)}delete(n){return this.map.delete(n)}remove(n){return this.map.delete(n),this}clear(){return this.map.clear(),this}has(n){return this.map.has(n)}entries(){return this.map.entries()}forEach(n,l){return this.map.forEach(n,l),this}[Symbol.iterator](){return this.entries()}},$=(g,n,...l)=>{g.forEach(f=>{f[n](...l)})};var tr=({callback:g=()=>{},scope:n=null,name:l="event"})=>({callback:g,scope:n,name:l}),Nt=class extends Q{constructor(n="event"){super();this.name=n}},Ht=class extends Q{constructor(){super()}getEvent(n){let l=this.get(n);return l instanceof Nt?l:(this.set(n,new Nt(n)),this.get(n))}newListener(n,l,f){let y=this.getEvent(n);return y.add(tr({name:n,callback:l,scope:f})),y}on(n,l,f){if(typeof n=="undefined"||n==null)return this;typeof n=="string"&&(n=n.trim().split(/\s/g));let y,d,v=typeof n=="object"&&!Array.isArray(n),x=v?l:f;return v||(d=l),Object.keys(n).forEach(A=>{y=v?A:n[A],v&&(d=n[A]),this.newListener(y,d,x)},this),this}removeListener(n,l,f){let y=this.get(n);if(y instanceof Nt&&l){let d=tr({name:n,callback:l,scope:f});y.forEach((v,x)=>{if(v.callback===d.callback&&v.scope===d.scope)return y.remove(x)})}return y}off(n,l,f){if(typeof n=="undefined"||n==null)return this;typeof n=="string"&&(n=n.trim().split(/\s/g));let y,d,v=typeof n=="object"&&!Array.isArray(n),x=v?l:f;return v||(d=l),Object.keys(n).forEach(A=>{y=v?A:n[A],v&&(d=n[A]),typeof d=="function"?this.removeListener(y,d,x):this.remove(y)},this),this}once(n,l,f){if(typeof n=="undefined"||n==null)return this;typeof n=="string"&&(n=n.trim().split(/\s/g));let y=typeof n=="object"&&!Array.isArray(n);return Object.keys(n).forEach(d=>{let v=y?d:n[d],x=y?n[d]:l,A=y?l:f,E=(...w)=>{x.apply(A,w),this.removeListener(v,E,A)};this.newListener(v,E,A)},this),this}emit(n,...l){return typeof n=="undefined"||n==null?this:(typeof n=="string"&&(n=n.trim().split(/\s/g)),n.forEach(f=>{let y=this.get(f);y instanceof Nt&&y.forEach(d=>{let{callback:v,scope:x}=d;v.apply(x,l)})},this),this)}clear(){return $(this,"clear"),super.clear(),this}};var Wt=g=>typeof g=="string"?g.includes("%")?parseFloat(g)/100:g=="from"?0:g=="to"?1:parseFloat(g):g,er=g=>{let n=new Set,l=Object.keys(g),f=l.length;for(let y=0;y<f;y++){let d=""+l[y],v=g[d],x=d.split(","),A=x.length;for(let E=0;E<A;E++){let w=Wt(x[E]);n.add({...v,offset:w})}}return[...n].sort((y,d)=>y.offset-d.offset)};var ge=(g="")=>n=>typeof n=="string"?n:`${n}${g}`,Bt=ge(),me=ge("px"),ye=ge("deg"),de=g=>Array.isArray(g)||typeof g=="string"?(typeof g=="string"&&(g=g.split(",")),g):[g],ut=g=>Array.isArray(g)||typeof g=="string"?Boolean(g.length):g!=null&&g!=null,Qt=g=>n=>ut(n)?de(n).map(l=>{if(typeof l!="number"&&typeof l!="string")return l;let f=Number(l),y=Number.isNaN(f)?typeof l=="string"?l.trim():l:f;return g(y)}):[],nn=(...g)=>{let n=0;g=g.map(y=>{let d=de(y),v=d.length;return v>n&&(n=v),d});let l=[],f=g.length;for(let y=0;y<n;y++){l[y]=[];for(let d=0;d<f;d++){let v=g[d][y];ut(v)&&(l[y][d]=v)}}return l},At=(g,n)=>de(g).map(Qt(n)),rr=["translate","translate3d","translateX","translateY","translateZ","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],ir=g=>{let n="",l=rr.length;for(let f=0;f<l;f++){let y=rr[f],d=g[f];ut(d)&&(n+=`${y}(${Array.isArray(d)?d.join(", "):d}) `)}return n.trim()},pt=Qt(Bt),rt=Qt(me),J=Qt(ye),an=g=>g.includes("--")?g:`${g}`.replace(/-([a-z])/g,(l,f)=>f.toUpperCase()),nr=g=>{let n=Object.keys(g),l,f,y={};for(let d=0,v=n.length;d<v;d++)l=an(n[d]),f=g[n[d]],y[l]=f;return y},ve=g=>""+g,ar=["margin","padding","size","width","height","left","right","top","bottom","radius","gap","basis","inset","outline-offset","perspective","thickness","position","distance","spacing"].join("|"),sr=g=>{let{perspective:n,rotate:l,rotate3d:f,rotateX:y,rotateY:d,rotateZ:v,translate:x,translate3d:A,translateX:E,translateY:w,translateZ:S,scale:N,scale3d:I,scaleX:H,scaleY:C,scaleZ:L,skew:D,skewX:k,skewY:V,...q}=nr(g);x=At(x,me),A=At(A,me),E=rt(E),w=rt(w),S=rt(S),l=At(l,ye),f=At(f,Bt),y=J(y),d=J(d),v=J(v),N=At(N,Bt),I=At(I,Bt),H=pt(H),C=pt(C),L=pt(L),D=At(D,ye),k=J(k),V=J(V),n=rt(n);let K=nn(x,A,E,w,S,l,f,y,d,v,N,I,H,C,L,D,k,V,n).filter(ut).map(ir);return q=Dt(q,(O,j)=>{let Y;if(!/color/gi.test(j)){let lt=/rotate/gi.test(j),W=new RegExp(ar,"gi").test(j);if(lt||W)return lt?Y=J:W&&(Y=rt),Y(O).map(ot=>{let B=ot.trim().split(" ");return Y(B).join(" ")})}return[].concat(O).map(ve)}),Object.assign({},ut(K)?{transform:K}:null,q)},or=g=>g.map(n=>{let{translate:l,translate3d:f,translateX:y,translateY:d,translateZ:v,rotate:x,rotate3d:A,rotateX:E,rotateY:w,rotateZ:S,scale:N,scale3d:I,scaleX:H,scaleY:C,scaleZ:L,skew:D,skewX:k,skewY:V,perspective:q,easing:K,iterations:O,offset:j,...Y}=nr(n);return l=rt(l),f=rt(f),y=rt(y)[0],d=rt(d)[0],v=rt(v)[0],x=J(x),A=pt(A),E=J(E)[0],w=J(w)[0],S=J(S)[0],N=pt(N),I=pt(I),H=pt(H)[0],C=pt(C)[0],L=pt(L)[0],D=J(D),k=J(k)[0],V=J(V)[0],q=rt(q)[0],[Y,l,f,y,d,v,x,A,E,w,S,N,I,H,C,L,D,k,V,q]}).map(([n,...l])=>{let f=ir(l);return n=Dt(n,(y,d)=>{let v;if(!/color/gi.test(d)){let x=/rotate/gi.test(d),A=new RegExp(ar,"gi").test(d);if(x||A){x?v=J:A&&(v=rt);let E=ve(y).trim().split(" ");return v(E).join(" ")}}return ve(y)}),Object.assign({},ut(f)?{transform:f}:null,n)});var sn=g=>typeof g=="string"?Array.from(document.querySelectorAll(g)):[g],on=g=>[].concat(...g),be=g=>Array.isArray(g)?on(g.map(be)):typeof g=="string"||g instanceof Node?sn(g):g instanceof NodeList||g instanceof HTMLCollection?Array.from(g):[],ln=(g,n,l)=>typeof g=="function"?g.apply(l,n):g,Dt=(g,n)=>{let l=Object.keys(g),f,y,d={};for(let v=0,x=l.length;v<x;v++)f=l[v],y=g[f],d[f]=n(y,f,g);return d},lr=(g,n,l)=>Dt(g,f=>ln(f,n,l)),cr={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},cn=Object.keys(cr),hr=g=>{let n=g.replace(/^ease-/,"");return cn.includes(n)?cr[n]:g},hn={keyframes:[],offset:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",timelineOffset:0,autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,timeline:document.timeline,extend:{}},un=g=>{var y;let{options:n,...l}=g,f=n instanceof te?n.options:Array.isArray(n)?(y=n==null?void 0:n[0])==null?void 0:y.options:n;return Object.assign({},f,l)},Jt=(g,n)=>{let l={...n};for(;g.length;){let{[g.pop()]:f,...y}=l;l=y}return l},xe=class{constructor(n){this.options={};this.properties={};this.totalDuration=-Infinity;this.minDelay=Infinity;this.maxSpeed=Infinity;this.emitter=new Ht;this.targets=new Q;this.targetIndexes=new WeakMap;this.keyframeEffects=new WeakMap;this.computedOptions=new WeakMap;this.animations=new WeakMap;this.computedKeyframes=new WeakMap;this.loop=this.loop.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.on("error",console.error),this.updateOptions(n),this.mainAnimation&&(this.visibilityPlayState=this.getPlayState(),xe.pauseOnPageHidden&&document.addEventListener("visibilitychange",this.onVisibilityChange,!1)),this.newPromise()}onVisibilityChange(){document.hidden?(this.visibilityPlayState=this.getPlayState(),this.is("running")&&(this.loop(),this.pause())):this.visibilityPlayState=="running"&&this.is("paused")&&this.play()}newPromise(){return this.promise=new Promise((n,l)=>{var f,y,d,v;(y=(f=this==null?void 0:this.emitter)==null?void 0:f.once)==null||y.call(f,"finish",()=>n([this])),(v=(d=this==null?void 0:this.emitter)==null?void 0:d.once)==null||v.call(d,"error",x=>l(x))}),this.promise}then(n,l){var f,y;return n=n==null?void 0:n.bind(this),l=l==null?void 0:l.bind(this),(y=(f=this==null?void 0:this.promise)==null?void 0:f.then)==null||y.call(f,n,l),this}catch(n){var l,f;return n=n==null?void 0:n.bind(this),(f=(l=this.promise)==null?void 0:l.catch)==null||f.call(l,n),this}finally(n){var l,f;return n=n==null?void 0:n.bind(this),(f=(l=this.promise)==null?void 0:l.finally)==null||f.call(l,n),this}loop(){this.stopLoop(),this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("update",this.getProgress(),this)}stopLoop(){window.cancelAnimationFrame(this.animationFrame)}allAnimations(n){return this.targets.forEach(l=>{let f=this.keyframeEffects.get(l),y=this.animations.get(f);return n(y,l)}),this}all(n){return this.mainAnimation&&n(this.mainAnimation,this.mainElement),this.allAnimations(n),this}beginEvent(){this.getProgress()==0&&this.emit("begin",this)}play(){let n=this.getPlayState();return this.beginEvent(),this.all(l=>l.play()),this.emit("play",n,this),this.is(n)||this.emit("playstate-change",n,this),this.loop(),this}pause(){let n=this.getPlayState();return this.all(l=>l.pause()),this.emit("pause",n,this),this.is(n)||this.emit("playstate-change",n,this),this.stopLoop(),this}reverse(){return this.all(n=>n.reverse()),this}reset(){return this.setProgress(0),this.options.autoplay?this.play():this.pause(),this}cancel(){return this.all(n=>n.cancel()),this}finish(){return this.all(n=>n.finish()),this}stop(){this.cancel(),this.stopLoop(),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),this.targets.forEach(n=>this.removeTarget(n)),this.emit("stop"),this.emitter.clear(),this.mainkeyframeEffect=null,this.mainAnimation=null,this.mainElement=null,this.promise=null,this.computedOptions=null,this.animations=null,this.keyframeEffects=null,this.emitter=null,this.targets=null,this.options=null,this.properties=null}getAnimation(n){let l=this.keyframeEffects.get(n);return this.animations.get(l)}getTiming(n){var y,d,v,x;let l=(y=this.computedOptions.get(n))!=null?y:{},f=(x=(v=(d=this.keyframeEffects.get(n)).getTiming)==null?void 0:v.call(d))!=null?x:{};return{...l,...f}}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}is(n){return this.getPlayState()==n}setCurrentTime(n){return this.all(l=>l.currentTime=n),this.emit("update",this.getProgress()),this}setProgress(n){let l=n/100*this.totalDuration;return this.setCurrentTime(l),this}setSpeed(n=1){return this.maxSpeed=n,this.all(l=>{l.updatePlaybackRate?l.updatePlaybackRate(n):l.playbackRate=n}),this}createArrayOfComputedOptions(n,l){let f=[];return this.targets.forEach((y,d)=>{var k,V;let v=(k=this.computedOptions.get(y))!=null?k:{},x=q=>{var O,j;let K=q;return q=="loop"&&(K="iterations"),q=="fillMode"&&(K="fill"),(j=(O=n[q])!=null?O:v[K])!=null?j:this.options[q]},A=Object.assign({easing:x("easing"),iterations:x("loop"),direction:x("direction"),endDelay:x("endDelay"),duration:x("duration"),speed:x("speed"),delay:x("delay"),timelineOffset:x("timelineOffset"),keyframes:x("keyframes")},(V=x("extend"))!=null?V:{}),E=lr(A,[d,l,y],this);typeof E.easing=="string"&&(E.easing=hr(E.easing)),E.iterations===!0&&(E.iterations=Infinity),E.fill=x("fillMode");let{timelineOffset:w,speed:S,endDelay:N,delay:I,duration:H,iterations:C,...L}=E;C=Number(C),H=Number(H),N=Number(N),S=Number(S),I=Number(I)+Number(w);let D=I+H*C+N;this.totalDuration<D&&(this.totalDuration=D),f[d]={...L,speed:S,tempDurations:D,endDelay:N,delay:I,duration:H,iterations:C},this.minDelay>I&&(this.minDelay=I),this.maxSpeed>S&&(this.maxSpeed=S)}),f}createAnimations(n,l){let{arrOfComputedOptions:f,padEndDelay:y,oldCSSProperties:d,onfinish:v,oncancel:x,timeline:A}=n;this.targets.forEach((E,w)=>{var j,Y,lt;let{speed:S,keyframes:N,tempDurations:I,...H}=f[w];y&&H.endDelay==0&&Math.abs(H.iterations)!=Math.abs(Infinity)&&(H.endDelay=this.totalDuration-I);let C,L,D=N;typeof D=="object"&&(D=er(D));let k=(j=this.computedKeyframes.get(E))!=null?j:{},V=Object.assign({},d,k),q=Dt(V,(W,ot)=>{var B;return(B=this.properties[ot])!=null?B:W});if(L=ut(D)?D:q,Array.isArray(L))C=L.map(W=>{let{easing:ot,offset:B,...vt}=Jt(["speed","loop"],W);return Object.assign({},vt,typeof ot=="string"?{easing:hr(ot)}:null,typeof B=="string"||typeof B=="number"?{offset:Wt(B)}:null)}),C=or(C);else{let W=Jt(["keyframes"],L),{offset:ot,...B}=lr(W,[w,l,E],this);B=sr(B);let vt=ot;C=Object.assign({},B,ut(vt)?{offset:vt.map(Wt)}:null)}let K,O;this.keyframeEffects.has(E)?(O=this.keyframeEffects.get(E),K=this.animations.get(O),(Y=O==null?void 0:O.setKeyframes)==null||Y.call(O,C),(lt=O==null?void 0:O.updateTiming)==null||lt.call(O,H)):(O=new KeyframeEffect(E,C,H),K=new Animation(O,A),this.keyframeEffects.set(E,O),this.animations.set(O,K)),K.playbackRate=S,K.onfinish=()=>{typeof v=="function"&&v.call(this,E,w,l,K)},K.oncancel=()=>{typeof x=="function"&&x.call(this,E,w,l,K)},this.computedOptions.set(E,H),this.computedKeyframes.set(E,C)})}updateOptions(n={}){var l,f;try{let y=un(n);this.options=Object.assign({},hn,this.options,y);let d=["easing","loop","endDelay","duration","speed","delay","timelineOffset","direction","extend","fillMode","offset"],{padEndDelay:v,autoplay:x,target:A,targets:E,timeline:w,onfinish:S,oncancel:N,...I}=Jt(d,this.options);this.properties=Jt([...d,"keyframes","padEndDelay","onfinish","oncancel","autoplay","target","targets","timeline"],y);let H=this.targets.values(),C=[...new Set([...H,...be(E),...be(A)])];this.targets.clear(),C.forEach((k,V)=>{this.targets.set(V,k),this.targetIndexes.set(k,V)});let L=this.targets.size,D=this.createArrayOfComputedOptions(y,L);if(this.createAnimations({arrOfComputedOptions:D,padEndDelay:v,oldCSSProperties:I,onfinish:S,oncancel:N,timeline:w},L),L<=0&&(this.maxSpeed==Infinity&&(this.maxSpeed=Number(this.options.speed)),this.minDelay==Infinity&&(this.minDelay=Number(this.options.delay)+Number(this.options.timelineOffset)),this.totalDuration==-Infinity&&(this.totalDuration=Number(this.options.duration))),this.mainAnimation?((f=(l=this.mainkeyframeEffect)==null?void 0:l.updateTiming)==null||f.call(l,{duration:this.totalDuration}),(!this.mainkeyframeEffect.setKeyframes||!this.mainkeyframeEffect.updateTiming)&&console.warn("@okikio/animate - `KeyframeEffect.setKeyframes` and/or `KeyframeEffect.updateTiming` are not supported in this browser.")):(this.mainkeyframeEffect=new KeyframeEffect(this.mainElement,null,{duration:this.totalDuration}),this.mainAnimation=new Animation(this.mainkeyframeEffect,w)),this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=()=>{if(this.mainAnimation){let k=this.getPlayState();this.is(k)||this.emit("playstate-change",k,this),this.loop(),this.stopLoop()}this.emit("finish",this)},this.mainAnimation.oncancel=()=>{if(this.mainAnimation){let k=this.getPlayState();this.is(k)||this.emit("playstate-change",k,this),this.loop(),this.stopLoop()}this.emit("cancel",this)},x){let k=window.setTimeout(()=>{this.emit("begin",this),k=window.clearTimeout(k)},0);this.play()}else this.pause()}catch(y){this.emit("error",y)}}add(n){let l=this.getProgress(),f=this.is("running"),y=this.is("paused");this.updateOptions({target:n}),this.setProgress(l),f?this.play():y&&this.pause()}removeTarget(n){let l=this.keyframeEffects.get(n);this.animations.delete(l),l=null,this.computedKeyframes.delete(n),this.computedOptions.delete(n),this.keyframeEffects.delete(n);let f=this.targetIndexes.get(n);this.targets.delete(f),this.targetIndexes.delete(n)}remove(n){this.removeTarget(n);let l=new Set([].concat(this.targets.values()));this.options.target=[...l],this.options.targets=[],l.clear(),l=null;let f=this.getProgress(),y=this.is("running"),d=this.is("paused");this.updateOptions(),y?this.play():d&&this.pause(),this.setProgress(f)}on(n,l,f){var y;return(y=this==null?void 0:this.emitter)==null||y.on(n,l,f!=null?f:this),this}off(n,l,f){var y;return(y=this==null?void 0:this.emitter)==null||y.off(n,l,f!=null?f:this),this}emit(n,...l){var f;return(f=this==null?void 0:this.emitter)==null||f.emit(n,...l),this}toJSON(){return this.options}get[Symbol.toStringTag](){return"Animate"}},te=xe;te.pauseOnPageHidden=!0;var z=(g={})=>new te(g);var pn={wrapperAttr:"wrapper",headers:[],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",timeout:2e3,maxPages:5,resizeDelay:100,onTransitionPreventClick:!0,cacheIgnore:!1,prefetchIgnore:!1,preventURLs:[],stickyScroll:!1,forceOnError:!0,ignoreHashAction:!1,transitions:[]},ur=g=>Object.assign({...pn},g),yt=(g,n,l=!0)=>{let{prefix:f}=g,y=g[n],d=`data${f?"-"+f:""}-${y}`;return l?`[${d}]`:d};var qt=class{constructor(){}install(){}register(n,l){return this.manager=n,this.app=n.app,this.config=n.config,this.emitter=n.emitter,this.key=l,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=null,this.manager=null,this.app=null,this.config=null,this.emitter=null}},Kt=class extends Q{constructor(n){super();this.app=n,this.config=n.config,this.emitter=n.emitter}set(n,l){return super.set(n,l),l.register(this,n),this}};var F=(g=window.location.href)=>g instanceof URL?g:new URL(g,window.location.origin),ft=g=>{let n=F(g);return`${n.pathname}${n.hash}`};var pr=g=>F(g).toString().replace(/(\/#.*|\/|#.*)$/,""),ee=(g,n)=>pr(g)===pr(n);var et=class extends qt{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}},Ee=class extends Kt{constructor(n){super(n)}init(){return $(this,"init"),this}boot(){return $(this,"boot"),this}stop(){return $(this,"stop"),this}};var dt=(g=window.scrollX,n=window.scrollY)=>({x:g,y:n}),re=(g={url:ft(F()),index:0,transition:"default",data:{scroll:dt(),trigger:"HistoryManager"}})=>g,Te=class extends et{constructor(){super(...arguments);this.pointer=-1}init(){this.states=[];let n=re();this.add(n,"replace")}get(n){return this.states[n]}add(n,l="push"){let f=re(n),y=this.length;this.states.push({...f}),this.pointer=y;let d={index:this.pointer,states:[...this.states]};return fn(l,f,d),this}remove(n){return n?this.states.splice(n,1):this.states.pop(),this.pointer--,this}replace(n){return this.states=n,this}set(n,l){return this.states[n]=l}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},fn=(g,n,l)=>{let f=ft(n.url),y=[l,"",f];if(window.history)switch(g){case"push":window.history.pushState.apply(window.history,y);break;case"replace":window.history.replaceState.apply(window.history,y);break}};function gn(g){for(var n=[],l=0;l<g.length;){var f=g[l];if(f==="*"||f==="+"||f==="?"){n.push({type:"MODIFIER",index:l,value:g[l++]});continue}if(f==="\\"){n.push({type:"ESCAPED_CHAR",index:l++,value:g[l++]});continue}if(f==="{"){n.push({type:"OPEN",index:l,value:g[l++]});continue}if(f==="}"){n.push({type:"CLOSE",index:l,value:g[l++]});continue}if(f===":"){for(var y="",d=l+1;d<g.length;){var v=g.charCodeAt(d);if(v>=48&&v<=57||v>=65&&v<=90||v>=97&&v<=122||v===95){y+=g[d++];continue}break}if(!y)throw new TypeError("Missing parameter name at "+l);n.push({type:"NAME",index:l,value:y}),l=d;continue}if(f==="("){var x=1,A="",d=l+1;if(g[d]==="?")throw new TypeError('Pattern cannot start with "?" at '+d);for(;d<g.length;){if(g[d]==="\\"){A+=g[d++]+g[d++];continue}if(g[d]===")"){if(x--,x===0){d++;break}}else if(g[d]==="("&&(x++,g[d+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+d);A+=g[d++]}if(x)throw new TypeError("Unbalanced pattern at "+l);if(!A)throw new TypeError("Missing pattern at "+l);n.push({type:"PATTERN",index:l,value:A}),l=d;continue}n.push({type:"CHAR",index:l,value:g[l++]})}return n.push({type:"END",index:l,value:""}),n}function mn(g,n){n===void 0&&(n={});for(var l=gn(g),f=n.prefixes,y=f===void 0?"./":f,d="[^"+Lt(n.delimiter||"/#?")+"]+?",v=[],x=0,A=0,E="",w=function(O){if(A<l.length&&l[A].type===O)return l[A++].value},S=function(O){var j=w(O);if(j!==void 0)return j;var Y=l[A],lt=Y.type,W=Y.index;throw new TypeError("Unexpected "+lt+" at "+W+", expected "+O)},N=function(){for(var O="",j;j=w("CHAR")||w("ESCAPED_CHAR");)O+=j;return O};A<l.length;){var I=w("CHAR"),H=w("NAME"),C=w("PATTERN");if(H||C){var L=I||"";y.indexOf(L)===-1&&(E+=L,L=""),E&&(v.push(E),E=""),v.push({name:H||x++,prefix:L,suffix:"",pattern:C||d,modifier:w("MODIFIER")||""});continue}var D=I||w("ESCAPED_CHAR");if(D){E+=D;continue}E&&(v.push(E),E="");var k=w("OPEN");if(k){var L=N(),V=w("NAME")||"",q=w("PATTERN")||"",K=N();S("CLOSE"),v.push({name:V||(q?x++:""),pattern:V&&!q?d:q,prefix:L,suffix:K,modifier:w("MODIFIER")||""});continue}S("END")}return v}function Lt(g){return g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function fr(g){return g&&g.sensitive?"":"i"}function yn(g,n){if(!n)return g;for(var l=/\((?:\?<(.*?)>)?(?!\?)/g,f=0,y=l.exec(g.source);y;)n.push({name:y[1]||f++,prefix:"",suffix:"",modifier:"",pattern:""}),y=l.exec(g.source);return g}function dn(g,n,l){var f=g.map(function(y){return Vt(y,n,l).source});return new RegExp("(?:"+f.join("|")+")",fr(l))}function vn(g,n,l){return bn(mn(g,l),n,l)}function bn(g,n,l){l===void 0&&(l={});for(var f=l.strict,y=f===void 0?!1:f,d=l.start,v=d===void 0?!0:d,x=l.end,A=x===void 0?!0:x,E=l.encode,w=E===void 0?function(O){return O}:E,S="["+Lt(l.endsWith||"")+"]|$",N="["+Lt(l.delimiter||"/#?")+"]",I=v?"^":"",H=0,C=g;H<C.length;H++){var L=C[H];if(typeof L=="string")I+=Lt(w(L));else{var D=Lt(w(L.prefix)),k=Lt(w(L.suffix));if(L.pattern)if(n&&n.push(L),D||k)if(L.modifier==="+"||L.modifier==="*"){var V=L.modifier==="*"?"?":"";I+="(?:"+D+"((?:"+L.pattern+")(?:"+k+D+"(?:"+L.pattern+"))*)"+k+")"+V}else I+="(?:"+D+"("+L.pattern+")"+k+")"+L.modifier;else I+="("+L.pattern+")"+L.modifier;else I+="(?:"+D+k+")"+L.modifier}}if(A)y||(I+=N+"?"),I+=l.endsWith?"(?="+S+")":"$";else{var q=g[g.length-1],K=typeof q=="string"?N.indexOf(q[q.length-1])>-1:q===void 0;y||(I+="(?:"+N+"(?="+S+"))?"),K||(I+="(?="+N+"|"+S+")")}return new RegExp(I,fr(l))}function Vt(g,n,l){return g instanceof RegExp?yn(g,n):Array.isArray(g)?dn(g,n,l):vn(g,n,l)}var xn=new DOMParser,Ae=class extends qt{constructor(n=F(),l=document){super();this.url=F(n),typeof l=="string"?this.data=l:this.dom=l||document}async build(){if(this.dom instanceof Node||(this.dom=xn.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:n,head:l,body:f}=this.dom;this.title=n,this.head=l,this.body=f,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=yt(this.config,"wrapperAttr")}uninstall(){this.url=null,this.title=null,this.head=null,this.body=null,this.dom=null,this.wrapper=null,this.data=null,this.wrapperAttr=null}},we=class extends et{constructor(){super();this.loading=new Q}install(){this.pages=new Kt(this.app),this.cacheIgnore=this.config.cacheIgnore;let n=F().pathname;this.set(n,new Ae),n=null}get(n){return this.pages.get(n)}add(n){return this.pages.add(n),this}set(n,l){return this.pages.set(n,l),this}remove(n){return this.pages.remove(n),this}has(n){return this.pages.has(n)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(n=F()){let l=F(n),f=l.pathname,y,d;if(this.has(f)&&!zt(f,this.cacheIgnore))return y=this.get(f),Promise.resolve(y);this.loading.has(f)?d=this.loading.get(f):(d=this.request(f),this.loading.set(f,d));let v=await d;if(this.loading.remove(f),y=new Ae(l,v),this.set(f,y),this.size>this.config.maxPages){let x=F(),A=this.keys(),E=ee(x,A[0])?A[1]:A[0],w=this.get(E);w.unregister(),w=null,A=null,x=null,E=null}return y}async request(n){let l=new Headers(this.config.headers),f=window.setTimeout(()=>{window.clearTimeout(f);let y=new Error("Request Timed Out!");throw this.emitter.emit("TIMEOUT_ERROR",y,n),y},this.config.timeout);try{let y=await fetch(n,{mode:"same-origin",method:"GET",headers:l,cache:"default",credentials:"same-origin"});if(window.clearTimeout(f),y.status>=200&&y.status<300)return await y.text();let d=new Error(y.statusText||""+y.status);throw this.emitter.emit("REQUEST_ERROR",d,n),d}catch(y){throw window.clearTimeout(f),y}}},zt=(g,n)=>{if(typeof n=="boolean")return n;let l=[];return!n.every(f=>Vt(f,l,{start:!1,end:!1}).exec(g)==null)};var gr=(g,n=window.location.hash)=>{try{let l=n[0]=="#"?n:F(n).hash;if(l.length>1){let f=document.getElementById(l.slice(1));if(f){let{left:y,top:d}=f.getBoundingClientRect(),v=window.scrollX,x=window.scrollY,A=y+v,E=d+x;return dt(A,E)}}}catch(l){console.warn("[hashAction] error",l)}return g!=null?g:dt(0,0)},mr={name:"replace"},Se=class extends et{constructor(n){super();this._arg=n}install(){super.install();let n=this._arg&&this._arg.length?this._arg:this.config.transitions;this.transitions=new Q([["default",mr],["replace",mr]].concat(n))}get(n){return this.transitions.get(n)}set(n,l){return this.transitions.set(n,l),this}add(n){return this.transitions.add(n),this}has(n){return this.transitions.has(n)}async start(n,l){let f=this.transitions.get(n),{oldPage:y,newPage:d,ignoreHashAction:v,trigger:x}=l;if(this.emitter.emit("TRANSITION_START",{transitionName:n,...l}),!("wrapper"in y)||!("wrapper"in d))throw`[TransitionManager] either oldPage or newPage aren't instances of the Page Class.
 ${{newPage:d,oldPage:y}}`;document.title=""+d.title;let A=y.wrapper,E=d.wrapper;if(!(A instanceof Node)||!(E instanceof Node))throw`[TransitionManager] the wrapper from the ${E instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${yt(this.config,"wrapperAttr")}.`;return f.init&&(f==null||f.init(l)),this.emitter.emit("BEFORE_TRANSITION_OUT",l),f.out&&await new Promise(w=>{let S=f.out.call(f,{...l,from:y,done:w});S==null||S.then(w)}),this.emitter.emit("AFTER_TRANSITION_OUT",l),await new Promise(w=>{A.insertAdjacentElement("beforebegin",E),this.emitter.emit("CONTENT_INSERT",l),w()}),await new Promise(w=>{A.remove(),A=null,E=null,this.emitter.emit("CONTENT_REPLACED",l),!v&&!/back|popstate|forward/.test(x)&&(l.scroll=gr(l.scroll)),w()}),this.emitter.emit("BEFORE_TRANSITION_IN",l),f.in&&await new Promise(w=>{let S=f.in.call(f,{...l,from:y,to:d,done:w});S==null||S.then(w)}),this.emitter.emit("AFTER_TRANSITION_IN",l),f.manualScroll||(!v&&!/back|popstate|forward/.test(x)&&(l.scroll=gr(l.scroll)),window.scroll(l.scroll.x,l.scroll.y)),this.emitter.emit("TRANSITION_END",{transitionName:n,...l}),l}};var Le=class{constructor(n={}){this.canResize=!0;this.canScroll=!0;this._resize=this._resize.bind(this),this._scroll=this._scroll.bind(this),this._ready=this._ready.bind(this),this.register(n)}register(n={}){return this.config=ur(n),this.emitter=new Ht,this.services=new Ee(this),this}_ready(){document.removeEventListener("DOMContentLoaded",this._ready),window.removeEventListener("load",this._ready),this.emitter.emit("READY ready")}_resize(){if(this.canResize){let n,l;this.canResize=!1,l=window.requestAnimationFrame(()=>{this.emitter.emit("RESIZE resize"),n=window.setTimeout(()=>{this.canResize=!0,n=window.clearTimeout(n),l=window.cancelAnimationFrame(l)},this.config.resizeDelay)})}}_scroll(){if(this.canScroll){let n;this.canScroll=!1,n=requestAnimationFrame(()=>{this.emitter.emit("SCROLL scroll"),this.canScroll=!0,n=window.cancelAnimationFrame(n)})}}get(n){return this.services.get(n)}set(n,l){return this.services.set(n,l),this}add(n){return this.services.add(n),this}boot(){return document.addEventListener("DOMContentLoaded",this._ready),window.addEventListener("load",this._ready),window.addEventListener("resize",this._resize,{passive:!0}),window.addEventListener("scroll",this._scroll,{passive:!0}),this.services.init(),this.services.boot(),this}stop(){return window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._scroll),this.services.stop(),this.emitter.clear(),this}on(n,l){return this.emitter.on(n,l,this),this}off(n,l){return this.emitter.off(n,l,this),this}emit(n,...l){return this.emitter.emit(n,...l),this}};var Me=class extends et{install(){super.install(),this.preventURLs=this.config.preventURLs,this.prefetchIgnore=this.config.prefetchIgnore,this.onTransitionPreventClick=this.config.onTransitionPreventClick,this.stickyScroll=this.config.stickyScroll,this.forceOnError=this.config.forceOnError,this.ignoreHashAction=this.config.ignoreHashAction}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){super.boot()}getTransitionName(n){if(!n||!n.getAttribute)return null;let l=n.getAttribute(yt(this.config,"transitionAttr",!1));return typeof l=="string"?l:null}validLink(n,l,f){let y=!window.history.pushState,d=!n||!f,v=l.metaKey||l.ctrlKey||l.shiftKey||l.altKey,x=n.hasAttribute("target")&&n.target==="_blank",A=n.protocol!==location.protocol||n.hostname!==location.hostname,E=typeof n.getAttribute("download")=="string",w=n.matches(yt(this.config,"preventSelfAttr")),S=Boolean(n.closest(yt(this.config,"preventAllAttr"))),N=zt(F(f).pathname,this.preventURLs),I=ft(F())===ft(F(f));return!(d||y||v||x||A||E||w||S||N||I)}getHref(n){return n&&n.tagName&&n.tagName.toLowerCase()==="a"&&typeof n.href=="string"?n.href:null}getLink(n){let l=n.target,f=this.getHref(l);for(;l&&!f;)l=l.parentNode,f=this.getHref(l);if(!(!l||!this.validLink(l,n,f)))return l}onClick(n){let l=this.getLink(n);if(!l)return;if(this.isTransitioning&&this.onTransitionPreventClick){n.preventDefault(),n.stopPropagation();return}let f=this.getHref(l);this.emitter.emit("ANCHOR_CLICK CLICK",n),this.go({href:f,trigger:l,event:n})}getDirection(n){return Math.abs(n)>1?n>0?"forward":"back":n===0?"popstate":n>0?"back":"forward"}force(n){window.location.assign(n)}go({href:n,trigger:l="HistoryManager",event:f}){if(this.isTransitioning&&!this.onTransitionPreventClick||!(this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager"))){this.force(n);return}let y=this.manager.get("HistoryManager"),d=dt(0,0),v=y.current,x=v.url;if(ee(x,n))return;let A;if(f&&f.state){this.emitter.emit("POPSTATE",f);let{state:E}=f,{index:w}=E,N=v.index-w;y.replace(E.states),y.pointer=w;let I=y.get(w);A=I.transition,d=I.data.scroll,l=this.getDirection(N),this.emitter.emit(l==="back"?"POPSTATE_BACK":"POPSTATE_FORWARD",f)}else{A=this.getTransitionName(l),d=dt();let E=re({url:n,transition:A,data:{scroll:d}});!this.stickyScroll&&(d=dt(0,0)),y.add(E),this.emitter.emit("HISTORY_NEW_ITEM",f)}return f&&(f.stopPropagation(),f.preventDefault()),this.emitter.emit("GO",f),this.load({oldHref:x,href:n,trigger:l,transitionName:A,scroll:d})}async load({oldHref:n,href:l,trigger:f,transitionName:y="default",scroll:d={x:0,y:0}}){try{let v=this.manager.get("TransitionManager"),x=this.manager.get("PageManager"),A=this.ignoreHashAction,E,w;this.emitter.emit("NAVIGATION_START",{oldHref:n,href:l,trigger:f,transitionName:y,scroll:d}),v.has(y)||(console.log(`[PJAX] transition name "${y}" doesn't exist, switching to the "default" transition`),y="default");try{this.transitionStart(),this.emitter.emit("PAGE_LOADING",{href:l,oldHref:n,trigger:f,scroll:d}),w=await x.load(n),E=await x.load(l),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:E,oldPage:w,trigger:f,scroll:d}),w.dom instanceof Element||w.build(),E.build()}catch(S){console.warn("[PJAX] Page load error",S)}try{d=(await v.start(y,{oldPage:w,newPage:E,trigger:f,scroll:d,ignoreHashAction:A})).scroll}catch(S){console.warn("[PJAX] Transition error",S)}this.emitter.emit("NAVIGATION_END",{oldPage:w,newPage:E,trigger:f,transitionName:y,scroll:d})}catch(v){this.forceOnError?this.force(l):console.warn(v)}finally{this.transitionStop()}}onHover(n){let l=this.getLink(n);if(!l||!this.manager.has("PageManager"))return;let f=this.manager.get("PageManager"),y=F(this.getHref(l)),d=y.pathname;if(this.emitter.emit("ANCHOR_HOVER HOVER",n),!zt(y.pathname,this.prefetchIgnore)&&!(f.has(d)&&!zt(d,f.cacheIgnore)))try{f.load(y),this.emitter.emit("PREFETCH",n)}catch(v){console.warn("[PJAX] Prefetch error",v)}}onStateChange(n){this.go({href:window.location.href,trigger:"popstate",event:n})}initEvents(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}};var Ie=class extends et{constructor(n=[]){super();this.routes=new Q;for(let l of n)this.add(l)}add({path:n,method:l}){let f=this.parse(n);return this.routes.set(f,l),this}parsePath(n){if(typeof n=="string"||n instanceof RegExp||Array.isArray(n))return Vt(n,[],{start:!1,end:!1});if(typeof n=="boolean")return n&&/.*/;throw"[Router] only regular expressions, strings, booleans and arrays of regular expressions and strings are accepted as paths."}isPath(n){return typeof n=="string"||n instanceof RegExp||typeof n=="boolean"||Array.isArray(n)}parse(n){let l=n,f={from:/.*/,to:/.*/};if(this.isPath(n))f={from:!0,to:n};else if(this.isPath(l.from)&&this.isPath(l.to))f=Object.assign({},f,l);else throw"[Router] path is neither a string, regular expression, or a { from, to } object.";let{from:y,to:d}=f;return{from:this.parsePath(y),to:this.parsePath(d)}}route(){if(this.manager.has("HistoryManager")){let n=this.manager.get("HistoryManager"),l=ft(F((n.length>1?n.previous:n.current).url)),f=ft(F());this.routes.forEach((y,d)=>{let v=d.from,x=d.to;if(typeof v=="boolean"&&typeof x=="boolean")throw`[Router] path ({ from: ${v}, to: ${x} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let A=v,E=x;v instanceof RegExp&&v.test(l)&&(A=v.exec(l)),x instanceof RegExp&&x.test(f)&&(E=x.exec(f)),(Array.isArray(E)&&Array.isArray(A)||Array.isArray(E)&&A==!1&&!x.test(l)||Array.isArray(A)&&E==!1&&!v.test(f))&&y({from:A,to:E,path:{from:l,to:f}})})}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}};var yr={name:"default",duration:500,manualScroll:!0,out({from:g}){let{duration:n}=this,l=g.wrapper;return z({target:l,opacity:[1,0],duration:n}).on("finish",function(){this.stop()})},in({to:g,scroll:n}){let{duration:l}=this,f=g.wrapper;return window.scroll(n.x,n.y),z({target:f,opacity:[0,1],duration:l}).then(function(){this.stop()})}};var dr={name:"big",delay:200,durationPerAnimation:700,manualScroll:!0,init(){this.mainElement=document.getElementById("big-transition"),this.logoElement=this.mainElement.querySelector("#logo"),this.horizontalElements=Array.from(this.mainElement.querySelectorAll("#big-transition-horizontal div")),this.maxLength=this.horizontalElements.length},out({from:g,done:n}){let{durationPerAnimation:l,delay:f}=this,y=g.wrapper;(async()=>{let d=Object.assign({},y.style);this.mainElement.style.opacity="1",this.mainElement.style.visibility="visible",z({target:y,opacity:[1,0],duration:l,onfinish(S){S.style.opacity="0"}}).then(function(){this.stop()});let[x]=await z({target:this.horizontalElements,scaleX:[0,1],delay(S){return f*(S+1)},onfinish(S){S.style.transform="scaleX(1)"},easing:"out-cubic",duration:500});y.style.opacity="1",Object.assign(y.style,d),this.logoElement.style.visibility="visible";let A=500,[E]=await z({target:this.logoElement,opacity:[0,1],duration:A,onfinish(S){S.style.opacity="1"}});E.on("stop",()=>{console.log("`anim3` of the BigTransition has stopped")});let[w]=await z({options:E,opacity:[1,0],onfinish(S){S.style.opacity="0"},delay:1500});this.logoElement.style.visibility="hidden",x.stop(),E.stop(),w.stop(),n()})()},in({to:g,scroll:n}){let{durationPerAnimation:l,delay:f}=this,y=g.wrapper;return window.scroll(n.x,n.y),new Promise(async d=>{let v=z({target:y,opacity:[0,1],duration:l}).then(()=>{v.stop()}),[x]=await z({target:this.horizontalElements,scaleX:[1,0],delay(A){return f*(A+1)},onfinish(A){A.style.transform="scaleX(0)"},easing:"out-cubic",duration:500});this.mainElement.style.opacity="0",this.mainElement.style.visibility="hidden",x.stop(),d()})}};var ie={name:"slide",duration:500,direction:"right",init(g){document.documentElement.classList.add("no-overflow-x");let n=g.trigger;n instanceof Node&&n.hasAttribute("data-direction")?this.direction=n.getAttribute("data-direction"):this.direction="right"},out({from:g}){let{duration:n,direction:l}=this,f=g.wrapper;return z({target:f,translateX:[0,`${(l==="left"?-1:1)*25}%`],opacity:[1,0],duration:n,easing:"in-quint"}).then(function(){this.stop()})},async in({to:g}){let{duration:n}=this,l=g.wrapper,f=z({target:l,translateX:[`${(this.direction==="right"?-1:1)*25}%`,0],opacity:[0,1],duration:n,easing:"out-quint"});await f,document.documentElement.classList.remove("no-overflow-x"),f.stop()}},vr={...ie,name:"slide-left",direction:"left"},br={...ie,name:"slide-right",direction:"right"};var Pe=class extends et{init(){this.navbar=document.querySelector(".navbar"),this.collapseSection=this.navbar.querySelector(".navbar-collapse.mobile"),this.navbarList=this.navbar.querySelector(".navbar-list"),this.elements=Array.from(this.navbar.querySelectorAll(".navbar-list a")),this.menu=this.navbar.querySelector(".navbar-toggle"),this.toggleStatus=!1,this.fixTabindex(),this.toggleClick=this.toggleClick.bind(this)}activateLink(){let{href:n}=window.location;for(let l of this.elements){let f=l.getAttribute("data-path")||l.href;if(!f||f.length<1)return;let y=new RegExp(f).test(n),d=l.classList.contains("active");y&&d||l.classList.toggle("active",y)}this.toggleStatus&&this.toggleClick()}fixTabindex(){for(let n of this.elements)n.setAttribute("tabindex",`${this.toggleStatus?0:-1}`)}toggleClick(){var n,l;(l=(n=this.collapseSection.style)==null?void 0:n.setProperty)==null||l.call(n,"--height",`${this.navbarList.clientHeight}px`),this.toggleStatus=!this.toggleStatus,this.collapseSection.classList.toggle("collapse",!this.toggleStatus),this.collapseSection.classList.toggle("show",this.toggleStatus),this.fixTabindex()}scroll(){this.navbar.classList.toggle("active-shadow",window.scrollY>=5)}initEvents(){this.menu.addEventListener("click",this.toggleClick),this.emitter.on("scroll",this.scroll,this),this.emitter.on("READY",this.activateLink,this),this.emitter.on("GO",this.activateLink,this)}stopEvents(){this.navbar.removeEventListener("click",this.toggleClick),this.emitter.off("scroll",this.scroll,this),this.emitter.off("READY",this.activateLink,this),this.emitter.off("GO",this.activateLink,this)}uninstall(){for(;this.elements.length;)this.elements.pop();this.elements=null,this.menu=null,this.navbar=null}};var Tr=rn(Er()),Ce=(g,n)=>{let l=document.querySelector(`${g} #playstate-toggle`),f=document.querySelector(`${g} #progress`),y=document.querySelector(`${g} #progress-output`),d,v=()=>{d=n[0].getPlayState(),d=="idle"?d="paused":d=="pending"&&(d="running"),l.setAttribute("data-playstate",d)};n[0].on("finish begin",v).on("update",w=>{w=w.toFixed(4),f.value=""+w,y.textContent=`${Math.round(w)}%`});let x=()=>{n[0].is("running")?$(n,"pause"):n[0].is("finished")?$(n,"reset"):$(n,"play"),v()},A=()=>{let w=Number(f.value);$(n,"setProgress",w),$(n,"pause")},E=()=>{d!=="paused"?$(n,"play"):$(n,"pause"),v()};l.addEventListener("click",x),f.addEventListener("input",A),f.addEventListener("change",E),n[0].on("stop",()=>{l.removeEventListener("click",x),f.removeEventListener("input",A),f.removeEventListener("change",E),n=null})},st=(g,n)=>Math.floor(Math.random()*(n-g+1))+g,Ft,Ut,gt,wt,jt,Zt,Ar=()=>{(()=>{let g=".morph-demo",n=document.querySelector(`${g} #using-d`),l=document.querySelector(`${g} #using-flubber`);if(n){let f=getComputedStyle(n);Ft=z({target:n,duration:1800,easing:"ease",loop:4,direction:"alternate",d:[f.getPropertyValue("d"),'path("M2,5 S2,14 4,5 S7,8 8,4")'],stroke:[f.getPropertyValue("stroke"),"rgb(96, 165, 250)"]})}if(n&&l){let f=getComputedStyle(l),y=l.getAttribute("d"),d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z",v=document.querySelector(".empty"),x={duration:1800,easing:"ease",loop:4,fillMode:"both",direction:"alternate"};gt=z({target:v,options:x,opacity:[0,1]}),Ut=z({target:l,options:x,fill:[f.getPropertyValue("stroke"),"rgb(96, 165, 250)"],"--stroke":[f.getPropertyValue("stroke"),"rgb(96, 165, 250)"]});let A=(0,Tr.interpolate)(y,d,{maxSegmentLength:.1});try{let E=getComputedStyle(v);gt.on("update",()=>{let w=Number(E.getPropertyValue("opacity")),S=A(w);l.setAttribute("d",""+S)})}catch(E){gt==null||gt.stopLoop(),console.log(E)}Ce(g,[gt,Ft,Ut])}})(),(()=>{let g=".playback-demo",n=document.querySelectorAll(`${g} .el`);if(n.length){wt=z({target:n,"background-color":(...v)=>{let[,,x]=v,[A,E,w]=[st(0,255),st(0,255),st(0,255)];return[getComputedStyle(x).getPropertyValue("background-color"),`rgb(${A}, ${E}, ${w})`]},"translate-x":()=>[0,st(50,400)],translateY(...v){let[,x]=v;return[0,st(-50,50)*x]},scale(){return[1,1+st(.025,1.75)]},opacity(...v){let[,x]=v;return[.5,.5+Math.min(st(.025,x)/x,.5)]},rotate:()=>[0,st(-360,360)],borderRadius:()=>["3px",`${st(10,35)}%`],duration:()=>st(1200,1800),delay:()=>st(0,400),loop:2,speed:v=>1.5-v*.125,fillMode:"both",direction:"alternate",easing:"in-out-back",padEndDelay:!0,autoplay:!0});let l=document.querySelector("#add-el"),f=document.querySelector("#remove-el"),y=document.querySelector(".el-placement"),d=document.createElement("div");d.className="contain",d.innerHTML=`
            <div class="el"></div>
            <div class="el-initial"></div>`.trim(),l.onclick=()=>{let v=d.cloneNode(!0),x=v.querySelector(".el");y.appendChild(v),wt.add(x);let A=z({target:v,opacity:[0,1],height:[0,"4vmin"],marginBottom:[0,5],fillMode:"forwards",duration:400,easing:"out"}).then(()=>{A.stop(),A=null,v=null,x=null})},f.onclick=()=>{let v=y.querySelector(".contain"),x=v==null?void 0:v.querySelector(".el");wt.remove(x);let A=getComputedStyle(v),E=A.getPropertyValue("margin-bottom"),w=A.getPropertyValue("height"),S=z({target:v,opacity:[1,0],height:[w,0],"margin-bottom":[E,0],fillMode:"forwards",duration:400,easing:"out"}).then(()=>{v==null||v.remove(),S.stop(),S=null,v=null,x=null})},Ce(g,[wt])}})(),(()=>{let g={padEndDelay:!0,easing:"linear",duration:2e3,loop:4,speed:1},n=".motion-path-demo",l=document.querySelector(".motion-path .el-1");l&&(jt=z({target:l,offsetDistance:["0%","100%"],...g}));let f=document.querySelector(".motion-path path"),y=document.querySelector(".motion-path .el-2");if(f&&y){let v=new Set,x=[],A=f.getTotalLength(),E=f.getPointAtLength(0);for(var d=0;d<A;d++){let{x:w,y:S}=f.getPointAtLength(d);v.add([w,S]);let{x:N,y:I}=d-1>=1?f.getPointAtLength(d-1):E,{x:H,y:C}=d+1>=1?f.getPointAtLength(d+1):E,L=+(Math.atan2(I-C,N-H)*180/Math.PI);x.push(L)}Zt=z({target:y,translate:[...v],rotate:x,fillMode:"both",...g}),Ce(n,[jt,Zt])}})()},wr=()=>{Ft==null||Ft.stop(),Ut==null||Ut.stop(),gt==null||gt.stop(),wt==null||wt.stop(),jt==null||jt.stop(),Zt==null||Zt.stop()};var Sr=new Ie,En=new Me,Tn=new Pe,Lr=new Le({transitions:[["default",yr],["BigTransition",dr],["Slide",ie],["SlideLeft",vr],["SlideRight",br]]});Lr.set("HistoryManager",new Te).set("PageManager",new we).set("TransitionManager",new Se).add(Tn).add(Sr).add(En);Sr.add({path:{from:"/animate(.html)?",to:!1},method:wr}).add({path:/\/animate(.html)?/,method:Ar});try{Lr.boot()}catch(g){console.warn("[App] boot failed,",g)}
//# sourceMappingURL=main.min.js.map
