var t,e=this&&this.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),n=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};!function(){var t=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=function(e,n,i){return n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i},c=function(t,e){for(var n in e||(e={}))a.call(e,n)&&u(t,n,e[n]);if(s)for(var i=0,r=s(e);i<r.length;i++){n=r[i];l.call(e,n)&&u(t,n,e[n])}return t},h=function(t,e){return r(t,o(e))},p=function(t,e){var n={};for(var i in t)a.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&s)for(var r=0,o=s(t);r<o.length;r++){i=o[r];e.indexOf(i)<0&&l.call(t,i)&&(n[i]=t[i])}return n},f=function(t,e,n){return new Promise((function(i,r){var o=function(t){try{a(n.next(t))}catch(t){r(t)}},s=function(t){try{a(n.throw(t))}catch(t){r(t)}},a=function(t){return t.done?i(t.value):Promise.resolve(t.value).then(o,s)};a((n=n.apply(t,e)).next())}))},d=function(){function t(t){this.map=new Map(t)}return t.prototype.getMap=function(){return this.map},t.prototype.get=function(t){return this.map.get(t)},t.prototype.keys=function(){return Array.from(this.map.keys())},t.prototype.values=function(){return Array.from(this.map.values())},t.prototype.set=function(t,e){return this.map.set(t,e),this},t.prototype.add=function(t){var e=this.size;return this.set(e,t),this},Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.map.size},enumerable:!1,configurable:!0}),t.prototype.last=function(t){void 0===t&&(t=1);var e=this.keys()[this.size-t];return this.get(e)},t.prototype.delete=function(t){return this.map.delete(t)},t.prototype.remove=function(t){return this.map.delete(t),this},t.prototype.clear=function(){return this.map.clear(),this},t.prototype.has=function(t){return this.map.has(t)},t.prototype.entries=function(){return this.map.entries()},t.prototype.forEach=function(t,e){return this.map.forEach(t,e),this},t.prototype[Symbol.iterator]=function(){return this.entries()},t}(),m=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t.forEach((function(t){t[e].apply(t,n)}))},g=function(t){var e=t.callback,n=void 0===e?function(){}:e,i=t.scope,r=void 0===i?null:i,o=t.name;return{callback:n,scope:r,name:void 0===o?"event":o}},y=function(t){function n(e){void 0===e&&(e="event");var n=t.call(this)||this;return n.name=e,n}return e(n,t),n}(d),v=function(t){function n(){return t.call(this)||this}return e(n,t),n.prototype.getEvent=function(t){var e=this.get(t);return e instanceof y?e:(this.set(t,new y(t)),this.get(t))},n.prototype.newListener=function(t,e,n){var i=this.getEvent(t);return i.add(g({name:t,callback:e,scope:n})),i},n.prototype.on=function(t,e,n){var i,r,o=this;if(void 0===t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));var s="object"==typeof t&&!Array.isArray(t),a=s?e:n;return s||(r=e),Object.keys(t).forEach((function(e){i=s?e:t[e],s&&(r=t[e]),o.newListener(i,r,a)}),this),this},n.prototype.removeListener=function(t,e,n){var i=this.get(t);if(i instanceof y&&e){var r=g({name:t,callback:e,scope:n});i.forEach((function(t,e){if(t.callback===r.callback&&t.scope===r.scope)return i.remove(e)}))}return i},n.prototype.off=function(t,e,n){var i,r,o=this;if(void 0===t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));var s="object"==typeof t&&!Array.isArray(t),a=s?e:n;return s||(r=e),Object.keys(t).forEach((function(e){i=s?e:t[e],s&&(r=t[e]),"function"==typeof r?o.removeListener(i,r,a):o.remove(i)}),this),this},n.prototype.once=function(t,e,n){var i=this;if(void 0===t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s/g));var r="object"==typeof t&&!Array.isArray(t);return Object.keys(t).forEach((function(o){var s=r?o:t[o],a=r?t[o]:e,l=r?e:n,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.apply(l,t),i.removeListener(s,u,l)};i.newListener(s,u,l)}),this),this},n.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return void 0===t||null==t||("string"==typeof t&&(t=t.trim().split(/\s/g)),t.forEach((function(t){var i=e.get(t);i instanceof y&&i.forEach((function(t){var e=t.callback,i=t.scope;e.apply(i,n)}))}),this)),this},n.prototype.clear=function(){return m(this,"clear"),t.prototype.clear.call(this),this},n}(d),b=function(t){return"string"==typeof t?t.includes("%")?parseFloat(t)/100:"from"==t?0:"to"==t?1:parseFloat(t):t},w=function(t){return void 0===t&&(t=""),function(e){return"string"==typeof e?e:""+e+t}},E=w(),A=w("px"),k=w("deg"),P=function(t){return Array.isArray(t)||"string"==typeof t?("string"==typeof t&&(t=t.split(",")),t):[t]},S=function(t){return Array.isArray(t)||"string"==typeof t?Boolean(t.length):null!=t&&null!=t},O=function(t){return function(e){return S(e)?P(e).map((function(e){if("number"!=typeof e&&"string"!=typeof e)return e;var n=Number(e),i=Number.isNaN(n)?"string"==typeof e?e.trim():e:n;return t(i)})):[]}},T=function(t,e){return P(t).map(O(e))},x=["translate","translate3d","translateX","translateY","translateZ","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],L=function(t){for(var e="",n=x.length,i=0;i<n;i++){var r=x[i],o=t[i];S(o)&&(e+=r+"("+(Array.isArray(o)?o.join(", "):o)+") ")}return e.trim()},R=O(E),N=O(A),C=O(k),D=function(t){var e=t,n=e.perspective,i=e.rotate,r=e.rotate3d,o=e.rotateX,s=e.rotateY,a=e.rotateZ,l=e.translate,u=e.translate3d,c=e.translateX,h=e.translateY,f=e.translateZ,d=e.scale,m=e.scale3d,g=e.scaleX,y=e.scaleY,v=e.scaleZ,b=e.skew,w=e.skewX,O=e.skewY,x=p(e,["perspective","rotate","rotate3d","rotateX","rotateY","rotateZ","translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY"]),D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=[],r=(t=t.map((function(t){var e=P(t),i=e.length;return i>n&&(n=i),e}))).length,o=0;o<n;o++){i[o]=[];for(var s=0;s<r;s++){var a=t[s][o];S(a)&&(i[o][s]=a)}}return i}(l=T(l,A),u=T(u,A),c=N(c),h=N(h),f=N(f),i=T(i,k),r=T(r,E),o=C(o),s=C(s),a=C(a),d=T(d,E),m=T(m,E),g=R(g),y=R(y),v=R(v),b=T(b,k),w=C(w),O=C(O),n=N(n)).filter(S).map(L);return x=M(x,(function(t){return[].concat(t).map((function(t){return""+t}))})),Object.assign({},S(D)?{transform:D}:null,x)},_=function(t){return Array.isArray(t)?(e=t.map(_),[].concat.apply([],e)):"string"==typeof t||t instanceof Node?"string"==typeof(n=t)?Array.from(document.querySelectorAll(n)):[n]:t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[];var e,n},M=function(t,e){for(var n,i,r=Object.keys(t),o={},s=0,a=r.length;s<a;s++)i=t[n=r[s]],o[n]=e(i,n,t);return o},z=function(t,e,n){return M(t,(function(t){return function(t,e,n){return"function"==typeof t?t.apply(n,e):t}(t,e,n)}))},I={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},H=Object.keys(I),j=function(t){var e=t.replace(/^ease-/,"");return H.includes(e)?I[e]:t},q={keyframes:[],offset:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",timelineOffset:0,autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,timeline:document.timeline,extend:{}},X=function(t,e){for(var n,i,r=c({},e);t.length;){var o=r;o[n=t.pop()];r=p(o,[(i=n,"symbol"==typeof i?i:i+"")])}return r},Y=function(){function t(e){this.options={},this.properties={},this.totalDuration=-1/0,this.minDelay=1/0,this.maxSpeed=1/0,this.emitter=new v,this.targets=new d,this.targetIndexes=new WeakMap,this.keyframeEffects=new WeakMap,this.computedOptions=new WeakMap,this.animations=new WeakMap,this.computedKeyframes=new WeakMap,this.loop=this.loop.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.on("error",console.error),this.updateOptions(e),this.mainAnimation&&(this.visibilityPlayState=this.getPlayState(),t.pauseOnPageHidden&&document.addEventListener("visibilitychange",this.onVisibilityChange,!1)),this.newPromise()}return t.prototype.onVisibilityChange=function(){document.hidden?(this.visibilityPlayState=this.getPlayState(),this.is("running")&&(this.loop(),this.pause())):"running"==this.visibilityPlayState&&this.is("paused")&&this.play()},t.prototype.newPromise=function(){var t=this;return this.promise=new Promise((function(e,n){var i,r,o,s;null==(r=null==(i=null==t?void 0:t.emitter)?void 0:i.once)||r.call(i,"finish",(function(){return e([t])})),null==(s=null==(o=null==t?void 0:t.emitter)?void 0:o.once)||s.call(o,"error",(function(t){return n(t)}))})),this.promise},t.prototype.then=function(t,e){var n,i;return t=null==t?void 0:t.bind(this),e=null==e?void 0:e.bind(this),null==(i=null==(n=null==this?void 0:this.promise)?void 0:n.then)||i.call(n,t,e),this},t.prototype.catch=function(t){var e,n;return t=null==t?void 0:t.bind(this),null==(n=null==(e=this.promise)?void 0:e.catch)||n.call(e,t),this},t.prototype.finally=function(t){var e,n;return t=null==t?void 0:t.bind(this),null==(n=null==(e=this.promise)?void 0:e.finally)||n.call(e,t),this},t.prototype.loop=function(){this.stopLoop(),this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("update",this.getProgress(),this)},t.prototype.stopLoop=function(){window.cancelAnimationFrame(this.animationFrame)},t.prototype.allAnimations=function(t){var e=this;return this.targets.forEach((function(n){var i=e.keyframeEffects.get(n),r=e.animations.get(i);return t(r,n)})),this},t.prototype.all=function(t){return this.mainAnimation&&t(this.mainAnimation,this.mainElement),this.allAnimations(t),this},t.prototype.beginEvent=function(){0==this.getProgress()&&this.emit("begin",this)},t.prototype.play=function(){var t=this.getPlayState();return this.beginEvent(),this.all((function(t){return t.play()})),this.emit("play",t,this),this.is(t)||this.emit("playstate-change",t,this),this.loop(),this},t.prototype.pause=function(){var t=this.getPlayState();return this.all((function(t){return t.pause()})),this.emit("pause",t,this),this.is(t)||this.emit("playstate-change",t,this),this.stopLoop(),this},t.prototype.reverse=function(){return this.all((function(t){return t.reverse()})),this},t.prototype.reset=function(){return this.setProgress(0),this.options.autoplay?this.play():this.pause(),this},t.prototype.cancel=function(){return this.all((function(t){return t.cancel()})),this},t.prototype.finish=function(){return this.all((function(t){return t.finish()})),this},t.prototype.stop=function(){var t=this;this.cancel(),this.stopLoop(),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),this.targets.forEach((function(e){return t.removeTarget(e)})),this.emit("stop"),this.emitter.clear(),this.mainkeyframeEffect=null,this.mainAnimation=null,this.mainElement=null,this.promise=null,this.computedOptions=null,this.animations=null,this.keyframeEffects=null,this.emitter=null,this.targets=null,this.options=null,this.properties=null},t.prototype.getAnimation=function(t){var e=this.keyframeEffects.get(t);return this.animations.get(e)},t.prototype.getTiming=function(t){var e,n,i,r,o=null!=(e=this.computedOptions.get(t))?e:{},s=null!=(r=null==(i=(n=this.keyframeEffects.get(t)).getTiming)?void 0:i.call(n))?r:{};return c(c({},o),s)},t.prototype.getCurrentTime=function(){return this.mainAnimation.currentTime},t.prototype.getProgress=function(){return this.getCurrentTime()/this.totalDuration*100},t.prototype.getSpeed=function(){return this.mainAnimation.playbackRate},t.prototype.getPlayState=function(){return this.mainAnimation.playState},t.prototype.is=function(t){return this.getPlayState()==t},t.prototype.setCurrentTime=function(t){return this.all((function(e){return e.currentTime=t})),this.emit("update",this.getProgress()),this},t.prototype.setProgress=function(t){var e=t/100*this.totalDuration;return this.setCurrentTime(e),this},t.prototype.setSpeed=function(t){return void 0===t&&(t=1),this.maxSpeed=t,this.all((function(e){e.updatePlaybackRate?e.updatePlaybackRate(t):e.playbackRate=t})),this},t.prototype.createArrayOfComputedOptions=function(t,e){var n=this,i=[];return this.targets.forEach((function(r,o){var s,a,l=null!=(s=n.computedOptions.get(r))?s:{},u=function(e){var i,r,o=e;return"loop"==e&&(o="iterations"),"fillMode"==e&&(o="fill"),null!=(r=null!=(i=t[e])?i:l[o])?r:n.options[e]},f=Object.assign({easing:u("easing"),iterations:u("loop"),direction:u("direction"),endDelay:u("endDelay"),duration:u("duration"),speed:u("speed"),delay:u("delay"),timelineOffset:u("timelineOffset"),keyframes:u("keyframes")},null!=(a=u("extend"))?a:{}),d=z(f,[o,e,r],n);"string"==typeof d.easing&&(d.easing=j(d.easing)),!0===d.iterations&&(d.iterations=1/0),d.fill=u("fillMode");var m=d,g=m.timelineOffset,y=m.speed,v=m.endDelay,b=m.delay,w=m.duration,E=m.iterations,A=p(m,["timelineOffset","speed","endDelay","delay","duration","iterations"]);E=Number(E),w=Number(w),v=Number(v),y=Number(y);var k=(b=Number(b)+Number(g))+w*E+v;n.totalDuration<k&&(n.totalDuration=k),i[o]=h(c({},A),{speed:y,tempDurations:k,endDelay:v,delay:b,duration:w,iterations:E}),n.minDelay>b&&(n.minDelay=b),n.maxSpeed>y&&(n.maxSpeed=y)})),i},t.prototype.createAnimations=function(t,e){var n=this,r=t.arrOfComputedOptions,o=t.padEndDelay,s=t.oldCSSProperties,a=t.onfinish,l=t.oncancel,u=t.timeline;this.targets.forEach((function(t,f){var d,m,g,y,v,w=r[f],E=w.speed,A=w.keyframes,k=w.tempDurations,P=p(w,["speed","keyframes","tempDurations"]);o&&0==P.endDelay&&Math.abs(P.iterations)!=Math.abs(1/0)&&(P.endDelay=n.totalDuration-k);var O=A;"object"==typeof O&&(O=function(t){for(var e=new Set,n=Object.keys(t),r=n.length,o=0;o<r;o++)for(var s=""+n[o],a=t[s],l=s.split(","),u=l.length,p=0;p<u;p++){var f=b(l[p]);e.add(h(c({},a),{offset:f}))}return i([],e).sort((function(t,e){return t.offset-e.offset}))}(O));var T,x,_=null!=(d=n.computedKeyframes.get(t))?d:{},I=Object.assign({},s,_),H=M(I,(function(t,e){var i;return null!=(i=n.properties[e])?i:t}));if(v=S(O)?O:H,Array.isArray(v))y=function(t){return t.map((function(t){var e=t,n=e.translate,i=e.translate3d,r=e.translateX,o=e.translateY,s=e.translateZ,a=e.rotate,l=e.rotate3d,u=e.rotateX,c=e.rotateY,h=e.rotateZ,f=e.scale,d=e.scale3d,m=e.scaleX,g=e.scaleY,y=e.scaleZ,v=e.skew,b=e.skewX,w=e.skewY,E=e.perspective;return e.easing,e.iterations,e.offset,[p(e,["translate","translate3d","translateX","translateY","translateZ","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","easing","iterations","offset"]),n=N(n),i=N(i),r=N(r)[0],o=N(o)[0],s=N(s)[0],a=C(a),l=R(l),u=C(u)[0],c=C(c)[0],h=C(h)[0],f=R(f),d=R(d),m=R(m)[0],g=R(g)[0],y=R(y)[0],v=C(v),b=C(b)[0],w=C(w)[0],E=N(E)[0]]})).map((function(t){var e=t[0],n=t.slice(1),i=L(n);return Object.assign({},S(i)?{transform:i}:null,e)}))}(y=v.map((function(t){var e=X(["speed","loop"],t),n=e.easing,i=e.offset,r=p(e,["easing","offset"]);return Object.assign({},r,"string"==typeof n?{easing:j(n)}:null,"string"==typeof i||"number"==typeof i?{offset:b(i)}:null)})));else{var q=X(["keyframes"],v),Y=z(q,[f,e,t],n),F=Y.offset,K=p(Y,["offset"]);K=D(K);var Z=F;y=Object.assign({},K,S(Z)?{offset:Z.map(b)}:null)}n.keyframeEffects.has(t)?(x=n.keyframeEffects.get(t),T=n.animations.get(x),null==(m=null==x?void 0:x.setKeyframes)||m.call(x,y),null==(g=null==x?void 0:x.updateTiming)||g.call(x,P)):(x=new KeyframeEffect(t,y,P),T=new Animation(x,u),n.keyframeEffects.set(t,x),n.animations.set(x,T)),T.playbackRate=E,T.onfinish=function(){"function"==typeof a&&a.call(n,t,f,e,T)},T.oncancel=function(){"function"==typeof l&&l.call(n,t,f,e,T)},n.computedOptions.set(t,P),n.computedKeyframes.set(t,y)}))},t.prototype.updateOptions=function(t){var e,n,r=this;void 0===t&&(t={});try{var o=function(t){var e,n=t,i=n.options,r=p(n,["options"]),o=i instanceof Y?i.options:Array.isArray(i)?null==(e=null==i?void 0:i[0])?void 0:e.options:i;return Object.assign({},o,r)}(t);this.options=Object.assign({},q,this.options,o);var s=["easing","loop","endDelay","duration","speed","delay","timelineOffset","direction","extend","fillMode","offset"],a=X(s,this.options),l=a.padEndDelay,u=a.autoplay,c=a.target,h=a.targets,f=a.timeline,d=a.onfinish,m=a.oncancel,g=p(a,["padEndDelay","autoplay","target","targets","timeline","onfinish","oncancel"]);this.properties=X(i(i([],s),["keyframes","padEndDelay","onfinish","oncancel","autoplay","target","targets","timeline"]),o);var y=this.targets.values(),v=i([],new Set(i(i(i([],y),_(h)),_(c))));this.targets.clear(),v.forEach((function(t,e){r.targets.set(e,t),r.targetIndexes.set(t,e)}));var b=this.targets.size,w=this.createArrayOfComputedOptions(o,b);if(this.createAnimations({arrOfComputedOptions:w,padEndDelay:l,oldCSSProperties:g,onfinish:d,oncancel:m,timeline:f},b),b<=0&&(this.maxSpeed==1/0&&(this.maxSpeed=Number(this.options.speed)),this.minDelay==1/0&&(this.minDelay=Number(this.options.delay)+Number(this.options.timelineOffset)),this.totalDuration==-1/0&&(this.totalDuration=Number(this.options.duration))),this.mainAnimation?(null==(n=null==(e=this.mainkeyframeEffect)?void 0:e.updateTiming)||n.call(e,{duration:this.totalDuration}),this.mainkeyframeEffect.setKeyframes&&this.mainkeyframeEffect.updateTiming||console.warn("@okikio/animate - `KeyframeEffect.setKeyframes` and/or `KeyframeEffect.updateTiming` are not supported in this browser.")):(this.mainkeyframeEffect=new KeyframeEffect(this.mainElement,[{opacity:"0"},{opacity:"1"}],{duration:this.totalDuration,easing:"linear"}),this.mainAnimation=new Animation(this.mainkeyframeEffect,f)),this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=function(){if(r.emit("finish",r),r.mainAnimation){var t=r.getPlayState();r.is(t)||r.emit("playstate-change",t,r),r.stopLoop()}},this.mainAnimation.oncancel=function(){if(r.emit("cancel",r),r.mainAnimation){var t=r.getPlayState();r.is(t)||r.emit("playstate-change",t,r),r.stopLoop()}},u){var E=window.setTimeout((function(){r.emit("begin",r),E=window.clearTimeout(E)}),0);this.play()}else this.pause()}catch(t){this.emit("error",t)}},t.prototype.add=function(t){var e=this.getProgress(),n=this.is("running"),i=this.is("paused");this.updateOptions({target:t}),this.setProgress(e),n?this.play():i&&this.pause()},t.prototype.removeTarget=function(t){var e=this.keyframeEffects.get(t);this.animations.delete(e),e=null,this.computedKeyframes.delete(t),this.computedOptions.delete(t),this.keyframeEffects.delete(t);var n=this.targetIndexes.get(t);this.targets.delete(n),this.targetIndexes.delete(t)},t.prototype.remove=function(t){this.removeTarget(t);var e=new Set([].concat(this.targets.values()));this.options.target=i([],e),this.options.targets=[],e.clear(),e=null;var n=this.getProgress(),r=this.is("running"),o=this.is("paused");this.updateOptions(),r?this.play():o&&this.pause(),this.setProgress(n)},t.prototype.on=function(t,e,n){var i;return null==(i=null==this?void 0:this.emitter)||i.on(t,e,null!=n?n:this),this},t.prototype.off=function(t,e,n){var i;return null==(i=null==this?void 0:this.emitter)||i.off(t,e,null!=n?n:this),this},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return null==(e=null==this?void 0:this.emitter)||e.emit.apply(e,i([t],n)),this},t.prototype.toJSON=function(){return this.options},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"Animate"},enumerable:!1,configurable:!0}),t}();Y.pauseOnPageHidden=!0;var F=function(t){return void 0===t&&(t={}),new Y(t)},K={wrapperAttr:"wrapper",headers:[],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",timeout:2e3,maxPages:5,resizeDelay:100,onTransitionPreventClick:!0,cacheIgnore:!1,prefetchIgnore:!1,preventURLs:[],stickyScroll:!1,forceOnError:!0,ignoreHashAction:!1,transitions:[]},Z=function(t,e,n){void 0===n&&(n=!0);var i=t.prefix,r="data"+(i?"-"+i:"")+"-"+t[e];return n?"["+r+"]":r},B=function(){function t(){}return t.prototype.install=function(){},t.prototype.register=function(t,e){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=e,this.install(),this},t.prototype.uninstall=function(){},t.prototype.unregister=function(){this.uninstall(),this.manager.remove(this.key),this.key=null,this.manager=null,this.app=null,this.config=null,this.emitter=null},t}(),U=function(t){function n(e){var n=t.call(this)||this;return n.app=e,n.config=e.config,n.emitter=e.emitter,n}return e(n,t),n.prototype.set=function(e,n){return t.prototype.set.call(this,e,n),n.register(this,e),this},n}(d),V=function(t){return void 0===t&&(t=window.location.href),t instanceof URL?t:new URL(t,window.location.origin)},G=function(t){var e=V(t);return""+e.pathname+e.hash},W=function(t){return V(t).toString().replace(/(\/#.*|\/|#.*)$/,"")},J=function(t,e){return W(t)===W(e)},$=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){},n.prototype.boot=function(){this.initEvents()},n.prototype.initEvents=function(){},n.prototype.stopEvents=function(){},n.prototype.stop=function(){this.stopEvents(),this.unregister()},n}(B),Q=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n.prototype.init=function(){return m(this,"init"),this},n.prototype.boot=function(){return m(this,"boot"),this},n.prototype.stop=function(){return m(this,"stop"),this},n}(U),tt=function(t,e){return void 0===t&&(t=window.scrollX),void 0===e&&(e=window.scrollY),{x:t,y:e}},et=function(t){return void 0===t&&(t={url:G(V()),index:0,transition:"default",data:{scroll:tt(),trigger:"HistoryManager"}}),t},nt=function(t){function n(){var e=t.apply(this,arguments)||this;return e.pointer=-1,e}return e(n,t),n.prototype.init=function(){this.states=[];var t=et();this.add(t,"replace")},n.prototype.get=function(t){return this.states[t]},n.prototype.add=function(t,e){void 0===e&&(e="push");var n=et(t),r=this.length;this.states.push(c({},n)),this.pointer=r;var o={index:this.pointer,states:i([],this.states)};return it(e,n,o),this},n.prototype.remove=function(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this},n.prototype.replace=function(t){return this.states=t,this},n.prototype.set=function(t,e){return this.states[t]=e},Object.defineProperty(n.prototype,"current",{get:function(){return this.get(this.pointer)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this.get(this.length-1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"previous",{get:function(){return this.pointer<1?null:this.get(this.pointer-1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this.states.length},enumerable:!1,configurable:!0}),n}($),it=function(t,e,n){var i=[n,"",G(e.url)];if(window.history)switch(t){case"push":window.history.pushState.apply(window.history,i);break;case"replace":window.history.replaceState.apply(window.history,i)}};function rt(t,e){void 0===e&&(e={});for(var n=function(t){for(var e=[],n=0;n<t.length;){var i=t[n];if("*"!==i&&"+"!==i&&"?"!==i)if("\\"!==i)if("{"!==i)if("}"!==i)if(":"!==i)if("("!==i)e.push({type:"CHAR",index:n,value:t[n++]});else{var r=1,o="";if("?"===t[a=n+1])throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<t.length;)if("\\"!==t[a]){if(")"===t[a]){if(0==--r){a++;break}}else if("("===t[a]&&(r++,"?"!==t[a+1]))throw new TypeError("Capturing groups are not allowed at "+a);o+=t[a++]}else o+=t[a++]+t[a++];if(r)throw new TypeError("Unbalanced pattern at "+n);if(!o)throw new TypeError("Missing pattern at "+n);e.push({type:"PATTERN",index:n,value:o}),n=a}else{for(var s="",a=n+1;a<t.length;){var l=t.charCodeAt(a);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;s+=t[a++]}if(!s)throw new TypeError("Missing parameter name at "+n);e.push({type:"NAME",index:n,value:s}),n=a}else e.push({type:"CLOSE",index:n,value:t[n++]});else e.push({type:"OPEN",index:n,value:t[n++]});else e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});else e.push({type:"MODIFIER",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}(t),i=e.prefixes,r=void 0===i?"./":i,o="[^"+ot(e.delimiter||"/#?")+"]+?",s=[],a=0,l=0,u="",c=function(t){if(l<n.length&&n[l].type===t)return n[l++].value},h=function(t){var e=c(t);if(void 0!==e)return e;var i=n[l],r=i.type,o=i.index;throw new TypeError("Unexpected "+r+" at "+o+", expected "+t)},p=function(){for(var t,e="";t=c("CHAR")||c("ESCAPED_CHAR");)e+=t;return e};l<n.length;){var f=c("CHAR"),d=c("NAME"),m=c("PATTERN");if(d||m){var g=f||"";-1===r.indexOf(g)&&(u+=g,g=""),u&&(s.push(u),u=""),s.push({name:d||a++,prefix:g,suffix:"",pattern:m||o,modifier:c("MODIFIER")||""})}else{var y=f||c("ESCAPED_CHAR");if(y)u+=y;else if(u&&(s.push(u),u=""),c("OPEN")){g=p();var v=c("NAME")||"",b=c("PATTERN")||"",w=p();h("CLOSE"),s.push({name:v||(b?a++:""),pattern:v&&!b?o:b,prefix:g,suffix:w,modifier:c("MODIFIER")||""})}else h("END")}}return s}function ot(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function st(t){return t&&t.sensitive?"":"i"}function at(t,e,n){return function(t,e,n){void 0===n&&(n={});for(var i=n.strict,r=void 0!==i&&i,o=n.start,s=void 0===o||o,a=n.end,l=void 0===a||a,u=n.encode,c=void 0===u?function(t){return t}:u,h="["+ot(n.endsWith||"")+"]|$",p="["+ot(n.delimiter||"/#?")+"]",f=s?"^":"",d=0,m=t;d<m.length;d++){var g=m[d];if("string"==typeof g)f+=ot(c(g));else{var y=ot(c(g.prefix)),v=ot(c(g.suffix));if(g.pattern)if(e&&e.push(g),y||v)if("+"===g.modifier||"*"===g.modifier){var b="*"===g.modifier?"?":"";f+="(?:"+y+"((?:"+g.pattern+")(?:"+v+y+"(?:"+g.pattern+"))*)"+v+")"+b}else f+="(?:"+y+"("+g.pattern+")"+v+")"+g.modifier;else f+="("+g.pattern+")"+g.modifier;else f+="(?:"+y+v+")"+g.modifier}}if(l)r||(f+=p+"?"),f+=n.endsWith?"(?="+h+")":"$";else{var w=t[t.length-1],E="string"==typeof w?p.indexOf(w[w.length-1])>-1:void 0===w;r||(f+="(?:"+p+"(?="+h+"))?"),E||(f+="(?="+p+"|"+h+")")}return new RegExp(f,st(n))}(rt(t,n),e,n)}function lt(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,r=n.exec(t.source);r;)e.push({name:r[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(t.source);return t}(t,e):Array.isArray(t)?function(t,e,n){var i=t.map((function(t){return lt(t,e,n).source}));return new RegExp("(?:"+i.join("|")+")",st(n))}(t,e,n):at(t,e,n)}var ut,ct,ht,pt=new DOMParser,ft=function(t){function i(e,n){void 0===e&&(e=V()),void 0===n&&(n=document);var i=t.call(this)||this;return i.url=V(e),"string"==typeof n?i.data=n:i.dom=n||document,i}return e(i,t),i.prototype.build=function(){return f(this,null,(function(){var t,e,i,r;return n(this,(function(n){return this.dom instanceof Node||(this.dom=pt.parseFromString(this.data,"text/html")),this.body instanceof Node||(t=this.dom,e=t.title,i=t.head,r=t.body,this.title=e,this.head=i,this.body=r,this.wrapper=this.body.querySelector(this.wrapperAttr)),[2]}))}))},i.prototype.install=function(){this.wrapperAttr=Z(this.config,"wrapperAttr")},i.prototype.uninstall=function(){this.url=null,this.title=null,this.head=null,this.body=null,this.dom=null,this.wrapper=null,this.data=null,this.wrapperAttr=null},i}(B),dt=function(t){function i(){var e=t.call(this)||this;return e.loading=new d,e}return e(i,t),i.prototype.install=function(){this.pages=new U(this.app),this.cacheIgnore=this.config.cacheIgnore;var t=V().pathname;this.set(t,new ft),t=null},i.prototype.get=function(t){return this.pages.get(t)},i.prototype.add=function(t){return this.pages.add(t),this},i.prototype.set=function(t,e){return this.pages.set(t,e),this},i.prototype.remove=function(t){return this.pages.remove(t),this},i.prototype.has=function(t){return this.pages.has(t)},i.prototype.clear=function(){return this.pages.clear(),this},Object.defineProperty(i.prototype,"size",{get:function(){return this.pages.size},enumerable:!1,configurable:!0}),i.prototype.keys=function(){return this.pages.keys()},i.prototype.load=function(){return f(this,arguments,(function(t){var e,i,r,o,s,a,l,u;return void 0===t&&(t=V()),n(this,(function(n){switch(n.label){case 0:return e=V(t),i=e.pathname,this.has(i)&&!mt(i,this.cacheIgnore)?(r=this.get(i),[2,Promise.resolve(r)]):(this.loading.has(i)?o=this.loading.get(i):(o=this.request(i),this.loading.set(i,o)),[4,o]);case 1:return s=n.sent(),this.loading.remove(i),r=new ft(e,s),this.set(i,r),this.size>this.config.maxPages&&(a=V(),l=this.keys(),u=J(a,l[0])?l[1]:l[0],this.get(u).unregister(),null,l=null,a=null,u=null),[2,r]}}))}))},i.prototype.request=function(t){return f(this,null,(function(){var e,i,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:e=new Headers(this.config.headers),i=window.setTimeout((function(){window.clearTimeout(i);var t=new Error("Request Timed Out!");throw a.emitter.emit("TIMEOUT_ERROR",t),t}),this.config.timeout),n.label=1;case 1:return n.trys.push([1,5,,6]),[4,fetch(t,{mode:"same-origin",method:"GET",headers:e,cache:"default",credentials:"same-origin"})];case 2:return r=n.sent(),window.clearTimeout(i),r.status>=200&&r.status<300?[4,r.text()]:[3,4];case 3:return[2,n.sent()];case 4:throw o=new Error(r.statusText||""+r.status),this.emitter.emit("REQUEST_ERROR",o),o;case 5:throw s=n.sent(),window.clearTimeout(i),s;case 6:return[2]}}))}))},i}($),mt=function(t,e){if("boolean"==typeof e)return e;var n=[];return!e.every((function(e){return null==lt(e,n,{start:!1,end:!1}).exec(t)}))},gt=function(t,e){void 0===e&&(e=window.location.hash);try{var n="#"==e[0]?e:V(e).hash;if(n.length>1){var i=document.getElementById(n.slice(1));if(i){var r=i.getBoundingClientRect(),o=r.left,s=r.top,a=window.scrollX,l=window.scrollY;return tt(o+a,s+l)}}}catch(t){console.warn("[hashAction] error",t)}return null!=t?t:tt(0,0)},yt={name:"replace"},vt=function(t){function i(e){var n=t.call(this)||this;return n._arg=e,n}return e(i,t),i.prototype.install=function(){t.prototype.install.call(this);var e=this._arg&&this._arg.length?this._arg:this.config.transitions;this.transitions=new d([["default",yt],["replace",yt]].concat(e))},i.prototype.get=function(t){return this.transitions.get(t)},i.prototype.set=function(t,e){return this.transitions.set(t,e),this},i.prototype.add=function(t){return this.transitions.add(t),this},i.prototype.has=function(t){return this.transitions.has(t)},i.prototype.start=function(t,e){return f(this,null,(function(){var i,r,o,s,a,l,u,p=this;return n(this,(function(n){switch(n.label){case 0:if(i=this.transitions.get(t),r=e.oldPage,o=e.newPage,s=e.ignoreHashAction,a=e.trigger,this.emitter.emit("TRANSITION_START",c({transitionName:t},e)),!("wrapper"in r)||!("wrapper"in o))throw"[TransitionManager] either oldPage or newPage aren't instances of the Page Class.\n "+{newPage:o,oldPage:r};if(document.title=""+o.title,l=r.wrapper,u=o.wrapper,!(l instanceof Node&&u instanceof Node))throw"[TransitionManager] the wrapper from the "+(u instanceof Node?"current":"next")+" page cannot be found. The wrapper must be an element that has the attribute "+Z(this.config,"wrapperAttr")+".";return i.init&&(null==i||i.init(e)),this.emitter.emit("BEFORE_TRANSITION_OUT",e),i.out?[4,new Promise((function(t){var n=i.out.call(i,h(c({},e),{from:r,done:t}));null==n||n.then(t)}))]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.emitter.emit("AFTER_TRANSITION_OUT",e),[4,new Promise((function(t){l.insertAdjacentElement("beforebegin",u),p.emitter.emit("CONTENT_INSERT",e),t()}))];case 3:return n.sent(),[4,new Promise((function(t){l.remove(),l=null,u=null,p.emitter.emit("CONTENT_REPLACED",e),s||/back|popstate|forward/.test(a)||(e.scroll=gt(e.scroll)),t()}))];case 4:return n.sent(),this.emitter.emit("BEFORE_TRANSITION_IN",e),i.in?[4,new Promise((function(t){var n=i.in.call(i,h(c({},e),{from:r,to:o,done:t}));null==n||n.then(t)}))]:[3,6];case 5:n.sent(),n.label=6;case 6:return this.emitter.emit("AFTER_TRANSITION_IN",e),i.manualScroll||(s||/back|popstate|forward/.test(a)||(e.scroll=gt(e.scroll)),window.scroll(e.scroll.x,e.scroll.y)),this.emitter.emit("TRANSITION_END",c({transitionName:t},e)),[2,e]}}))}))},i}($),bt=function(){function t(t){void 0===t&&(t={}),this.canResize=!0,this.canScroll=!0,this._resize=this._resize.bind(this),this._scroll=this._scroll.bind(this),this._ready=this._ready.bind(this),this.register(t)}return t.prototype.register=function(t){return void 0===t&&(t={}),this.config=function(t){return Object.assign(c({},K),t)}(t),this.emitter=new v,this.services=new Q(this),this},t.prototype._ready=function(){document.removeEventListener("DOMContentLoaded",this._ready),window.removeEventListener("load",this._ready),this.emitter.emit("READY ready")},t.prototype._resize=function(){var t,e,n=this;this.canResize&&(this.canResize=!1,e=window.requestAnimationFrame((function(){n.emitter.emit("RESIZE resize"),t=window.setTimeout((function(){n.canResize=!0,t=window.clearTimeout(t),e=window.cancelAnimationFrame(e)}),n.config.resizeDelay)})))},t.prototype._scroll=function(){var t,e=this;this.canScroll&&(this.canScroll=!1,t=requestAnimationFrame((function(){e.emitter.emit("SCROLL scroll"),e.canScroll=!0,t=window.cancelAnimationFrame(t)})))},t.prototype.get=function(t){return this.services.get(t)},t.prototype.set=function(t,e){return this.services.set(t,e),this},t.prototype.add=function(t){return this.services.add(t),this},t.prototype.boot=function(){return document.addEventListener("DOMContentLoaded",this._ready),window.addEventListener("load",this._ready),window.addEventListener("resize",this._resize,{passive:!0}),window.addEventListener("scroll",this._scroll,{passive:!0}),this.services.init(),this.services.boot(),this},t.prototype.stop=function(){return window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._scroll),this.services.stop(),this.emitter.clear(),this},t.prototype.on=function(t,e){return this.emitter.on(t,e,this),this},t.prototype.off=function(t,e){return this.emitter.off(t,e,this),this},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this.emitter).emit.apply(e,i([t],n)),this},t}(),wt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.install=function(){t.prototype.install.call(this),this.preventURLs=this.config.preventURLs,this.prefetchIgnore=this.config.prefetchIgnore,this.onTransitionPreventClick=this.config.onTransitionPreventClick,this.stickyScroll=this.config.stickyScroll,this.forceOnError=this.config.forceOnError,this.ignoreHashAction=this.config.ignoreHashAction},i.prototype.transitionStart=function(){this.isTransitioning=!0},i.prototype.transitionStop=function(){this.isTransitioning=!1},i.prototype.init=function(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)},i.prototype.boot=function(){t.prototype.boot.call(this)},i.prototype.getTransitionName=function(t){if(!t||!t.getAttribute)return null;var e=t.getAttribute(Z(this.config,"transitionAttr",!1));return"string"==typeof e?e:null},i.prototype.validLink=function(t,e,n){var i=!window.history.pushState,r=!t||!n,o=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey,s=t.hasAttribute("target")&&"_blank"===t.target,a=t.protocol!==location.protocol||t.hostname!==location.hostname,l="string"==typeof t.getAttribute("download"),u=t.matches(Z(this.config,"preventSelfAttr")),c=Boolean(t.closest(Z(this.config,"preventAllAttr"))),h=mt(V(n).pathname,this.preventURLs),p=G(V())===G(V(n));return!(r||i||o||s||a||l||u||c||h||p)},i.prototype.getHref=function(t){return t&&t.tagName&&"a"===t.tagName.toLowerCase()&&"string"==typeof t.href?t.href:null},i.prototype.getLink=function(t){for(var e=t.target,n=this.getHref(e);e&&!n;)e=e.parentNode,n=this.getHref(e);if(e&&this.validLink(e,t,n))return e},i.prototype.onClick=function(t){var e=this.getLink(t);if(e){if(this.isTransitioning&&this.onTransitionPreventClick)return t.preventDefault(),void t.stopPropagation();var n=this.getHref(e);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:n,trigger:e,event:t})}},i.prototype.getDirection=function(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"},i.prototype.force=function(t){window.location.assign(t)},i.prototype.go=function(t){var e=t.href,n=t.trigger,i=void 0===n?"HistoryManager":n,r=t.event;if((!this.isTransitioning||this.onTransitionPreventClick)&&this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager")){var o=this.manager.get("HistoryManager"),s=tt(0,0),a=o.current,l=a.url;if(!J(l,e)){var u;if(r&&r.state){this.emitter.emit("POPSTATE",r);var c=(f=r.state).index,h=a.index-c;o.replace(f.states),o.pointer=c;var p=o.get(c);u=p.transition,s=p.data.scroll,i=this.getDirection(h),this.emitter.emit("back"===i?"POPSTATE_BACK":"POPSTATE_FORWARD",r)}else{u=this.getTransitionName(i),s=tt();var f=et({url:e,transition:u,data:{scroll:s}});!this.stickyScroll&&(s=tt(0,0)),o.add(f),this.emitter.emit("HISTORY_NEW_ITEM",r)}return r&&(r.stopPropagation(),r.preventDefault()),this.emitter.emit("GO",r),this.load({oldHref:l,href:e,trigger:i,transitionName:u,scroll:s})}}else this.force(e)},i.prototype.load=function(t){return f(this,arguments,(function(t){var e,i,r,o,s,a,l,u,c,h=t.oldHref,p=t.href,f=t.trigger,d=t.transitionName,m=void 0===d?"default":d,g=t.scroll,y=void 0===g?{x:0,y:0}:g;return n(this,(function(t){switch(t.label){case 0:t.trys.push([0,9,10,11]),e=this.manager.get("TransitionManager"),i=this.manager.get("PageManager"),r=this.ignoreHashAction,o=void 0,s=void 0,this.emitter.emit("NAVIGATION_START",{oldHref:h,href:p,trigger:f,transitionName:m,scroll:y}),e.has(m)||(console.log('[PJAX] transition name "'+m+'" doesn\'t exist, switching to the "default" transition'),m="default"),t.label=1;case 1:return t.trys.push([1,4,,5]),this.transitionStart(),this.emitter.emit("PAGE_LOADING",{href:p,oldHref:h,trigger:f,scroll:y}),[4,i.load(h)];case 2:return s=t.sent(),[4,i.load(p)];case 3:return o=t.sent(),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:o,oldPage:s,trigger:f,scroll:y}),s.dom instanceof Element||s.build(),o.build(),[3,5];case 4:return a=t.sent(),console.warn("[PJAX] Page load error",a),[3,5];case 5:return t.trys.push([5,7,,8]),[4,e.start(m,{oldPage:s,newPage:o,trigger:f,scroll:y,ignoreHashAction:r})];case 6:return l=t.sent(),y=l.scroll,[3,8];case 7:return u=t.sent(),console.warn("[PJAX] Transition error",u),[3,8];case 8:return this.emitter.emit("NAVIGATION_END",{oldPage:s,newPage:o,trigger:f,transitionName:m,scroll:y}),[3,11];case 9:return c=t.sent(),this.forceOnError?this.force(p):console.warn(c),[3,11];case 10:return this.transitionStop(),[7];case 11:return[2]}}))}))},i.prototype.onHover=function(t){var e=this.getLink(t);if(e&&this.manager.has("PageManager")){var n=this.manager.get("PageManager"),i=V(this.getHref(e)),r=i.pathname;if(this.emitter.emit("ANCHOR_HOVER HOVER",t),!mt(i.pathname,this.prefetchIgnore)&&(!n.has(r)||mt(r,n.cacheIgnore)))try{n.load(i),this.emitter.emit("PREFETCH",t)}catch(t){console.warn("[PJAX] Prefetch error",t)}}},i.prototype.onStateChange=function(t){this.go({href:window.location.href,trigger:"popstate",event:t})},i.prototype.initEvents=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)},i.prototype.stopEvents=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)},i}($),Et=function(t){function n(e){void 0===e&&(e=[]);var n=t.call(this)||this;n.routes=new d;for(var i=0,r=e;i<r.length;i++){var o=r[i];n.add(o)}return n}return e(n,t),n.prototype.add=function(t){var e=t.path,n=t.method,i=this.parse(e);return this.routes.set(i,n),this},n.prototype.parsePath=function(t){if("string"==typeof t||t instanceof RegExp||Array.isArray(t)){return lt(t,[],{start:!1,end:!1})}if("boolean"==typeof t)return t?/.*/:t;throw"[Router] only regular expressions, strings, booleans and arrays of regular expressions and strings are accepted as paths."},n.prototype.isPath=function(t){return"string"==typeof t||t instanceof RegExp||"boolean"==typeof t||Array.isArray(t)},n.prototype.parse=function(t){var e=t,n={from:/.*/,to:/.*/};if(this.isPath(t))n={from:!0,to:t};else{if(!this.isPath(e.from)||!this.isPath(e.to))throw"[Router] path is neither a string, regular expression, or a { from, to } object.";n=Object.assign({},n,e)}var i=n.from,r=n.to;return{from:this.parsePath(i),to:this.parsePath(r)}},n.prototype.route=function(){if(this.manager.has("HistoryManager")){var t=this.manager.get("HistoryManager"),e=G(V((t.length>1?t.previous:t.current).url)),n=G(V());this.routes.forEach((function(t,i){var r=i.from,o=i.to;if("boolean"==typeof r&&"boolean"==typeof o)throw"[Router] path ({ from: "+r+", to: "+o+" }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.";var s=r,a=o;r instanceof RegExp&&r.test(e)&&(s=r.exec(e)),o instanceof RegExp&&o.test(n)&&(a=o.exec(n)),(Array.isArray(a)&&Array.isArray(s)||Array.isArray(a)&&0==s&&!o.test(e)||Array.isArray(s)&&0==a&&!r.test(n))&&t({from:s,to:a,path:{from:e,to:n}})}))}else console.warn("[Route] HistoryManager is missing.")},n.prototype.initEvents=function(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)},n.prototype.stopEvents=function(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)},n}($),At={name:"default",duration:500,manualScroll:!0,out:function(t){var e=t.from,n=this.duration,i=e.wrapper;return F({target:i,opacity:[1,0],duration:n}).on("finish",(function(){this.stop()}))},in:function(t){var e=t.to,n=t.scroll,i=this.duration,r=e.wrapper;return window.scroll(n.x,n.y),F({target:r,opacity:[0,1],duration:i}).then((function(){this.stop()}))}},kt={name:"big",delay:200,durationPerAnimation:700,manualScroll:!0,init:function(){this.mainElement=document.getElementById("big-transition"),this.logoElement=this.mainElement.querySelector("#logo"),this.horizontalElements=Array.from(this.mainElement.querySelectorAll("#big-transition-horizontal div")),this.maxLength=this.horizontalElements.length},out:function(t){var e=this,i=t.from,r=t.done,o=this.durationPerAnimation,s=this.delay,a=i.wrapper;f(e,null,(function(){var t,e,i,l;return n(this,(function(n){switch(n.label){case 0:return t=Object.assign({},a.style),this.mainElement.style.opacity="1",this.mainElement.style.visibility="visible",F({target:a,opacity:[1,0],duration:o,onfinish:function(t){t.style.opacity="0"}}).then((function(){this.stop()})),[4,F({target:this.horizontalElements,scaleX:[0,1],delay:function(t){return s*(t+1)},onfinish:function(t){t.style.transform="scaleX(1)"},easing:"out-cubic",duration:500})];case 1:return e=n.sent()[0],a.style.opacity="1",Object.assign(a.style,t),this.logoElement.style.visibility="visible",[4,F({target:this.logoElement,opacity:[0,1],duration:500,onfinish:function(t){t.style.opacity="1"}})];case 2:return(i=n.sent()[0]).on("stop",(function(){console.log("`anim3` of the BigTransition has stopped")})),[4,F({options:i,opacity:[1,0],onfinish:function(t){t.style.opacity="0"},delay:1500})];case 3:return l=n.sent()[0],this.logoElement.style.visibility="hidden",e.stop(),i.stop(),l.stop(),r(),[2]}}))}))},in:function(t){var e=this,i=t.to,r=t.scroll,o=this.durationPerAnimation,s=this.delay,a=i.wrapper;return window.scroll(r.x,r.y),new Promise((function(t){return f(e,null,(function(){var e,i;return n(this,(function(n){switch(n.label){case 0:return e=F({target:a,opacity:[0,1],duration:o}).then((function(){e.stop()})),[4,F({target:this.horizontalElements,scaleX:[1,0],delay:function(t){return s*(t+1)},onfinish:function(t){t.style.transform="scaleX(0)"},easing:"out-cubic",duration:500})];case 1:return i=n.sent()[0],this.mainElement.style.opacity="0",this.mainElement.style.visibility="hidden",i.stop(),t(),[2]}}))}))}))}},Pt={name:"slide",duration:500,direction:"right",init:function(t){document.documentElement.classList.add("no-overflow-x");var e=t.trigger;e instanceof Node&&e.hasAttribute("data-direction")?this.direction=e.getAttribute("data-direction"):this.direction="right"},out:function(t){var e=t.from,n=this.duration,i=this.direction,r=e.wrapper;return F({target:r,translateX:[0,25*("left"===i?-1:1)+"%"],opacity:[1,0],duration:n,easing:"in-quint"}).then((function(){this.stop()}))},in:function(t){return f(this,arguments,(function(t){var e,i,r,o=t.to;return n(this,(function(t){switch(t.label){case 0:return e=this.duration,i=o.wrapper,[4,r=F({target:i,translateX:[25*("right"===this.direction?-1:1)+"%",0],opacity:[0,1],duration:e,easing:"out-quint"})];case 1:return t.sent(),document.documentElement.classList.remove("no-overflow-x"),r.stop(),[2]}}))}))}},St=h(c({},Pt),{name:"slide-left",direction:"left"}),Ot=h(c({},Pt),{name:"slide-right",direction:"right"}),Tt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){this.navbar=document.querySelector(".navbar"),this.collapseSection=this.navbar.querySelector(".navbar-collapse.mobile"),this.navbarList=this.navbar.querySelector(".navbar-list"),this.elements=Array.from(this.navbar.querySelectorAll(".navbar-list a")),this.menu=this.navbar.querySelector(".navbar-toggle"),this.toggleStatus=!1,this.fixTabindex(),this.toggleClick=this.toggleClick.bind(this)},n.prototype.activateLink=function(){for(var t=window.location.href,e=0,n=this.elements;e<n.length;e++){var i=n[e],r=i.getAttribute("data-path")||i.href;if(!r||r.length<1)return;var o=new RegExp(r).test(t),s=i.classList.contains("active");o&&s||i.classList.toggle("active",o)}this.toggleStatus&&this.toggleClick()},n.prototype.fixTabindex=function(){for(var t=0,e=this.elements;t<e.length;t++){e[t].setAttribute("tabindex",""+(this.toggleStatus?0:-1))}},n.prototype.toggleClick=function(){var t,e;null==(e=null==(t=this.collapseSection.style)?void 0:t.setProperty)||e.call(t,"--height",this.navbarList.clientHeight+"px"),this.toggleStatus=!this.toggleStatus,this.collapseSection.classList.toggle("collapse",!this.toggleStatus),this.collapseSection.classList.toggle("show",this.toggleStatus),this.fixTabindex()},n.prototype.scroll=function(){this.navbar.classList.toggle("active-shadow",window.scrollY>=5)},n.prototype.initEvents=function(){this.menu.addEventListener("click",this.toggleClick),this.emitter.on("scroll",this.scroll,this),this.emitter.on("READY",this.activateLink,this),this.emitter.on("GO",this.activateLink,this)},n.prototype.stopEvents=function(){this.navbar.removeEventListener("click",this.toggleClick),this.emitter.off("scroll",this.scroll,this),this.emitter.off("READY",this.activateLink,this),this.emitter.off("GO",this.activateLink,this)},n.prototype.uninstall=function(){for(;this.elements.length;)this.elements.pop();this.elements=null,this.menu=null,this.navbar=null},n}($),xt=function(t,e){var n,i=document.querySelector(t+" #playstate-toggle"),r=document.querySelector(t+" #progress"),o=document.querySelector(t+" #progress-output"),s=function(){"pending"==(n=e[0].getPlayState())&&(n="running"),i.setAttribute("data-playstate",n),m(e,"loop")};e[0].on("finish begin",s).on("update",(function(t){r.value=""+(Math.round(t)>=100?100:t.toFixed(2)),o.textContent=Math.round(t)+"%"}));var a=function(){e[0].is("running")?m(e,"pause"):e[0].is("finished")?m(e,"reset"):m(e,"play"),s()},l=function(){var t=Math.round(+r.value);m(e,"setProgress",t),m(e,"pause")},u=function(){m(e,"paused"!==n?"play":"pause"),s()};i.addEventListener("click",a),r.addEventListener("input",l),r.addEventListener("change",u),e[0].on("stop",(function(){i.removeEventListener("click",a),r.removeEventListener("input",l),r.removeEventListener("change",u),e=null}))},Lt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},Rt=new Et,Nt=new wt,Ct=new Tt,Dt=new bt({transitions:[["default",At],["BigTransition",kt],["Slide",Pt],["SlideLeft",St],["SlideRight",Ot]]});Dt.set("HistoryManager",new nt).set("PageManager",new dt).set("TransitionManager",new vt).add(Ct).add(Rt).add(Nt),Rt.add({path:{from:"/animate(.html)?",to:!1},method:function(){null==ut||ut.stop(),null==ct||ct.stop(),null==ht||ht.stop()}}).add({path:/\/animate(.html)?/,method:function(){!function(){var t=".morph-demo",e=document.querySelector(".morph-demo path");if(e){var n=getComputedStyle(e),i=F({target:e,duration:1800,easing:"ease",loop:4,direction:"alternate",d:[n.getPropertyValue("d"),'path("M2,5 S2,14 4,5 S7,8 8,4")'],stroke:[n.getPropertyValue("stroke"),"rgb(96, 165, 250)"]});xt(t,[i])}}(),function(){var t=".playback-demo",e=document.querySelectorAll(t+" .el");if(e.length){ut=F({target:e,backgroundColor:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[2],i=[Lt(0,255),Lt(0,255),Lt(0,255)],r=i[0],o=i[1],s=i[2];return[getComputedStyle(n).getPropertyValue("background-color"),"rgb("+r+", "+o+", "+s+")"]},translateX:function(){return[0,Lt(50,400)]},translateY:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[1];return[0,Lt(-50,50)*n]},scale:function(){return[1,1+Lt(.025,1.75)]},opacity:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[1];return[.5,.5+Math.min(Lt(.025,n)/n,.5)]},rotate:function(){return[0,Lt(-360,360)]},borderRadius:function(){return["3px",Lt(10,35)+"%"]},duration:function(){return Lt(1200,1800)},delay:function(){return Lt(0,400)},loop:2,speed:function(t){return 1.5-.125*t},fillMode:"both",direction:"alternate",easing:"in-out-back",padEndDelay:!0,autoplay:!0});var n=document.querySelector("#add-el"),i=document.querySelector("#remove-el"),r=document.querySelector(".el-placement"),o=document.createElement("div");o.className="contain",o.innerHTML='\n            <div class="el"></div>\n            <div class="el-initial"></div>'.trim(),n.onclick=function(){var t=o.cloneNode(!0),e=t.querySelector(".el");r.appendChild(t),ut.add(e);var n=F({target:t,opacity:[0,1],height:[0,"4vmin"],marginBottom:N([0,5]),fillMode:"forwards",duration:400,easing:"out"}).then((function(){n.stop(),n=null,t=null,e=null}))},i.onclick=function(){var t=r.querySelector(".contain"),e=null==t?void 0:t.querySelector(".el");ut.remove(e);var n=F({target:t,opacity:[1,0],height:[t.style.height,0],marginBottom:[t.style.marginBottom,0],fillMode:"forwards",duration:400,easing:"out"}).then((function(){n.stop(),null==t||t.remove(),n=null,t=null,e=null}))},xt(t,[ut])}}(),function(){var t={padEndDelay:!0,easing:"linear",duration:2e3,loop:4,speed:1},e=document.querySelector(".motion-path .el-1");e&&(ct=F(c({target:e,offsetDistance:["0%","100%"]},t)));var n=document.querySelector(".motion-path path"),r=document.querySelector(".motion-path .el-2");if(n&&r){for(var o=new Set,s=[],a=n.getTotalLength(),l=n.getPointAtLength(0),u=0;u<a;u++){var h=n.getPointAtLength(u),p=h.x,f=h.y;o.add([p,f]);var d=u-1>=1?n.getPointAtLength(u-1):l,m=d.x,g=d.y,y=u+1>=1?n.getPointAtLength(u+1):l,v=y.x,b=y.y,w=180*Math.atan2(g-b,m-v)/Math.PI;s.push(w)}ht=F(c({target:r,translate:i([],o),rotate:s,fillMode:"both"},t)),xt(".motion-path-demo",[ct,ht])}}()}});try{Dt.boot()}catch(t){console.warn("[App] boot failed,",t)}}();