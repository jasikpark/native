var nt=Object.defineProperty;var E=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var z=(i,t,e)=>t in i?nt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,h=(i,t)=>{for(var e in t||(t={}))_.call(t,e)&&z(i,e,t[e]);if(E)for(var e of E(t))K.call(t,e)&&z(i,e,t[e]);return i};var I=(i,t)=>{var e={};for(var r in i)_.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&E)for(var r of E(i))t.indexOf(r)<0&&K.call(i,r)&&(e[r]=i[r]);return e};var u=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let r=this.size;return this.set(r,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t,e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},T=(i,t,...e)=>{i.forEach(r=>{r[t](...e)})};var Ht=new DOMParser;var U=({callback:i=()=>{},scope:t=null,name:e="event"})=>({callback:i,scope:t,name:e}),A=class extends u{constructor(t="event"){super();this.name=t}},v=class extends u{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof A?e:(this.set(t,new A(t)),this.get(t))}on(t,e,r){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let n,a,s=typeof t=="object"&&!Array.isArray(t),l=s?e:r;return s||(a=e),Object.keys(t).forEach(o=>{s?(n=o,a=t[o]):n=t[o],this.getEvent(n).add(U({name:n,callback:a,scope:l}))},this),this}removeListener(t,e,r){let n=this.get(t);if(n instanceof A&&e){let a=U({name:t,callback:e,scope:r});n.forEach((s,l)=>{if(s.callback===a.callback&&s.scope===a.scope)return n.remove(l)})}return n}off(t,e,r){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let n,a,s=typeof t=="object"&&!Array.isArray(t),l=s?e:r;return s||(a=e),Object.keys(t).forEach(o=>{s?(n=o,a=t[o]):n=t[o],typeof a=="function"?this.removeListener(n,a,l):this.remove(n)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(r=>{let n=this.get(r);n instanceof A&&n.forEach(a=>{let{callback:s,scope:l}=a;s.apply(l,e)})},this),this)}clear(){return T(this,"clear"),super.clear(),this}};var ct=i=>typeof i=="string"?Array.from(document.querySelectorAll(i)):[i],ut=i=>[].concat(...i),S=i=>Array.isArray(i)?ut(i.map(S)):typeof i=="string"||i instanceof Node?ct(i):i instanceof NodeList||i instanceof HTMLCollection?Array.from(i):[],j=(i,t,e)=>typeof i=="function"?i.apply(e,t):i,q=(i,t,e)=>{let r,n,a={},s=Object.keys(i);for(let l=0,o=s.length;l<o;l++)r=s[l],n=i[r],a[r]=j(n,t,e);return a},V={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},mt=Object.keys(V),ht=i=>{let t=i.replace(/^ease-/,"");return mt.includes(t)?V[t]:i},G={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,extend:{}},gt=i=>{var a;let n=i,{options:t}=n,e=I(n,["options"]),r=t instanceof P?t.getOptions():Array.isArray(t)?(a=t==null?void 0:t[0])==null?void 0:a.getOptions():t;return Object.assign({},r,e)},P=class{constructor(t){this.options={};this.targets=[];this.properties={};this.animations=new u;this.keyframeEffects=new u;this.totalDuration=0;this.minDelay=0;this.maxSpeed=0;this.computedOptions=new u;this.emitter=new v;this.loop=this.loop.bind(this);try{this.options=Object.assign({},G,gt(t));let e=this.options,{loop:n,delay:a,speed:s,easing:l,endDelay:o,duration:b,direction:B,fillMode:X,onfinish:M,oncancel:k,keyframes:Y,autoplay:W,target:J,targets:Z,padEndDelay:Q,extend:tt}=e,O=I(e,["loop","delay","speed","easing","endDelay","duration","direction","fillMode","onfinish","oncancel","keyframes","autoplay","target","targets","padEndDelay","extend"]),et=new Set([...S(Z),...S(J)]);this.targets=[...et],this.properties=O;let C=[],R=[],d=this.targets.length,H=[];for(let p=0;p<d;p++){let g=this.targets[p],m=h({easing:typeof l=="string"?ht(l):l,iterations:n===!0?Infinity:n,direction:B,endDelay:o,duration:b,speed:s,delay:a,fill:X},tt);m=q(m,[p,d,g],this),H[p]=m;let c=+m.delay+ +m.duration*+m.iterations+ +m.endDelay;this.totalDuration<c&&(this.totalDuration=c),C.push(m.delay),R.push(m.speed)}for(let p=0;p<d;p++){let g=this.targets[p],r=H[p],{speed:m}=r,c=I(r,["speed"]),y,rt=+c.delay+ +c.duration*+c.iterations+ +c.endDelay;Q&&c.endDelay==0&&Math.abs(+c.iterations)!=Math.abs(Infinity)&&(c.endDelay=this.totalDuration-rt);let N=j(Y,[p,d,g],this);y=N.length?N:O,Array.isArray(y)||(y=q(y,[p,d,g],this));let D=new KeyframeEffect(g,y,c),f=new Animation(D,c.timeline);f.playbackRate=m,f.onfinish=()=>{typeof M=="function"&&M.call(this,g,p,d,f)},f.oncancel=()=>{typeof k=="function"&&k.call(this,g,p,d,f)},this.computedOptions.set(f,c),this.animations.set(g,f),this.keyframeEffects.set(f,D)}let it=new KeyframeEffect(this.mainElement,[{opacity:"0"},{opacity:"1"}],{duration:this.totalDuration,easing:"linear"});this.minDelay=Math.min(...C),this.maxSpeed=Math.max(...R),this.mainAnimation=new Animation(it,this.options.timeline),this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=()=>{let p=this.getPlayState();this.emit("finish",p,this),this.is(p)||this.emit("playstate-change",p,this),this.stopLoop()},this.mainAnimation.oncancel=()=>{let p=this.getPlayState();this.emit("cancel",p,this),this.is(p)||this.emit("playstate-change",p,this),this.stopLoop()},W?this.play():this.pause(),this.newPromise()}catch(n){this.emit("error",n)}}newPromise(){return this.promise=new Promise((t,e)=>{this.on("finish",()=>t([this])),this.on("error",r=>e(r))}),this.promise}then(t,e){return t=t==null?void 0:t.bind(this),e=e==null?void 0:e.bind(this),this.promise.then(t,e),this}catch(t){return t=t==null?void 0:t.bind(this),this.promise.catch(t),this}finally(t){return t=t==null?void 0:t.bind(this),this.promise.finally(t),this}loop(){this.stopLoop(),this.emit("update",this.getProgress(),this),this.animationFrame=window.requestAnimationFrame(this.loop)}stopLoop(){window.cancelAnimationFrame(this.animationFrame)}allAnimations(t){return this.animations.forEach(t),this}all(t){return t(this.mainAnimation,this.mainElement),this.allAnimations(t),this}beginEvent(){if(this.getProgress()==0){let t=window.setTimeout(()=>{this.emit("begin",this),t=window.clearTimeout(t)},this.minDelay)}}play(){let t=this.getPlayState();return this.beginEvent(),this.all(e=>e.play()),this.emit("play",t,this),this.is(t)||this.emit("playstate-change",t,this),this.loop(),this}pause(){let t=this.getPlayState();return this.all(e=>e.pause()),this.emit("pause",t,this),this.is(t)||this.emit("playstate-change",t,this),this.stopLoop(),this.animationFrame=void 0,this}reset(){return this.setProgress(0),this.beginEvent(),this.options.autoplay?this.play():this.pause(),this}cancel(){return this.all(t=>t.cancel()),this}finish(){return this.all(t=>t.finish()),this}stop(){for(this.cancel(),this.computedOptions.clear(),this.animations.clear(),this.keyframeEffects.clear();this.targets.length;)this.targets.pop();this.mainAnimation=void 0,this.mainElement=void 0,this.emit("stop"),this.emitter.clear()}getTargets(){return this.targets}getAnimation(t){return this.animations.get(t)}getKeyframeEffect(t){return this.keyframeEffects.get(t)}getTiming(t){var s,l,o;let e=t instanceof Animation?t:this.getAnimation(t),r=(s=this.computedOptions.get(e))!=null?s:{},n=(o=(l=this.getKeyframeEffect(e))==null?void 0:l.getTiming())!=null?o:{},a=this.getOptions();return h(h(h(h({},G),a),n),r)}getTotalDuration(){return this.totalDuration}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}getComputedOption(t){let e=t instanceof Animation?t:this.getAnimation(t);return this.computedOptions.get(e)}is(t){return this.getPlayState()==t}setCurrentTime(t){return this.all(e=>{e.currentTime=t}),this.emit("update",this.getProgress()),this}setProgress(t){let e=t/100*this.totalDuration;return this.setCurrentTime(e),this}setSpeed(t=1){return this.maxSpeed=t,this.all(e=>{e.playbackRate=t}),this}on(t,e,r){return this.emitter.on(t,e,r!=null?r:this),this}off(t,e,r){return this.emitter.off(t,e,r!=null?r:this),this}emit(t,...e){return this.emitter.emit(t,...e),this}toJSON(){return this.getOptions()}get[Symbol.toStringTag](){return"Animate"}},$=(i={})=>new P(i);(()=>{let i=".playback-demo",t=document.querySelector("#playstate-toggle"),e=document.querySelector("#progress"),r=document.querySelector("#progress-output"),n,a=document.querySelectorAll(`${i} .el`),s=$({target:a,transform:["translateX(0px)","translateX(300px)"],opacity(o,b){return[0,(o+1)/b]},fillMode:"both",easing:"out-cubic",loop:5,speed:1.5,direction:"alternate",delay(o){return(o+1)*500/2},duration(o){return(o+1)*500},padEndDelay:!0,autoplay:!0}),l=()=>{n=s.getPlayState(),t.setAttribute("data-playstate",n)};s.on("finish begin",l).on("update",o=>{e.value=""+o.toFixed(2),r.textContent=`${Math.round(o)}%`}),t.addEventListener("click",()=>{s.is("running")?s.pause():s.is("finished")?s.reset():s.play(),l()}),e.addEventListener("input",o=>{let b=+e.value;s.pause(),s.setProgress(b)}),e.addEventListener("change",()=>{n!=="paused"?s.play():s.pause(),l()})})();
//# sourceMappingURL=animate.js.map
