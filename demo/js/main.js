var Tt={wrapperAttr:"wrapper",noAjaxLinkAttr:"no-ajax-link",noPrefetchAttr:"no-prefetch",headers:[["x-partial","true"]],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",blockAttr:"block",timeout:3e4},It=t=>Object.assign({...Tt},t),St=(t,e,i=!0)=>{let{prefix:r}=t,s=`data${r?"-"+r:""}-${e}`;return i?`[${s}]`:s},g=(t,e,i=!0)=>{if(typeof e!="string")return t;let r=t[e];return typeof r=="string"?St(t,r,i):r},R=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},q=(t,e,...i)=>{t.forEach(r=>{r[e](...i)})},K=class{constructor(){}install(){}register(t,e){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=e,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=void 0,this.manager=void 0,this.app=void 0,this.config=void 0,this.emitter=void 0}},X=class extends R{constructor(t){super();this.app=t,this.config=t.config,this.emitter=t.emitter}set(t,e){return super.set(t,e),e.register(this,t),this}},m=(t=window.location.href)=>t instanceof URL?t:new URL(t,window.location.origin),S=t=>`${t.pathname}${t.hash}`,B=t=>t.toString().replace(/(\/#.*|\/|#.*)$/,""),Y=(t,e)=>{let i=m(t),r=m(e);return B(i)===B(r)},k=class extends K{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}},Pt=class extends X{constructor(t){super(t)}init(){return q(this,"init"),this}boot(){return q(this,"boot"),this}stop(){return q(this,"stop"),this}},P=(t=window.scrollX,e=window.scrollY)=>({x:t,y:e}),U=(t={url:S(m()),index:0,transition:"default",data:{scroll:P(),trigger:"HistoryManager"}})=>t,W=class extends k{constructor(){super(...arguments);this.pointer=-1}init(){this.states=[];let t=U();this.add(t,"replace")}get(t){return this.states[t]}add(t,e="push"){let i=U(t),r=this.length;this.states.push({...i}),this.pointer=r;let s={index:this.pointer,states:[...this.states]};return xt(e,i,s),this}remove(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this}replace(t){return this.states=t,this}set(t,e){return this.states[t]=e}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},xt=(t,e,i)=>{let r=S(m(e.url)),s=[i,"",r];if(window.history)switch(t){case"push":window.history.pushState.apply(window.history,s);break;case"replace":window.history.replaceState.apply(window.history,s);break}},kt=new DOMParser,V=class extends K{constructor(t=m(),e=document){super();this.url=t,typeof e=="string"?this.data=e:this.dom=e||document}build(){if(this.dom instanceof Node||(this.dom=kt.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:t,head:e,body:i}=this.dom;this.title=t,this.head=e,this.body=i,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=g(this.config,"wrapperAttr")}uninstall(){this.url=void 0,this.title=void 0,this.head=void 0,this.body=void 0,this.dom=void 0,this.wrapper=void 0,this.data=void 0,this.wrapperAttr=void 0}},J=class extends k{constructor(){super(...arguments);this.loading=new R}install(){var e;this.pages=new X(this.app),this.maxPages=(e=this.config.maxPages)!=null?e:5;let t=m().pathname;this.set(t,new V),t=void 0}get(t){return this.pages.get(t)}add(t){return this.pages.add(t),this}set(t,e){return this.pages.set(t,e),this}remove(t){return this.pages.remove(t),this}has(t){return this.pages.has(t)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(t=m()){let e=m(t),i=e.pathname,r,s;if(this.has(i))return r=this.get(i),Promise.resolve(r);this.loading.has(i)?s=this.loading.get(i):(s=this.request(i),this.loading.set(i,s));let n=await s;if(this.loading.remove(i),r=new V(e,n),this.set(i,r),this.size>this.maxPages){let o=m(),a=this.keys(),h=Y(o,a[0])?a[1]:a[0],c=this.get(h);c.unregister(),c=void 0,a=void 0,o=void 0,h=void 0}return r}async request(t){let e=new Headers(g(this.config,"headers")),i=window.setTimeout(()=>{throw window.clearTimeout(i),"Request Timed Out!"},g(this.config,"timeout"));try{let r=await fetch(t,{mode:"same-origin",method:"GET",headers:e,cache:"default",credentials:"same-origin"});if(window.clearTimeout(i),r.status>=200&&r.status<300)return await r.text();let s=new Error(r.statusText||""+r.status);throw s}catch(r){throw window.clearTimeout(i),r}}},Q=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},Rt=(t,e,...i)=>{t.forEach(r=>{r[e](...i)})},Z=({callback:t=()=>{},scope:e=null,name:i="event"})=>({callback:t,scope:e,name:i}),L=class extends Q{constructor(t="event"){super();this.name=t}},Lt=class extends Q{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof L?e:(this.set(t,new L(t)),this.get(t))}newListener(t,e,i){let r=this.getEvent(t);return r.add(Z({name:t,callback:e,scope:i})),r}on(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],this.newListener(r,s,o)},this),this}removeListener(t,e,i){let r=this.get(t);if(r instanceof L&&e){let s=Z({name:t,callback:e,scope:i});r.forEach((n,o)=>{if(n.callback===s.callback&&n.scope===s.scope)return r.remove(o)})}return r}off(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],typeof s=="function"?this.removeListener(r,s,o):this.remove(r)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(i=>{let r=this.get(i);r instanceof L&&r.forEach(s=>{let{callback:n,scope:o}=s;n.apply(o,e)})},this),this)}clear(){return Rt(this,"clear"),super.clear(),this}},tt=(t,e=window.location.hash)=>{try{let i=e[0]=="#"?e:m(e).hash;if(i.length>1){let r=document.getElementById(i.slice(1));if(r)return P(r.offsetLeft,r.offsetTop)}}catch(i){console.warn("[hashAction] error",i)}return t!=null?t:P(0,0)},Mt={name:"default",scrollable:!0,out({done:t}){t()},in({scroll:t,done:e}){window.scroll(t.x,t.y),e()}},et=class extends k{constructor(t){super();this._arg=t}install(){var e;super.install();let t=this._arg&&this._arg.length?this._arg:(e=g(this.config,"transitions"))!=null?e:[];t=[["default",Mt]].concat(t),this.transitions=new R(t)}get(t){return this.transitions.get(t)}set(t,e){return this.transitions.set(t,e),this}add(t){return this.transitions.add(t),this}has(t){return this.transitions.has(t)}async animate(t,e){let i=this.transitions.get(t),r=e.scroll,s=e.ignoreHashAction;if(!("wrapper"in e.oldPage)||!("wrapper"in e.newPage))throw`[Page] either oldPage or newPage aren't instances of the Page Class.
 ${{newPage:e.newPage,oldPage:e.oldPage}}`;document.title=""+e.newPage.title;let n=e.oldPage.wrapper,o=e.newPage.wrapper;if(!(n instanceof Node)||!(o instanceof Node))throw`[Wrapper] the wrapper from the ${o instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${g(this.config,"wrapperAttr")}.`;return i.init&&(i==null||i.init(e)),this.emitter.emit("BEFORE_TRANSITION_OUT"),i.out&&await new Promise(a=>{let h=i.out.call(i,{...e,from:e.oldPage,trigger:e.trigger,done:a});h==null||h.then(a)}),this.emitter.emit("AFTER_TRANSITION_OUT"),await new Promise(a=>{n.insertAdjacentElement("beforebegin",o),this.emitter.emit("CONTENT_INSERT"),!s&&!/back|popstate|forward/.test(e.trigger)&&(r=tt(r)),a()}),await new Promise(a=>{n.remove(),n=void 0,o=void 0,this.emitter.emit("CONTENT_REPLACED"),a()}),this.emitter.emit("BEFORE_TRANSITION_IN"),i.in&&await new Promise(async a=>{let h=i.in.call(i,{...e,from:e.oldPage,to:e.newPage,trigger:e.trigger,scroll:r,done:a});h==null||h.then(a)}),this.emitter.emit("AFTER_TRANSITION_IN"),i}},it=class{constructor(t={}){this.register(t)}register(t={}){this.config=It(t),this.emitter=new Lt,this.services=new Pt(this);let e=(()=>{document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),this.emitter.emit("READY ready")}).bind(this);return document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),this}get(t){return this.services.get(t)}set(t,e){return this.services.set(t,e),this}add(t){return this.services.add(t),this}boot(){return this.services.init(),this.services.boot(),this}stop(){return this.services.stop(),this.emitter.clear(),this}on(t,e){return this.emitter.on(t,e,this),this}off(t,e){return this.emitter.off(t,e,this),this}emit(t,...e){return this.emitter.emit(t,...e),this}},rt=class extends k{install(){var t,e,i,r,s,n;super.install(),this.ignoreURLs=(t=g(this.config,"ignoreURLs"))!=null?t:[],this.prefetchIgnore=(e=g(this.config,"prefetchIgnore"))!=null?e:!1,this.stopOnTransitioning=(i=g(this.config,"stopOnTransitioning"))!=null?i:!1,this.stickyScroll=(r=g(this.config,"stickyScroll"))!=null?r:!1,this.forceOnError=(s=g(this.config,"forceOnError"))!=null?s:!1,this.ignoreHashAction=(n=g(this.config,"ignoreHashAction"))!=null?n:!1}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),super.boot()}getTransitionName(t){if(!t||!t.getAttribute)return null;let e=t.getAttribute(g(this.config,"transitionAttr",!1));return typeof e=="string"?e:null}validLink(t,e,i){let r=!window.history.pushState,s=!t||!i,n=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey,o=t.hasAttribute("target")&&t.target==="_blank",a=t.protocol!==location.protocol||t.hostname!==location.hostname,h=typeof t.getAttribute("download")=="string",c=t.hasAttribute(g(this.config,"preventSelfAttr",!1)),w=Boolean(t.closest(g(this.config,"preventAllAttr"))),v=c&&w,y=S(m())===S(m(i));return!(s||r||n||o||a||h||v||y)}getHref(t){return t&&t.tagName&&t.tagName.toLowerCase()==="a"&&typeof t.href=="string"?t.href:null}getLink(t){let e=t.target,i=this.getHref(e);for(;e&&!i;)e=e.parentNode,i=this.getHref(e);return!e||!this.validLink(e,t,i)?void 0:e}onClick(t){let e=this.getLink(t);if(!e)return;if(this.isTransitioning&&this.stopOnTransitioning){t.preventDefault(),t.stopPropagation();return}let i=this.getHref(e);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:i,trigger:e,event:t})}getDirection(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"}force(t){window.location.assign(t)}go({href:t,trigger:e="HistoryManager",event:i}){if(this.isTransitioning&&this.stopOnTransitioning||!(this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager"))){this.force(t);return}let r=this.manager.get("HistoryManager"),s=P(0,0),n=r.current,o=n.url;if(Y(o,t))return;let a;if(i&&i.state){this.emitter.emit("POPSTATE",i);let{state:h}=i,{index:c}=h,w=n.index,v=w-c,y=r.get(r.pointer);a=y.transition,s=y.data.scroll,r.replace(h.states),r.pointer=c,e=this.getDirection(v),this.emitter.emit(e==="back"?"POPSTATE_BACK":"POPSTATE_FORWARD",i)}else{a=this.getTransitionName(e),s=P();let h=U({url:t,transition:a,data:{scroll:s}});!this.stickyScroll&&(s=P(0,0)),r.add(h),this.emitter.emit("HISTORY_NEW_ITEM",i)}return i&&(i.stopPropagation(),i.preventDefault()),this.emitter.emit("GO",i),this.load({oldHref:o,href:t,trigger:e,transitionName:a,scroll:s})}async load({oldHref:t,href:e,trigger:i,transitionName:r="default",scroll:s={x:0,y:0}}){try{let n=this.manager.get("PageManager"),o,a;this.emitter.emit("NAVIGATION_START",{oldHref:t,href:e,trigger:i,transitionName:r});try{this.transitionStart(),a=await n.load(t),!(a.dom instanceof Element)&&a.build(),this.emitter.emit("PAGE_LOADING",{href:e,oldPage:a,trigger:i}),o=await n.load(e),await o.build(),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:o,oldPage:a,trigger:i})}catch(h){throw`[PJAX] page load error: ${h}`}try{let h=this.manager.get("TransitionManager");this.emitter.emit("TRANSITION_START",r);let c=await h.animate(h.has(r)?r:"default",{oldPage:a,newPage:o,trigger:i,scroll:s,ignoreHashAction:this.ignoreHashAction});c.scrollable||(!this.ignoreHashAction&&!/back|popstate|forward/.test(i)&&(s=tt(s)),window.scroll(s.x,s.y)),this.emitter.emit("TRANSITION_END",{transition:c})}catch(h){throw`[PJAX] transition error: ${h}`}this.emitter.emit("NAVIGATION_END",{oldPage:a,newPage:o,trigger:i,transitionName:r})}catch(n){this.forceOnError?this.force(e):console.warn(n)}finally{this.transitionStop()}}ignoredURL({pathname:t}){return this.ignoreURLs.length&&this.ignoreURLs.some(e=>typeof e=="string"?e===t:e.exec(t)!==null)}onHover(t){let e=this.getLink(t);if(!e||!this.manager.has("PageManager"))return;let i=this.manager.get("PageManager"),r=m(this.getHref(e)),s=r.pathname;if(this.ignoredURL(r)||i.has(s))return;this.emitter.emit("ANCHOR_HOVER HOVER",t);try{i.load(r)}catch(n){console.warn("[PJAX] prefetch error,",n)}}onStateChange(t){this.go({href:window.location.href,trigger:"popstate",event:t})}initEvents(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}},st=class extends k{constructor(t=[]){super();this.routes=new R;for(let e of t)this.add(e)}add({path:t,method:e}){let i=this.parse(t);return this.routes.set(i,e),this}parsePath(t){if(typeof t=="string")return new RegExp(t,"i");if(t instanceof RegExp||typeof t=="boolean")return t;throw"[Router] only regular expressions, strings and booleans are accepted as paths."}isPath(t){return typeof t=="string"||t instanceof RegExp||typeof t=="boolean"}parse(t){let e=t,i={from:/(.*)/g,to:/(.*)/g};if(this.isPath(t))i={from:!0,to:t};else if(this.isPath(e.from)&&this.isPath(e.to))i=e;else throw"[Router] path is neither a string, regular expression, or a { from, to } object.";let{from:r,to:s}=i;return{from:this.parsePath(r),to:this.parsePath(s)}}route(){if(this.manager.has("HistoryManager")){let t=this.manager.get("HistoryManager"),e=S(m((t.length>1?t.previous:t.current).url)),i=S(m());this.routes.forEach((r,s)=>{let n=s.from,o=s.to;if(typeof n=="boolean"&&typeof o=="boolean")throw`[Router] path ({ from: ${n}, to: ${o} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let a=n,h=o;n instanceof RegExp&&n.test(e)&&(a=n.exec(e)),o instanceof RegExp&&o.test(i)&&(h=o.exec(i)),(Array.isArray(h)&&Array.isArray(a)||Array.isArray(h)&&typeof a=="boolean"&&a||Array.isArray(a)&&typeof h=="boolean"&&h)&&r({from:a,to:h,path:{from:e,to:i}})})}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}},nt=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},Ot=(t,e,...i)=>{t.forEach(r=>{r[e](...i)})},at=({callback:t=()=>{},scope:e=null,name:i="event"})=>({callback:t,scope:e,name:i}),M=class extends nt{constructor(t="event"){super();this.name=t}},Ht=class extends nt{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof M?e:(this.set(t,new M(t)),this.get(t))}newListener(t,e,i){let r=this.getEvent(t);return r.add(at({name:t,callback:e,scope:i})),r}on(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],this.newListener(r,s,o)},this),this}removeListener(t,e,i){let r=this.get(t);if(r instanceof M&&e){let s=at({name:t,callback:e,scope:i});r.forEach((n,o)=>{if(n.callback===s.callback&&n.scope===s.scope)return r.remove(o)})}return r}off(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],typeof s=="function"?this.removeListener(r,s,o):this.remove(r)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(i=>{let r=this.get(i);r instanceof M&&r.forEach(s=>{let{callback:n,scope:o}=s;n.apply(o,e)})},this),this)}clear(){return Ot(this,"clear"),super.clear(),this}},Ct=t=>typeof t=="string"?Array.from(document.querySelectorAll(t)):[t],Nt=t=>Array.isArray(t)?t:typeof t=="string"||t instanceof Node?Ct(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[],ot=(t,e)=>typeof t=="function"?t(...e):t,ht=(t,e)=>{let i,r,s={},n=Object.keys(t);for(let o=0,a=n.length;o<a;o++)i=n[o],r=t[i],s[i]=ot(r,e);return s},zt={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},Dt=t=>/^(ease|in|out)/.test(t)?zt[t]:t,_t={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},lt=class{constructor(t={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new Ht;let{options:e,...i}=t;this.options=Object.assign({},_t,e instanceof lt?e.getOptions():e,i),this.loop=this.loop.bind(this);let{loop:r,delay:s,speed:n,easing:o,endDelay:a,duration:h,direction:c,fillMode:w,onfinish:v,target:y,keyframes:d,autoplay:_,...F}=this.options;this.mainElement=document.createElement("div"),this.targets=Nt(y),this.properties=F;let b=this.targets.length,A;for(let p=0;p<b;p++){let f=this.targets[p],u={easing:Dt(o),iterations:r===!0?Infinity:r,direction:c,endDelay:a,duration:h,delay:s,fill:w},T=ot(d,[p,b,f]);A=T.length?T:this.properties,u=ht(u,[p,b,f]),T.length>0||(A=ht(A,[p,b,f]));let x=u.delay+u.duration*u.iterations+u.endDelay;this.duration<x&&(this.duration=x);let I=f.animate(A,u);I.onfinish=()=>{v(f,p,b,I)},this.animations.set(f,I)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(n),_?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((t,e)=>{try{this.finish=()=>(this.emit("finish",this.options),t(this.options))}catch(i){e(i)}})}getTargets(){return this.targets}then(t,e){return t=t==null?void 0:t.bind(this),e=e==null?void 0:e.bind(this),this.promise.then(t,e),this}catch(t){return t=t==null?void 0:t.bind(this),this.promise.catch(t),this}finally(t){return t=t==null?void 0:t.bind(this),this.promise.finally(t),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(t,e,i){return this.emitter.on(t,e,i!=null?i:this),this}off(t,e,i){return this.emitter.off(t,e,i!=null?i:this),this}emit(t,...e){return this.emitter.emit(t,...e),this}getAnimation(t){return this.animations.get(t)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(t=>{t.playState!=="finished"&&t.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(t=>{t.playState!=="finished"&&t.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach(e=>{e.currentTime=t}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t/100*this.duration,this.animations.forEach(e=>{e.currentTime=t*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach(e=>{e.playbackRate=t}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(t=>{t.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},ct=(t={})=>new lt(t);var O=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},H=class{constructor(){}install(){}register(e,i){return this.manager=e,this.app=e.app,this.config=e.config,this.emitter=e.emitter,this.key=i,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=void 0,this.manager=void 0,this.app=void 0,this.config=void 0,this.emitter=void 0}};var E=class extends H{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}};var ge=new DOMParser;var fe=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}};var mt=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size,i=e;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=(...i)=>{},e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},Gt=(t,e,...i)=>{t.forEach(r=>{r[e](...i)})},gt=({callback:t=()=>{},scope:e=null,name:i="event"})=>({callback:t,scope:e,name:i}),N=class extends mt{constructor(t="event"){super();this.name=t}},$t=class extends mt{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof N?e:(this.set(t,new N(t)),this.get(t))}newListener(t,e,i){let r=this.getEvent(t);return r.add(gt({name:t,callback:e,scope:i})),r}on(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],this.newListener(r,s,o)},this),this}removeListener(t,e,i){let r=this.get(t);if(r instanceof N&&e){let s=gt({name:t,callback:e,scope:i});r.forEach((n,o)=>{if(n.callback===s.callback&&n.scope===s.scope)return r.remove(o)})}return r}off(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,n=typeof t=="object"&&!Array.isArray(t),o=n?e:i;return n||(s=e),Object.keys(t).forEach(a=>{n?(r=a,s=t[a]):r=t[a],typeof s=="function"?this.removeListener(r,s,o):this.remove(r)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(i=>{let r=this.get(i);r instanceof N&&r.forEach(s=>{let{callback:n,scope:o}=s;n.apply(o,e)})},this),this)}clear(){return Gt(this,"clear"),super.clear(),this}},Kt=t=>typeof t=="string"?Array.from(document.querySelectorAll(t)):[t],Xt=t=>Array.isArray(t)?t:typeof t=="string"||t instanceof Node?Kt(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[],dt=(t,e)=>typeof t=="function"?t(...e):t,ft=(t,e)=>{let i,r,s={},n=Object.keys(t);for(let o=0,a=n.length;o<a;o++)i=n[o],r=t[i],s[i]=dt(r,e);return s},Bt={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},Yt=t=>/^(ease|in|out)/.test(t)?Bt[t]:t,Wt={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},yt=class{constructor(t={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new $t;let{options:e,...i}=t;this.options=Object.assign({},Wt,e instanceof yt?e.getOptions():e,i),this.loop=this.loop.bind(this);let{loop:r,delay:s,speed:n,easing:o,endDelay:a,duration:h,direction:c,fillMode:w,onfinish:v,target:y,keyframes:d,autoplay:_,...F}=this.options;this.mainElement=document.createElement("div"),this.targets=Xt(y),this.properties=F;let b=this.targets.length,A;for(let p=0;p<b;p++){let f=this.targets[p],u={easing:Yt(o),iterations:r===!0?Infinity:r,direction:c,endDelay:a,duration:h,delay:s,fill:w},T=dt(d,[p,b,f]);A=T.length?T:this.properties,u=ft(u,[p,b,f]),T.length>0||(A=ft(A,[p,b,f]));let x=u.delay+u.duration*u.iterations+u.endDelay;this.duration<x&&(this.duration=x);let I=f.animate(A,u);I.onfinish=()=>{v(f,p,b,I)},this.animations.set(f,I)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(n),_?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((t,e)=>{try{this.finish=()=>(this.emit("finish",this.options),t(this.options))}catch(i){e(i)}})}getTargets(){return this.targets}then(t,e){return t=t==null?void 0:t.bind(this),e=e==null?void 0:e.bind(this),this.promise.then(t,e),this}catch(t){return t=t==null?void 0:t.bind(this),this.promise.catch(t),this}finally(t){return t=t==null?void 0:t.bind(this),this.promise.finally(t),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(t,e,i){return this.emitter.on(t,e,i!=null?i:this),this}off(t,e,i){return this.emitter.off(t,e,i!=null?i:this),this}emit(t,...e){return this.emitter.emit(t,...e),this}getAnimation(t){return this.animations.get(t)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(t=>{t.playState!=="finished"&&t.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(t=>{t.playState!=="finished"&&t.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach(e=>{e.currentTime=t}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t/100*this.duration,this.animations.forEach(e=>{e.currentTime=t*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach(e=>{e.playbackRate=t}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(t=>{t.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},l=(t={})=>new yt(t);var j=class extends E{constructor(){super(...arguments);this.minimalDuration=1e3}init(){super.init(),this.rootElement=document.getElementById("splashscreen"),this.rootElement&&(this.innerEl=this.rootElement.querySelector(".splashscreen-inner"),this.bgEl=this.rootElement.querySelector(".splashscreen-bg"),this.spinnerEl=[...this.rootElement.querySelectorAll(".spinner")]),this.rootElement.style.visibility="visible",this.rootElement.style.pointerEvents="auto"}boot(){this.rootElement&&this.hide()}async hide(){await new Promise(e=>{window.setTimeout(()=>{this.emitter.emit("BEFORE_SPLASHSCREEN_HIDE"),e()},this.minimalDuration)}),await new Promise(async e=>{l({target:this.innerEl,opacity:[1,0],autoplay:!0,duration:500,onfinish(i){i.style.opacity="0"}}).then(function(){this.stop()}),this.emitter.emit("START_SPLASHSCREEN_HIDE"),await this.show(),e()})}async show(){let e=l({target:this.rootElement,transform:["translateY(0%)","translateY(100%)"],duration:1200,easing:"in-out-cubic"});await e,e.stop(),this.rootElement.style.transform="translateY(100%)",this.rootElement.style.visibility="hidden",this.rootElement.style.pointerEvents="none"}},G=class extends E{init(){super.init(),this.elements=[...document.querySelectorAll(".intro-animation")]}newPage(){this.init(),this.prepareToShow()}initEvents(){this.emitter.on("BEFORE_SPLASHSCREEN_HIDE",this.prepareToShow,this),this.emitter.on("CONTENT_REPLACED",this.newPage,this),this.emitter.on("START_SPLASHSCREEN_HIDE BEFORE_TRANSITION_IN",this.show,this)}stopEvents(){this.emitter.off("BEFORE_SPLASHSCREEN_HIDE",this.prepareToShow,this),this.emitter.off("CONTENT_REPLACED",this.newPage,this),this.emitter.off("START_SPLASHSCREEN_HIDE BEFORE_TRANSITION_IN",this.show,this)}stop(){requestAnimationFrame(()=>{for(let e of this.elements)e.style.transform="translateY(0px)",e.style.opacity="1"}),super.stop()}prepareToShow(){requestAnimationFrame(()=>{for(let e of this.elements)e.style.transform="translateY(200px)",e.style.opacity="0"})}async show(){let e=l({target:this.elements,keyframes:[{transform:"translateY(200px)",opacity:0},{transform:"translateY(0px)",opacity:1}],delay(r){return 300*(r+1)},onfinish(r){requestAnimationFrame(()=>{r.style.transform="translateY(0px)",r.style.opacity="1"})},easing:"out-cubic",duration:650}),i=await e;return e.stop(),i}},bt={name:"default",duration:500,scrollable:!0,out({from:t}){let{duration:e}=this,i=t.wrapper;return l({target:i,opacity:[1,0],duration:e}).on("finish",function(){this.stop()})},in({to:t,scroll:e}){let{duration:i}=this,r=t.wrapper;return window.scroll(e.x,e.y),l({target:r,opacity:[0,1],duration:i}).then(function(){this.stop()})}},wt={name:"big",delay:200,durationPerAnimation:700,scrollable:!0,init(){this.mainElement=document.getElementById("big-transition"),this.spinnerElement=this.mainElement.querySelector(".spinner"),this.horizontalElements=[...this.mainElement.querySelector("#big-transition-horizontal").querySelectorAll("div")],this.maxLength=this.horizontalElements.length},out({from:t,scroll:e}){let{durationPerAnimation:i,delay:r}=this,s=t.wrapper;window.scroll(e.x,e.y);let n=Object.assign({},s.style);return new Promise(async o=>{this.mainElement.style.opacity="1",this.mainElement.style.visibility="visible";let a=l({target:s,opacity:[1,0],duration:i,onfinish(d){d.style.opacity="0"}});a.then(function(){this.stop()});let h=l({target:this.horizontalElements,keyframes:[{transform:"scaleX(0)"},{transform:"scaleX(1)"}],delay(d){return r*(d+1)},onfinish(d){d.style.transform="scaleX(1)"},easing:"out-cubic",duration:500});await h,s.style.opacity="1",Object.assign(s.style,n),this.spinnerElement.style.visibility="visible";let c=500,w=l({target:this.spinnerElement,opacity:[0,1],duration:c,onfinish(d){d.style.opacity="1"}}),v=await w,y=l({options:v,opacity:[1,0],onfinish(d){d.style.opacity="0"},delay:1500});await y,this.spinnerElement.style.visibility="hidden",w.stop(),y.stop(),o()})},in({to:t,scroll:e}){let{durationPerAnimation:i,delay:r}=this,s=t.wrapper;return window.scroll(e.x,e.y),new Promise(async n=>{let o=l({target:s,opacity:[0,1],duration:i}).then(()=>{o.stop()}),a=l({target:this.horizontalElements,keyframes:[{transform:"scaleX(1)"},{transform:"scaleX(0)"}],delay(h){return r*(h+1)},onfinish(h){h.style.transform="scaleX(0)"},easing:"out-cubic",duration:500});await a,this.mainElement.style.opacity="0",this.mainElement.style.visibility="hidden",a.stop(),n()})}},z={name:"slide",duration:500,direction:"right",scrollable:!0,init(t){let e=t.trigger;e instanceof Node&&e.hasAttribute("data-direction")?this.direction=e.getAttribute("data-direction"):this.direction="right"},out({from:t}){let{duration:e,direction:i}=this,r=t.wrapper;return l({target:r,keyframes:[{transform:"translateX(0%)",opacity:1},{transform:`translateX(${i==="left"?"-":""}25%)`,opacity:0}],duration:e,easing:"in-quint"}).then(function(){this.stop()})},in({to:t,scroll:e}){let{duration:i}=this,r=t.wrapper;return window.scroll(e.x,e.y),l({target:r,keyframes:[{transform:`translateX(${this.direction==="right"?"-":""}25%)`,opacity:0},{transform:"translateX(0%)",opacity:1}],duration:i,easing:"out-quint"}).then(function(){this.stop()})}},Et={...z,name:"slide-left",direction:"left"},vt={...z,name:"slide-right",direction:"right"},At,D,Vt,$=new it;$.add(new G).add(At=new j).set("HistoryManager",new W).set("PageManager",new J).set("TransitionManager",new et([["default",bt],["BigTransition",wt],["Slide",z],["SlideLeft",Et],["SlideRight",vt]])).set("router",D=new st).add(Vt=new rt);try{D=$.get("router");let t=document.querySelectorAll(".navbar .nav-link");for(let e of t){let i=e;D.add({path:i.getAttribute("data-path")||i.pathname,method(){let r=i.classList.contains("active");r||i.classList.add("active");for(let s of t)s!==i&&s.classList.remove("active")}})}D.add({path:/\/index.html/,method(){let e=ct({target:".div",keyframes(s,n){return[{transform:"translateX(0px)",opacity:0},{transform:"translateX(300px)",opacity:(s+1)/n}]},easing:"out-cubic",duration(s){return(s+1)*500},onfinish(s,n,o){s.style.opacity=`${(n+1)/o}`,s.style.transform="translateX(300px)"},loop:5,speed:1,direction:"alternate",delay(s){return s*200},autoplay:!0});e.then(()=>{let s=document.querySelector(".info"),n="Done.";s.textContent=n,s.style.color="red",console.log(n)});let i=document.querySelector(".progress");i&&e.on("change",()=>{i.textContent=`${Math.round(e.getProgress()*100)}%`});let r=document.querySelector(".animation-container");r&&r.addEventListener("click",()=>{let s=e.getPlayState();s==="running"?e.pause():s==="finished"?e.reset():e.play(),console.log(s)})}}),$.boot()}catch(t){At.show(),console.warn("[App] boot failed,",t)}
//# sourceMappingURL=main.js.map
