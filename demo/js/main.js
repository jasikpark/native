var Rt=Object.defineProperty,Ct=Object.defineProperties;var Ht=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var mt=(n,t,e)=>t in n?Rt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,h=(n,t)=>{for(var e in t||(t={}))pt.call(t,e)&&mt(n,e,t[e]);if(D)for(var e of D(t))ct.call(t,e)&&mt(n,e,t[e]);return n},L=(n,t)=>Ct(n,Ht(t));var _=(n,t)=>{var e={};for(var i in n)pt.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&D)for(var i of D(n))t.indexOf(i)<0&&ct.call(n,i)&&(e[i]=n[i]);return e};var Nt={wrapperAttr:"wrapper",noAjaxLinkAttr:"no-ajax-link",noPrefetchAttr:"no-prefetch",headers:[["x-partial","true"]],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",blockAttr:"block",timeout:3e4,maxPages:5,resizeDelay:100},ut=n=>Object.assign(h({},Nt),n),Dt=(n,t,e=!0)=>{let{prefix:i}=n,r=`data${i?"-"+i:""}-${t}`;return e?`[${r}]`:r},m=(n,t,e=!0)=>{if(typeof t!="string")return n;let i=n[t];return typeof i=="string"?Dt(n,i,e):i};var d=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let i=this.size;return this.set(i,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t,e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},k=(n,t,...e)=>{n.forEach(i=>{i[t](...e)})};var O=class{constructor(){}install(){}register(t,e){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=e,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=void 0,this.manager=void 0,this.app=void 0,this.config=void 0,this.emitter=void 0}},R=class extends d{constructor(t){super();this.app=t,this.config=t.config,this.emitter=t.emitter}set(t,e){return super.set(t,e),e.register(this,t),this}};var u=(n=window.location.href)=>n instanceof URL?n:new URL(n,window.location.origin),v=n=>{let t=u(n);return`${t.pathname}${t.hash}`};var ht=n=>u(n).toString().replace(/(\/#.*|\/|#.*)$/,""),K=(n,t)=>ht(n)===ht(t);var b=class extends O{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}},j=class extends R{constructor(t){super(t)}init(){return k(this,"init"),this}boot(){return k(this,"boot"),this}stop(){return k(this,"stop"),this}};var I=(n=window.scrollX,t=window.scrollY)=>({x:n,y:t}),z=(n={url:v(u()),index:0,transition:"default",data:{scroll:I(),trigger:"HistoryManager"}})=>n,G=class extends b{constructor(){super(...arguments);this.pointer=-1}init(){this.states=[];let t=z();this.add(t,"replace")}get(t){return this.states[t]}add(t,e="push"){let i=z(t),r=this.length;this.states.push(h({},i)),this.pointer=r;let s={index:this.pointer,states:[...this.states]};return _t(e,i,s),this}remove(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this}replace(t){return this.states=t,this}set(t,e){return this.states[t]=e}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},_t=(n,t,e)=>{let i=v(t.url),r=[e,"",i];if(window.history)switch(n){case"push":window.history.pushState.apply(window.history,r);break;case"replace":window.history.replaceState.apply(window.history,r);break}};var Kt=new DOMParser,V=class extends O{constructor(t=u(),e=document){super();this.url=t,typeof e=="string"?this.data=e:this.dom=e||document}build(){if(this.dom instanceof Node||(this.dom=Kt.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:t,head:e,body:i}=this.dom;this.title=t,this.head=e,this.body=i,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=m(this.config,"wrapperAttr")}uninstall(){this.url=void 0,this.title=void 0,this.head=void 0,this.body=void 0,this.dom=void 0,this.wrapper=void 0,this.data=void 0,this.wrapperAttr=void 0}},$=class extends b{constructor(){super(...arguments);this.loading=new d}install(){this.pages=new R(this.app);let t=u().pathname;this.set(t,new V),t=void 0}get(t){return this.pages.get(t)}add(t){return this.pages.add(t),this}set(t,e){return this.pages.set(t,e),this}remove(t){return this.pages.remove(t),this}has(t){return this.pages.has(t)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(t=u()){let e=u(t),i=e.pathname,r,s;if(this.has(i))return r=this.get(i),Promise.resolve(r);this.loading.has(i)?s=this.loading.get(i):(s=this.request(i),this.loading.set(i,s));let o=await s;if(this.loading.remove(i),r=new V(e,o),this.set(i,r),this.size>m(this.config,"maxPages")){let l=u(),a=this.keys(),p=K(l,a[0])?a[1]:a[0],g=this.get(p);g.unregister(),g=void 0,a=void 0,l=void 0,p=void 0}return r}async request(t){let e=new Headers(m(this.config,"headers")),i=window.setTimeout(()=>{throw window.clearTimeout(i),"Request Timed Out!"},m(this.config,"timeout"));try{let r=await fetch(t,{mode:"same-origin",method:"GET",headers:e,cache:"default",credentials:"same-origin"});if(window.clearTimeout(i),r.status>=200&&r.status<300)return await r.text();throw new Error(r.statusText||""+r.status)}catch(r){throw window.clearTimeout(i),r}}};var X=(n,t=window.location.hash)=>{try{let e=t[0]=="#"?t:u(t).hash;if(e.length>1){let i=document.getElementById(e.slice(1));if(i){let{left:r,top:s}=i.getBoundingClientRect(),o=window.scrollX,l=window.scrollY,a=r+o,p=s+l;return console.log(a,p),I(a,p)}}}catch(e){console.warn("[hashAction] error",e)}return n!=null?n:I(0,0)},zt={name:"default",scrollable:!0,out({done:n}){n()},in({scroll:n,done:t}){window.scroll(n.x,n.y),t()}},B=class extends b{constructor(t){super();this._arg=t}install(){var e;super.install();let t=this._arg&&this._arg.length?this._arg:(e=m(this.config,"transitions"))!=null?e:[];t=[["default",zt]].concat(t),this.transitions=new d(t)}get(t){return this.transitions.get(t)}set(t,e){return this.transitions.set(t,e),this}add(t){return this.transitions.add(t),this}has(t){return this.transitions.has(t)}async animate(t,e){let i=this.transitions.get(t),r=e.scroll,s=e.ignoreHashAction;if(!("wrapper"in e.oldPage)||!("wrapper"in e.newPage))throw`[Page] either oldPage or newPage aren't instances of the Page Class.
 ${{newPage:e.newPage,oldPage:e.oldPage}}`;document.title=""+e.newPage.title;let o=e.oldPage.wrapper,l=e.newPage.wrapper;if(!(o instanceof Node)||!(l instanceof Node))throw`[Wrapper] the wrapper from the ${l instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${m(this.config,"wrapperAttr")}.`;return i.init&&(i==null||i.init(e)),this.emitter.emit("BEFORE_TRANSITION_OUT"),i.out&&await new Promise(a=>{let p=i.out.call(i,L(h({},e),{from:e.oldPage,trigger:e.trigger,done:a}));p==null||p.then(a)}),this.emitter.emit("AFTER_TRANSITION_OUT"),await new Promise(a=>{o.insertAdjacentElement("beforebegin",l),this.emitter.emit("CONTENT_INSERT"),!s&&!/back|popstate|forward/.test(e.trigger)&&(r=X(r)),a()}),await new Promise(a=>{o.remove(),o=void 0,l=void 0,this.emitter.emit("CONTENT_REPLACED"),a()}),this.emitter.emit("BEFORE_TRANSITION_IN"),i.in&&await new Promise(async a=>{let p=i.in.call(i,L(h({},e),{from:e.oldPage,to:e.newPage,trigger:e.trigger,scroll:r,done:a}));p==null||p.then(a)}),this.emitter.emit("AFTER_TRANSITION_IN"),i}};var gt=({callback:n=()=>{},scope:t=null,name:e="event"})=>({callback:n,scope:t,name:e}),C=class extends d{constructor(t="event"){super();this.name=t}},H=class extends d{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof C?e:(this.set(t,new C(t)),this.get(t))}on(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,o=typeof t=="object"&&!Array.isArray(t),l=o?e:i;return o||(s=e),Object.keys(t).forEach(a=>{o?(r=a,s=t[a]):r=t[a],this.getEvent(r).add(gt({name:r,callback:s,scope:l}))},this),this}removeListener(t,e,i){let r=this.get(t);if(r instanceof C&&e){let s=gt({name:t,callback:e,scope:i});r.forEach((o,l)=>{if(o.callback===s.callback&&o.scope===s.scope)return r.remove(l)})}return r}off(t,e,i){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,o=typeof t=="object"&&!Array.isArray(t),l=o?e:i;return o||(s=e),Object.keys(t).forEach(a=>{o?(r=a,s=t[a]):r=t[a],typeof s=="function"?this.removeListener(r,s,l):this.remove(r)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(i=>{let r=this.get(i);r instanceof C&&r.forEach(s=>{let{callback:o,scope:l}=s;o.apply(l,e)})},this),this)}clear(){return k(this,"clear"),super.clear(),this}};var W=class{constructor(t={}){this.canResize=!0;this.canScroll=!0;this._resize=this._resize.bind(this),this._scroll=this._scroll.bind(this),this._ready=this._ready.bind(this),this.register(t)}register(t={}){return this.config=ut(t),this.emitter=new H,this.services=new j(this),document.addEventListener("DOMContentLoaded",this._ready),window.addEventListener("load",this._ready),window.addEventListener("resize",this._resize,{passive:!0}),window.addEventListener("scroll",this._scroll,{passive:!0}),this}_ready(){document.removeEventListener("DOMContentLoaded",this._ready),window.removeEventListener("load",this._ready),this.emitter.emit("READY ready")}_resize(){if(this.canResize){let t,e;this.canResize=!1,e=window.requestAnimationFrame(()=>{this.emitter.emit("RESIZE resize"),t=window.setTimeout(()=>{this.canResize=!0,t=window.clearTimeout(t),e=window.cancelAnimationFrame(e)},m(this.config,"resizeDelay"))})}}_scroll(){if(this.canScroll){let t;this.canScroll=!1,t=requestAnimationFrame(()=>{this.emitter.emit("SCROLL scroll"),this.canScroll=!0,t=window.cancelAnimationFrame(t)})}}get(t){return this.services.get(t)}set(t,e){return this.services.set(t,e),this}add(t){return this.services.add(t),this}boot(){return this.services.init(),this.services.boot(),this}stop(){return this.services.stop(),this.emitter.clear(),this}on(t,e){return this.emitter.on(t,e,this),this}off(t,e){return this.emitter.off(t,e,this),this}emit(t,...e){return this.emitter.emit(t,...e),this}};var Y=class extends b{install(){var t,e,i,r,s,o;super.install(),this.ignoreURLs=(t=m(this.config,"ignoreURLs"))!=null?t:[],this.prefetchIgnore=(e=m(this.config,"prefetchIgnore"))!=null?e:!1,this.stopOnTransitioning=(i=m(this.config,"stopOnTransitioning"))!=null?i:!1,this.stickyScroll=(r=m(this.config,"stickyScroll"))!=null?r:!1,this.forceOnError=(s=m(this.config,"forceOnError"))!=null?s:!1,this.ignoreHashAction=(o=m(this.config,"ignoreHashAction"))!=null?o:!1}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),super.boot()}getTransitionName(t){if(!t||!t.getAttribute)return null;let e=t.getAttribute(m(this.config,"transitionAttr",!1));return typeof e=="string"?e:null}validLink(t,e,i){let r=!window.history.pushState,s=!t||!i,o=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey,l=t.hasAttribute("target")&&t.target==="_blank",a=t.protocol!==location.protocol||t.hostname!==location.hostname,p=typeof t.getAttribute("download")=="string",g=t.matches(m(this.config,"preventSelfAttr")),S=Boolean(t.closest(m(this.config,"preventAllAttr"))),f=v(u())===v(u(i));return!(s||r||o||l||a||p||g||S||f)}getHref(t){return t&&t.tagName&&t.tagName.toLowerCase()==="a"&&typeof t.href=="string"?t.href:null}getLink(t){let e=t.target,i=this.getHref(e);for(;e&&!i;)e=e.parentNode,i=this.getHref(e);if(!(!e||!this.validLink(e,t,i)))return e}onClick(t){let e=this.getLink(t);if(!e)return;if(this.isTransitioning&&this.stopOnTransitioning){t.preventDefault(),t.stopPropagation();return}let i=this.getHref(e);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:i,trigger:e,event:t})}getDirection(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"}force(t){window.location.assign(t)}go({href:t,trigger:e="HistoryManager",event:i}){if(this.isTransitioning&&this.stopOnTransitioning||!(this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager"))){this.force(t);return}let r=this.manager.get("HistoryManager"),s=I(0,0),o=r.current,l=o.url;if(K(l,t))return;let a;if(i&&i.state){this.emitter.emit("POPSTATE",i);let{state:p}=i,{index:g}=p,f=o.index-g;r.replace(p.states),r.pointer=g;let M=r.get(g);a=M.transition,s=M.data.scroll,e=this.getDirection(f),console.log(e=="forward"&&r),this.emitter.emit(e==="back"?"POPSTATE_BACK":"POPSTATE_FORWARD",i)}else{a=this.getTransitionName(e),s=I();let p=z({url:t,transition:a,data:{scroll:s}});!this.stickyScroll&&(s=I(0,0)),r.add(p),this.emitter.emit("HISTORY_NEW_ITEM",i)}return i&&(i.stopPropagation(),i.preventDefault()),this.emitter.emit("GO",i),this.load({oldHref:l,href:t,trigger:e,transitionName:a,scroll:s})}async load({oldHref:t,href:e,trigger:i,transitionName:r="default",scroll:s={x:0,y:0}}){try{let o=this.manager.get("PageManager"),l,a;this.emitter.emit("NAVIGATION_START",{oldHref:t,href:e,trigger:i,transitionName:r});try{this.transitionStart(),a=await o.load(t),!(a.dom instanceof Element)&&a.build(),this.emitter.emit("PAGE_LOADING",{href:e,oldPage:a,trigger:i}),l=await o.load(e),await l.build(),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:l,oldPage:a,trigger:i})}catch(p){console.warn(`[PJAX] Page load error: ${p}`)}try{let p=this.manager.get("TransitionManager");this.emitter.emit("TRANSITION_START",r);let g=await p.animate(p.has(r)?r:"default",{oldPage:a,newPage:l,trigger:i,scroll:s,ignoreHashAction:this.ignoreHashAction});g.scrollable||(!this.ignoreHashAction&&!/back|popstate|forward/.test(i)&&(s=X(s)),window.scroll(s.x,s.y)),this.emitter.emit("TRANSITION_END",{transition:g})}catch(p){console.warn(`[PJAX] Transition error: ${p}`)}this.emitter.emit("NAVIGATION_END",{oldPage:a,newPage:l,trigger:i,transitionName:r})}catch(o){this.forceOnError?this.force(e):console.warn(o)}finally{this.transitionStop()}}ignoredURL({pathname:t}){return this.ignoreURLs.length&&this.ignoreURLs.some(e=>typeof e=="string"?e===t:e.exec(t)!==null)}onHover(t){let e=this.getLink(t);if(!e||!this.manager.has("PageManager"))return;let i=this.manager.get("PageManager"),r=u(this.getHref(e)),s=r.pathname;if(!(this.ignoredURL(r)||i.has(s))){this.emitter.emit("ANCHOR_HOVER HOVER",t);try{i.load(r)}catch(o){console.warn("[PJAX] prefetch error,",o)}}}onStateChange(t){this.go({href:window.location.href,trigger:"popstate",event:t})}initEvents(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}};var J=class extends b{constructor(t=[]){super();this.routes=new d;for(let e of t)this.add(e)}add({path:t,method:e}){let i=this.parse(t);return this.routes.set(i,e),this}parsePath(t){if(typeof t=="string")return new RegExp(t,"i");if(t instanceof RegExp||typeof t=="boolean")return t;throw"[Router] only regular expressions, strings and booleans are accepted as paths."}isPath(t){return typeof t=="string"||t instanceof RegExp||typeof t=="boolean"}parse(t){let e=t,i={from:/(.*)/g,to:/(.*)/g};if(this.isPath(t))i={from:!0,to:t};else if(this.isPath(e.from)&&this.isPath(e.to))i=e;else throw"[Router] path is neither a string, regular expression, or a { from, to } object.";let{from:r,to:s}=i;return{from:this.parsePath(r),to:this.parsePath(s)}}route(){if(this.manager.has("HistoryManager")){let t=this.manager.get("HistoryManager"),e=v(u((t.length>1?t.previous:t.current).url)),i=v(u());this.routes.forEach((r,s)=>{let o=s.from,l=s.to;if(typeof o=="boolean"&&typeof l=="boolean")throw`[Router] path ({ from: ${o}, to: ${l} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let a=o,p=l;o instanceof RegExp&&o.test(e)&&(a=o.exec(e)),l instanceof RegExp&&l.test(i)&&(p=l.exec(i)),(Array.isArray(p)&&Array.isArray(a)||Array.isArray(p)&&typeof a=="boolean"&&a||Array.isArray(a)&&typeof p=="boolean"&&p)&&r({from:a,to:p,path:{from:e,to:i}})})}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}};var Ft=n=>typeof n=="string"?Array.from(document.querySelectorAll(n)):[n],Ut=n=>[].concat(...n),Z=n=>Array.isArray(n)?Ut(n.map(Z)):typeof n=="string"||n instanceof Node?Ft(n):n instanceof NodeList||n instanceof HTMLCollection?Array.from(n):[],ft=(n,t,e)=>typeof n=="function"?n.apply(e,t):n,dt=(n,t,e)=>{let i,r,s={},o=Object.keys(n);for(let l=0,a=o.length;l<a;l++)i=o[l],r=n[i],s[i]=ft(r,t,e);return s},bt={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},qt=Object.keys(bt),jt=n=>{let t=n.replace(/^ease-/,"");return qt.includes(t)?bt[t]:n},yt={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,fillMode:"none",direction:"normal",padEndDelay:!1,extend:{}},Gt=n=>{var s;let r=n,{options:t}=r,e=_(r,["options"]),i=t instanceof Q?t.getOptions():Array.isArray(t)?(s=t==null?void 0:t[0])==null?void 0:s.getOptions():t;return Object.assign({},i,e)},Q=class{constructor(t){this.options={};this.targets=[];this.properties={};this.animations=new d;this.keyframeEffects=new d;this.totalDuration=0;this.minDelay=0;this.maxSpeed=0;this.computedOptions=new d;this.emitter=new H;this.loop=this.loop.bind(this);try{this.options=Object.assign({},yt,Gt(t));let e=this.options,{loop:r,delay:s,speed:o,easing:l,endDelay:a,duration:p,direction:g,fillMode:S,onfinish:f,oncancel:M,keyframes:Tt,autoplay:It,target:xt,targets:Lt,padEndDelay:St,extend:kt}=e,nt=_(e,["loop","delay","speed","easing","endDelay","duration","direction","fillMode","onfinish","oncancel","keyframes","autoplay","target","targets","padEndDelay","extend"]),Mt=new Set([...Z(Lt),...Z(xt)]);this.targets=[...Mt],this.properties=nt;let rt=[],st=[],x=this.targets.length,at=[];for(let c=0;c<x;c++){let w=this.targets[c],E=h({easing:typeof l=="string"?jt(l):l,iterations:r===!0?Infinity:r,direction:g,endDelay:a,duration:p,speed:o,delay:s,fill:S},kt);E=dt(E,[c,x,w],this),at[c]=E;let A=+E.delay+ +E.duration*+E.iterations+ +E.endDelay;this.totalDuration<A&&(this.totalDuration=A),rt.push(E.delay),st.push(E.speed)}for(let c=0;c<x;c++){let w=this.targets[c],i=at[c],{speed:E}=i,A=_(i,["speed"]),P,Ot=+A.delay+ +A.duration*+A.iterations+ +A.endDelay;St&&A.endDelay==0&&Math.abs(+A.iterations)!=Math.abs(Infinity)&&(A.endDelay=this.totalDuration-Ot);let ot=ft(Tt,[c,x,w],this);P=ot.length?ot:nt,Array.isArray(P)||(P=dt(P,[c,x,w],this));let lt=new KeyframeEffect(w,P,A),T=new Animation(lt,A.timeline);T.playbackRate=E,T.onfinish=()=>{typeof f=="function"&&f.call(this,w,c,x,T)},T.oncancel=()=>{typeof M=="function"&&M.call(this,w,c,x,T)},this.computedOptions.set(T,A),this.animations.set(w,T),this.keyframeEffects.set(T,lt)}let Pt=new KeyframeEffect(this.mainElement,[{opacity:"0"},{opacity:"1"}],{duration:this.totalDuration,easing:"linear"});this.minDelay=Math.min(...rt),this.maxSpeed=Math.max(...st),this.mainAnimation=new Animation(Pt,this.options.timeline),this.mainAnimation.playbackRate=this.maxSpeed,this.mainAnimation.onfinish=()=>{let c=this.getPlayState();this.emit("finish",c,this),this.is(c)||this.emit("playstate-change",c,this),this.stopLoop()},this.mainAnimation.oncancel=()=>{let c=this.getPlayState();this.emit("cancel",c,this),this.is(c)||this.emit("playstate-change",c,this),this.stopLoop()},It?this.play():this.pause(),this.newPromise()}catch(r){this.emit("error",r)}}newPromise(){return this.promise=new Promise((t,e)=>{this.on("finish",()=>t([this])),this.on("error",i=>e(i))}),this.promise}then(t,e){return t=t==null?void 0:t.bind(this),e=e==null?void 0:e.bind(this),this.promise.then(t,e),this}catch(t){return t=t==null?void 0:t.bind(this),this.promise.catch(t),this}finally(t){return t=t==null?void 0:t.bind(this),this.promise.finally(t),this}loop(){this.stopLoop(),this.emit("update",this.getProgress(),this),this.animationFrame=window.requestAnimationFrame(this.loop)}stopLoop(){window.cancelAnimationFrame(this.animationFrame)}allAnimations(t){return this.animations.forEach(t),this}all(t){return t(this.mainAnimation,this.mainElement),this.allAnimations(t),this}beginEvent(){if(this.getProgress()==0){let t=window.setTimeout(()=>{this.emit("begin",this),t=window.clearTimeout(t)},this.minDelay)}}play(){let t=this.getPlayState();return this.beginEvent(),this.all(e=>e.play()),this.emit("play",t,this),this.is(t)||this.emit("playstate-change",t,this),this.loop(),this}pause(){let t=this.getPlayState();return this.all(e=>e.pause()),this.emit("pause",t,this),this.is(t)||this.emit("playstate-change",t,this),this.stopLoop(),this.animationFrame=void 0,this}reset(){return this.setProgress(0),this.beginEvent(),this.options.autoplay?this.play():this.pause(),this}cancel(){return this.all(t=>t.cancel()),this}finish(){return this.all(t=>t.finish()),this}stop(){for(this.cancel(),this.computedOptions.clear(),this.animations.clear(),this.keyframeEffects.clear();this.targets.length;)this.targets.pop();this.mainAnimation=void 0,this.mainElement=void 0,this.emit("stop"),this.emitter.clear()}getTargets(){return this.targets}getAnimation(t){return this.animations.get(t)}getKeyframeEffect(t){return this.keyframeEffects.get(t)}getTiming(t){var o,l,a;let e=t instanceof Animation?t:this.getAnimation(t),i=(o=this.computedOptions.get(e))!=null?o:{},r=(a=(l=this.getKeyframeEffect(e))==null?void 0:l.getTiming())!=null?a:{},s=this.getOptions();return h(h(h(h({},yt),s),r),i)}getTotalDuration(){return this.totalDuration}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}getComputedOption(t){let e=t instanceof Animation?t:this.getAnimation(t);return this.computedOptions.get(e)}is(t){return this.getPlayState()==t}setCurrentTime(t){return this.all(e=>{e.currentTime=t}),this.emit("update",this.getProgress()),this}setProgress(t){let e=t/100*this.totalDuration;return this.setCurrentTime(e),this}setSpeed(t=1){return this.maxSpeed=t,this.all(e=>{e.playbackRate=t}),this}on(t,e,i){return this.emitter.on(t,e,i!=null?i:this),this}off(t,e,i){return this.emitter.off(t,e,i!=null?i:this),this}emit(t,...e){return this.emitter.emit(t,...e),this}toJSON(){return this.getOptions()}get[Symbol.toStringTag](){return"Animate"}},y=(n={})=>new Q(n);var N=n=>Array.from(n),F=N;var tt=class extends b{init(){super.init(),this.elements=F(document.querySelectorAll(".intro-animation"))}newPage(){this.init(),this.prepareToShow()}initEvents(){this.emitter.on("CONTENT_REPLACED",this.newPage,this),this.emitter.on("BEFORE_TRANSITION_IN",this.show,this)}stopEvents(){this.emitter.off("CONTENT_REPLACED",this.newPage,this),this.emitter.off("BEFORE_TRANSITION_IN",this.show,this)}stop(){requestAnimationFrame(()=>{for(let t of this.elements)t.style.opacity="1"}),super.stop()}prepareToShow(){requestAnimationFrame(()=>{for(let t of this.elements)t.style.opacity="0"})}async show(){let[t]=await y({target:this.elements,opacity:[0,1],delay(e){return 300*(e+1)},onfinish(e){e.style.opacity="1"},easing:"ease",duration:850});return t.stop(),t}};var At={name:"default",duration:500,scrollable:!0,out({from:n}){let{duration:t}=this,e=n.wrapper;return y({target:e,opacity:[1,0],duration:t}).on("finish",function(){window.scroll(0,0),this.stop()})},in({to:n,scroll:t}){let{duration:e}=this,i=n.wrapper;return window.scroll(t.x,t.y),y({target:i,opacity:[0,1],duration:e}).then(function(){this.stop()})}};var Et={name:"big",delay:200,durationPerAnimation:700,scrollable:!0,init(){this.mainElement=document.getElementById("big-transition"),this.logoElement=this.mainElement.querySelector("#logo"),this.horizontalElements=F(this.mainElement.querySelectorAll("#big-transition-horizontal div")),this.maxLength=this.horizontalElements.length},out({from:n,scroll:t}){let{durationPerAnimation:e,delay:i}=this,r=n.wrapper,s=Object.assign({},r.style);return new Promise(async o=>{this.mainElement.style.opacity="1",this.mainElement.style.visibility="visible",y({target:r,opacity:[1,0],duration:e,onfinish(f){f.style.opacity="0"}}).then(function(){this.stop()});let[a]=await y({target:this.horizontalElements,keyframes:[{transform:"scaleX(0)"},{transform:"scaleX(1)"}],delay(f){return i*(f+1)},onfinish(f){f.style.transform="scaleX(1)"},easing:"out-cubic",duration:500});r.style.opacity="1",Object.assign(r.style,s),this.logoElement.style.visibility="visible";let p=500,[g]=await y({target:this.logoElement,opacity:[0,1],duration:p,onfinish(f){f.style.opacity="1"}}),[S]=await y({options:g,opacity:[1,0],onfinish(f){f.style.opacity="0"},delay:1500});this.logoElement.style.visibility="hidden",g.stop(),S.stop(),o()})},in({to:n,scroll:t}){let{durationPerAnimation:e,delay:i}=this,r=n.wrapper;return window.scroll(t.x,t.y),new Promise(async s=>{let o=y({target:r,opacity:[0,1],duration:e}).then(()=>{o.stop()}),[l]=await y({target:this.horizontalElements,keyframes:[{transform:"scaleX(1)"},{transform:"scaleX(0)"}],delay(a){return i*(a+1)},onfinish(a){a.style.transform="scaleX(0)"},easing:"out-cubic",duration:500});this.mainElement.style.opacity="0",this.mainElement.style.visibility="hidden",l.stop(),s()})}};var U={name:"slide",duration:500,direction:"right",scrollable:!0,init(n){let t=n.trigger;t instanceof Node&&t.hasAttribute("data-direction")?this.direction=t.getAttribute("data-direction"):this.direction="right"},out({from:n}){let{duration:t,direction:e}=this,i=n.wrapper;return y({target:i,keyframes:[{transform:"translateX(0%)",opacity:1},{transform:`translateX(${e==="left"?"-":""}25%)`,opacity:0}],duration:t,easing:"in-quint"}).on("begin",()=>{document.body.classList.add("no-overflow-x")}).then(function(){this.stop()})},in({to:n,scroll:t}){let{duration:e}=this,i=n.wrapper;return window.scroll(t.x,t.y),y({target:i,keyframes:[{transform:`translateX(${this.direction==="right"?"-":""}25%)`,opacity:0},{transform:"translateX(0%)",opacity:1}],duration:e,easing:"out-quint"}).then(function(){document.body.classList.remove("no-overflow-x"),this.stop()})}},vt=L(h({},U),{name:"slide-left",direction:"left",init(n){}}),wt=L(h({},U),{name:"slide-right",direction:"right",init(n){}});var et=class extends b{init(){this.navbar=document.querySelector(".navbar"),this.collapseSection=this.navbar.querySelector(".navbar-collapse.mobile"),this.navbarList=this.navbar.querySelector(".navbar-list"),this.elements=N(this.navbar.querySelectorAll(".navbar-list a")),this.menu=this.navbar.querySelector(".navbar-toggle"),this.toggleStatus=!1,this.fixTabindex(),this.toggleClick=this.toggleClick.bind(this)}activateLink(){let{href:t}=window.location;for(let e of this.elements){let i=e.getAttribute("data-path")||e.href;if(!i||i.length<1)return;let r=new RegExp(i).test(t),s=e.classList.contains("active");r&&s||e.classList.toggle("active",r)}this.toggleStatus&&this.toggleClick()}fixTabindex(){for(let t of this.elements)t.setAttribute("tabindex",`${this.toggleStatus?0:-1}`)}toggleClick(){var t,e;(e=(t=this.collapseSection.style)==null?void 0:t.setProperty)==null||e.call(t,"--height",`${this.navbarList.clientHeight}px`),this.toggleStatus=!this.toggleStatus,this.collapseSection.classList.toggle("collapse",!this.toggleStatus),this.collapseSection.classList.toggle("show",this.toggleStatus),this.fixTabindex()}scroll(){this.navbar.classList.toggle("shadow",window.scrollY>=5)}initEvents(){this.menu.addEventListener("click",this.toggleClick),this.emitter.on("scroll",this.scroll,this),this.emitter.on("READY",this.activateLink,this),this.emitter.on("GO",this.activateLink,this)}stopEvents(){this.navbar.removeEventListener("click",this.toggleClick),this.emitter.off("scroll",this.scroll,this),this.emitter.off("READY",this.activateLink,this),this.emitter.off("GO",this.activateLink,this)}uninstall(){for(;this.elements.length;)this.elements.pop();this.elements=void 0,this.menu=void 0,this.navbar=void 0}};var q,Vt,it=new W;it.add(new tt).set("HistoryManager",new G).set("PageManager",new $).set("TransitionManager",new B([["default",At],["BigTransition",Et],["Slide",U],["SlideLeft",vt],["SlideRight",wt]])).add(new et).set("router",q=new J).add(Vt=new Y);try{q=it.get("router");let n=N(document.querySelectorAll(".navbar .nav-link"));for(let t of n){let e=t;q.add({path:e.getAttribute("data-path")||e.pathname,method(){e.classList.contains("active")||e.classList.add("active");for(let r of n)r!==e&&r.classList.remove("active")}})}q.add({path:/(index|\/$)(\.html)?/,method(){}}),it.boot()}catch(n){console.warn("[App] boot failed,",n)}
//# sourceMappingURL=main.js.map
