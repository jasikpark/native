var animate=(()=>{var w=Object.defineProperty,K=e=>w(e,"__esModule",{value:!0}),J=(e,i)=>{K(e);for(var t in i)w(e,t,{get:i[t],enumerable:!0})},B={};J(B,{Animate:()=>l,DefaultAnimationOptions:()=>T,animate:()=>x,computeValue:()=>f,default:()=>S,easings:()=>k,getEase:()=>z,getElements:()=>A,getTargets:()=>E,mapObject:()=>y});var O=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,i){return this.map.set(e,i),this}add(e){let i=this.size,t=i;return this.set(t,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let i=this.keys()[this.size-e];return this.get(i)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...t)=>{},i){return this.map.forEach(e,i),this}[Symbol.iterator](){return this.entries()}},V=(e,i,...t)=>{e.forEach(n=>{n[i](...t)})},L=({callback:e=()=>{},scope:i=null,name:t="event"})=>({callback:e,scope:i,name:t}),b=class extends O{constructor(e="event"){super();this.name=e}},M=class extends O{constructor(){super()}getEvent(e){let i=this.get(e);return i instanceof b?i:(this.set(e,new b(e)),this.get(e))}newListener(e,i,t){let n=this.getEvent(e);return n.add(L({name:e,callback:i,scope:t})),n}on(e,i,t){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let n,r,s=typeof e=="object"&&!Array.isArray(e),a=s?i:t;return s||(r=i),Object.keys(e).forEach(o=>{s?(n=o,r=e[o]):n=e[o],this.newListener(n,r,a)},this),this}removeListener(e,i,t){let n=this.get(e);if(n instanceof b&&i){let r=L({name:e,callback:i,scope:t});n.forEach((s,a)=>{if(s.callback===r.callback&&s.scope===r.scope)return n.remove(a)})}return n}off(e,i,t){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let n,r,s=typeof e=="object"&&!Array.isArray(e),a=s?i:t;return s||(r=i),Object.keys(e).forEach(o=>{s?(n=o,r=e[o]):n=e[o],typeof r=="function"?this.removeListener(n,r,a):this.remove(n)},this),this}emit(e,...i){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(t=>{let n=this.get(t);n instanceof b&&n.forEach(r=>{let{callback:s,scope:a}=r;s.apply(a,i)})},this),this)}clear(){return V(this,"clear"),super.clear(),this}},A=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],E=e=>Array.isArray(e)?e:typeof e=="string"||e instanceof Node?A(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],f=(e,i)=>typeof e=="function"?e(...i):e,y=(e,i)=>{let t,n,r={},s=Object.keys(e);for(let a=0,o=s.length;a<o;a++)t=s[a],n=e[t],r[t]=f(n,i);return r},k={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},z=e=>/^(ease|in|out)/.test(e)?k[e]:e,T={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},l=class{constructor(i={}){this.options={};this.targets=[];this.properties={};this.animations=new Map;this.duration=0;this.emitter=new M;let{options:t,...n}=i;this.options=Object.assign({},T,t instanceof l?t.getOptions():t,n),this.loop=this.loop.bind(this);let{loop:r,delay:s,speed:a,easing:o,endDelay:q,duration:P,direction:C,fillMode:H,onfinish:N,target:j,keyframes:F,autoplay:D,...I}=this.options;this.mainElement=document.createElement("div"),this.targets=E(j),this.properties=I;let p=this.targets.length,h;for(let u=0;u<p;u++){let m=this.targets[u],c={easing:z(o),iterations:r===!0?Infinity:r,direction:C,endDelay:q,duration:P,delay:s,fill:H},d=f(F,[u,p,m]);h=d.length?d:this.properties,c=y(c,[u,p,m]),d.length>0||(h=y(h,[u,p,m]));let v=c.delay+c.duration*c.iterations+c.endDelay;this.duration<v&&(this.duration=v);let g=m.animate(h,c);g.onfinish=()=>{N(m,u,p,g)},this.animations.set(m,g)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(a),D?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((i,t)=>{try{this.finish=()=>(this.emit("finish",this.options),i(this.options))}catch(n){t(n)}})}getTargets(){return this.targets}then(i,t){return i=i?.bind(this),t=t?.bind(this),this.promise.then(i,t),this}catch(i){return i=i?.bind(this),this.promise.catch(i),this}finally(i){return i=i?.bind(this),this.promise.finally(i),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(i,t,n){return this.emitter.on(i,t,n??this),this}off(i,t,n){return this.emitter.off(i,t,n??this),this}emit(i,...t){return this.emitter.emit(i,...t),this}getAnimation(i){return this.animations.get(i)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(i=>{i.playState!=="finished"&&i.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(i=>{i.playState!=="finished"&&i.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(i){return this.mainAnimation.currentTime=i,this.animations.forEach(t=>{t.currentTime=i}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(i){return this.mainAnimation.currentTime=i/100*this.duration,this.animations.forEach(t=>{t.currentTime=i*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(i=1){return this.mainAnimation.playbackRate=i,this.animations.forEach(t=>{t.playbackRate=i}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(i=>{i.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},x=(e={})=>new l(e),S=x;return B;})();
//# sourceMappingURL=api.js.map
