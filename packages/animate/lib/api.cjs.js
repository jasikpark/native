var H=Object.defineProperty;var B=i=>H(i,"__esModule",{value:!0});var G=(i,t)=>{for(var e in t)H(i,e,{get:t[e],enumerable:!0})};B(exports);G(exports,{Animate:()=>f,DefaultAnimationOptions:()=>k,Timeline:()=>J,animate:()=>F,computeValue:()=>T,default:()=>U,easings:()=>_,getEase:()=>V,getElements:()=>N,getTargets:()=>O,mapObject:()=>x});var y=class{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let n=this.size;return this.set(n,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t,e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}},S=(i,t,...e)=>{i.forEach(n=>{n[t](...e)})};var q=({callback:i=()=>{},scope:t=null,name:e="event"})=>({callback:i,scope:t,name:e}),L=class extends y{constructor(t="event"){super();this.name=t}},P=class extends y{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof L?e:(this.set(t,new L(t)),this.get(t))}newListener(t,e,n){let r=this.getEvent(t);return r.add(q({name:t,callback:e,scope:n})),r}on(t,e,n){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,a=typeof t=="object"&&!Array.isArray(t),p=a?e:n;return a||(s=e),Object.keys(t).forEach(l=>{a?(r=l,s=t[l]):r=t[l],this.newListener(r,s,p)},this),this}removeListener(t,e,n){let r=this.get(t);if(r instanceof L&&e){let s=q({name:t,callback:e,scope:n});r.forEach((a,p)=>{if(a.callback===s.callback&&a.scope===s.scope)return r.remove(p)})}return r}off(t,e,n){if(typeof t=="undefined")return this;typeof t=="string"&&(t=t.trim().split(/\s/g));let r,s,a=typeof t=="object"&&!Array.isArray(t),p=a?e:n;return a||(s=e),Object.keys(t).forEach(l=>{a?(r=l,s=t[l]):r=t[l],typeof s=="function"?this.removeListener(r,s,p):this.remove(r)},this),this}emit(t,...e){return typeof t=="undefined"?this:(typeof t=="string"&&(t=t.trim().split(/\s/g)),t.forEach(n=>{let r=this.get(n);r instanceof L&&r.forEach(s=>{let{callback:a,scope:p}=s;a.apply(p,e)})},this),this)}clear(){return S(this,"clear"),super.clear(),this}};var N=i=>typeof i=="string"?Array.from(document.querySelectorAll(i)):[i],Q=i=>[].concat(...i),O=i=>Array.isArray(i)?Q(i.map(O)):typeof i=="string"||i instanceof Node?N(i):i instanceof NodeList||i instanceof HTMLCollection?Array.from(i):[],T=(i,t,e)=>typeof i=="function"?i.apply(e,t):i,x=(i,t,e)=>{let n,r,s={},a=Object.keys(i);for(let p=0,l=a.length;p<l;p++)n=a[p],r=i[n],s[n]=T(r,t,e);return s},_={in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},V=i=>/^(in|out)/.test(i)?_[i]:i,k={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,fillMode:"auto",direction:"normal",extend:{}},f=class{constructor(t={}){this.options={};this.targets=[];this.properties={};this.animations=new y;this.totalDuration=0;this.minDelay=0;this.computedOptions=new y;this.emitter=new P;try{let{options:e,...n}=t,r=e instanceof f?e.getOptions():Array.isArray(e)?e?.[0]?.getOptions():e;this.options=Object.assign({},k,r,n),this.loop=this.loop.bind(this);let{loop:s,delay:a,speed:p,easing:l,endDelay:M,duration:K,direction:v,fillMode:z,onfinish:d,target:w,keyframes:D,autoplay:j,extend:C,...I}=this.options;this.mainElement=document.createElement("div"),this.targets=O(w),this.properties=I;let A=[],m=this.targets.length,b;for(let u=0;u<m;u++){let c=this.targets[u],o={easing:typeof l=="string"?V(l):l,iterations:s===!0?Infinity:s,direction:v,endDelay:M,duration:K,delay:a,fill:z,...C},g=T(D,[u,m,c],this);b=g.length?g:this.properties,o=x(o,[u,m,c],this),g.length>0||(b=x(b,[u,m,c],this));let E=o.delay+o.duration*o.iterations+o.endDelay;this.totalDuration<E&&(this.totalDuration=E);let h=c.animate(b,o);h.onfinish=()=>{typeof d=="function"&&d.call(this,c,u,m,h),this.emit("finish",c,u,m,h)},this.computedOptions.set(h,o),this.animations.set(c,h),A.push(o.delay)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.totalDuration,easing:"linear"}),this.minDelay=Math.min(...A),this.setSpeed(p),j?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.emit("complete",this),this.stopLoop()}}catch(e){this.emit("error",e)}}newPromise(){return new Promise((t,e)=>{this.on("complete",()=>t([this])),this.on("error",n=>e(n))})}then(t,e){return t=t?.bind(this),e=e?.bind(this),this.promise.then(t,e),this}catch(t){return t=t?.bind(this),this.promise.catch(t),this}finally(t){return t=t?.bind(this),this.promise.finally(t),this}loop(){this.stopLoop(),this.emit("update",this.getProgress(),this),this.animationFrame=window.requestAnimationFrame(this.loop)}stopLoop(){window.cancelAnimationFrame(this.animationFrame)}all(t){return t(this.mainAnimation,this.mainElement),this.animations.forEach(t),this}beginEvent(){if(this.getProgress()==0){let t=window.setTimeout(()=>{this.emit("begin",this),t=window.clearTimeout(t)},this.minDelay)}}play(){let t=this.getPlayState();return this.beginEvent(),this.all(e=>e.play()),this.emit("play",t,this),this.loop(),this}pause(){let t=this.getPlayState();return this.all(e=>e.pause()),this.emit("pause",t,this),this.stopLoop(),this.animationFrame=void 0,this}reset(){return this.setProgress(0),this.beginEvent(),this.options.autoplay?this.play():this.pause(),this}cancel(){return this.all(t=>t.cancel()),this.stopLoop(),this}finish(){return this.all(t=>t.finish()),this.stopLoop(),this}stop(){for(this.cancel(),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.emit("stop")}getTargets(){return this.targets}getAnimation(t){return this.animations.get(t)}getTiming(t){let e=t instanceof Animation?t:this.getAnimation(t),n=this.computedOptions.get(e)??{},r=e.effect?.getTiming()??{},s=this.getOptions();return{...k,...s,...r,...n}}getTotalDuration(){return this.totalDuration}getCurrentTime(){return this.mainAnimation.currentTime}getProgress(){return this.getCurrentTime()/this.totalDuration*100}getSpeed(){return this.mainAnimation.playbackRate}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}setCurrentTime(t){return this.all(e=>{e.currentTime=t}),this.emit("update",this.getProgress()),this}setProgress(t){let e=t/100*this.totalDuration;return this.setCurrentTime(e),this}setSpeed(t=1){return this.all(e=>{e.playbackRate=t}),this}on(t,e,n){return this.emitter.on(t,e,n??this),this}off(t,e,n){return this.emitter.off(t,e,n??this),this}emit(t,...e){return this.emitter.emit(t,...e),this}toJSON(){return this.getOptions()}get[Symbol.toStringTag](){return"Animate"}},F=(i={})=>new f(i),J=class extends f{constructor(t={}){super();this.animations=new y;try{let{options:e,...n}=t,r=e instanceof f?e.getOptions():Array.isArray(e)?e?.[0]?.getOptions():e;this.options=Object.assign({},k,r,n),this.loop=this.loop.bind(this);let{loop:s,delay:a,speed:p,easing:l,endDelay:M,duration:K,direction:v,fillMode:z,onfinish:d,target:w,keyframes:D,autoplay:j,extend:C,...I}=this.options;this.mainElement=document.createElement("div"),this.targets=O(w),this.properties=I;let A=[],m=this.targets.length,b;for(let u=0;u<m;u++){let c=this.targets[u],o={easing:typeof l=="string"?V(l):l,iterations:s===!0?Infinity:s,direction:v,endDelay:M,duration:K,delay:a,fill:z,...C},g=T(D,[u,m,c],this);b=g.length?g:this.properties,o=x(o,[u,m,c],this),g.length>0||(b=x(b,[u,m,c],this));let E=o.delay+o.duration*o.iterations+o.endDelay;this.totalDuration<E&&(this.totalDuration=E);let h=c.animate(b,o);h.onfinish=()=>{typeof d=="function"&&d.call(this,c,u,m,h),this.emit("finish",c,u,m,h)},this.computedOptions.set(h,o),this.animations.set(c,h),A.push(o.delay)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.totalDuration,easing:"linear"}),this.minDelay=Math.min(...A),this.setSpeed(p),j?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.emit("complete",this),this.stopLoop()}}catch(e){this.emit("error",e)}}add(t){return this}},U=F;0&&(module.exports={Animate,DefaultAnimationOptions,Timeline,animate,computeValue,easings,getEase,getElements,getTargets,mapObject});
//# sourceMappingURL=api.cjs.js.map
