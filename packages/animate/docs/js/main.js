var f=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size,n=t;return this.set(n,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...n)=>{},t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},x=({callback:i=()=>{},scope:e=null,name:t="event"})=>({callback:i,scope:e,name:t}),h=class extends f{constructor(e="event"){super();this.name=e}},g=class extends f{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof h?t:(this.set(e,new h(e)),this.get(e))}newListener(e,t,n){let r=this.getEvent(e);return r.add(x({name:e,callback:t,scope:n})),r}on(e,t,n){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,a,s=typeof e=="object"&&!Array.isArray(e),o=s?t:n;return s||(a=t),Object.keys(e).forEach(u=>{s?(r=u,a=e[u]):r=e[u],this.newListener(r,a,o)},this),this}removeListener(e,t,n){let r=this.get(e);if(r instanceof h&&t){let a=x({name:e,callback:t,scope:n});r.forEach((s,o)=>{if(s.callback===a.callback&&s.scope===a.scope)return r.delete(o)})}return r}off(e,t,n){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,a,s=typeof e=="object"&&!Array.isArray(e),o=s?t:n;return s||(a=t),Object.keys(e).forEach(u=>{s?(r=u,a=e[u]):r=e[u],typeof a=="function"?this.removeListener(r,a,o):this.delete(r)},this),this}emit(e,...t){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(n=>{let r=this.get(n);r instanceof h&&r.forEach(a=>{let{callback:s,scope:o}=a;s.apply(o,t)})},this),this)}},P=i=>typeof i=="string"?Array.from(document.querySelectorAll(i)):[i],S=i=>Array.isArray(i)?i:typeof i=="string"||i instanceof Node?P(i):i instanceof NodeList||i instanceof HTMLCollection?Array.from(i):[],k=(i,e)=>typeof i=="function"?i(...e):i,L=(i,e)=>{let t,n,r={},a=Object.keys(i);for(let s=0,o=a.length;s<o;s++)t=a[s],n=i[t],r[t]=k(n,e);return r},V={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},q=i=>/^(ease|in|out)/.test(i)?V[i]:i,H={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},z=class{constructor(e={}){this.options={};this.targets=[];this.properties={};this.animations=new Map;this.duration=0;this.emitter=new g;let{options:t,...n}=e;this.options=Object.assign({},H,t,n),this.loop=this.loop.bind(this);let{loop:r,delay:a,speed:s,easing:o,endDelay:u,duration:O,direction:T,fillMode:j,onfinish:K,target:C,keyframes:w,autoplay:I,...v}=this.options;this.mainElement=document.createElement("span"),this.targets=S(C),this.properties=v;let y;for(let l=0,b=this.targets.length;l<b;l++){let m=this.targets[l],c={easing:q(o),iterations:r===!0?Infinity:r,direction:T,endDelay:u,duration:O,delay:a,fill:j},d=k(w,[l,b,m]);y=d.length?d:this.properties,c=L(c,[l,b,m]),d.length>0||(y=L(y,[l,b,m]));let A=c.delay+c.duration*c.iterations+c.endDelay;this.duration<A&&(this.duration=A);let E=m.animate(y,c);E.onfinish=()=>{K(m,l,b)},this.animations.set(m,E)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(s),I?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.finish(this.options),window.cancelAnimationFrame(this.animationFrame)}}getTargets(){return this.targets}newPromise(){return new Promise((e,t)=>{try{this.finish=n=>(this.emit("finish",n),e(n))}catch(n){t(n)}})}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(e,t,n){return this.emitter.on(e,t,n),this}off(e,t,n){return this.emitter.off(e,t,n),this}emit(e,...t){return this.emitter.emit(e,...t),this}getAnimation(e){return this.animations.get(e)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(e=>{e.playState!=="finished"&&e.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(e=>{e.playState!=="finished"&&e.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(e){return this.mainAnimation.currentTime=e,this.animations.forEach(t=>{t.currentTime=e}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(e){return this.mainAnimation.currentTime=e*this.duration,this.animations.forEach(t=>{t.currentTime=e*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(e=1){return this.mainAnimation.playbackRate=e,this.animations.forEach(t=>{t.playbackRate=e}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}},M=(i={})=>new z(i),p=M({target:".div",keyframes(i,e,t){return console.log(t),[{transform:"translateX(0px)",opacity:0},{transform:"translateX(300px)",opacity:(i+1)/e}]},easing:"out-cubic",duration(i){return(i+1)*500},onfinish(i,e,t){i.style.opacity=`${(e+1)/t}`,i.style.transform="translateX(300px)"},loop:5,speed:1,direction:"alternate",delay(i){return i*200},autoplay:!0});p.then(()=>{let i=document.querySelector(".info"),e="Done, it was delayed because of the endDelay property.";i.textContent=e,i.style.color="red",console.log(e)});var N=document.querySelector(".progress");p.on("change",()=>{N.textContent=`${Math.round(p.getProgress()*100)}%`});var D=document.querySelector("body");D.addEventListener("click",()=>{let i=p.getPlayState();i==="running"?p.pause():i==="finished"?p.reset():p.play(),console.log(i)});
//# sourceMappingURL=main.js.map
