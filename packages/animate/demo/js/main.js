var _=Object.create,v=Object.defineProperty,K=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty,$=Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptor,V=e=>v(e,"__esModule",{value:!0}),B=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),G=(e,t,i)=>{if(V(e),t&&typeof t=="object"||typeof t=="function")for(let n of $(t))!X.call(e,n)&&n!=="default"&&v(e,n,{get:()=>t[n],enumerable:!(i=J(t,n))||i.enumerable});return e},Q=e=>e&&e.__esModule?e:G(v(e!=null?_(K(e)):{},"default",{value:e,enumerable:!0}),e),P=B(M=>{var U=Object.create,A=Object.defineProperty,W=Object.getPrototypeOf,Y=Object.prototype.hasOwnProperty,Z=Object.getOwnPropertyNames,R=Object.getOwnPropertyDescriptor,T=e=>A(e,"__esModule",{value:!0}),ee=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),te=(e,t)=>{T(e);for(var i in t)A(e,i,{get:t[i],enumerable:!0})},ie=(e,t,i)=>{if(T(e),t&&typeof t=="object"||typeof t=="function")for(let n of Z(t))!Y.call(e,n)&&n!=="default"&&A(e,n,{get:()=>t[n],enumerable:!(i=R(t,n))||i.enumerable});return e},ne=e=>e&&e.__esModule?e:ie(A(e!=null?U(W(e)):{},"default",{value:e,enumerable:!0}),e),re=ee(e=>{var t=Object.defineProperty,i=r=>t(r,"__esModule",{value:!0}),n=(r,o)=>{i(r);for(var c in o)t(r,c,{get:o[c],enumerable:!0})};n(e,{Manager:()=>a,asyncMethodCall:()=>u,default:()=>l,methodCall:()=>s});var a=class{constructor(r){this.map=new Map(r)}getMap(){return this.map}get(r){return this.map.get(r)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(r,o){return this.map.set(r,o),this}add(r){let o=this.size,c=o;return this.set(c,r),this}get size(){return this.map.size}get length(){return this.map.size}last(r=1){let o=this.keys()[this.size-r];return this.get(o)}delete(r){return this.map.delete(r)}remove(r){return this.map.delete(r),this}clear(){return this.map.clear(),this}has(r){return this.map.has(r)}entries(){return this.map.entries()}forEach(r=(...c)=>{},o){return this.map.forEach(r,o),this}[Symbol.iterator](){return this.entries()}},s=(r,o,...c)=>{r.forEach(f=>{f[o](...c)})},u=async(r,o,...c)=>{for(let[,f]of r)await f[o](...c)},l=a});te(M,{Event:()=>d,EventEmitter:()=>L,default:()=>ae,newListener:()=>O});var x=ne(re()),O=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),d=class extends x.Manager{constructor(e="event"){super();this.name=e}},L=class extends x.Manager{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof d?t:(this.set(e,new d(e)),this.get(e))}newListener(e,t,i){let n=this.getEvent(e);return n.add(O({name:e,callback:t,scope:i})),n}on(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let n,a,s=typeof e=="object"&&!Array.isArray(e),u=s?t:i;return s||(a=t),Object.keys(e).forEach(l=>{s?(n=l,a=e[l]):n=e[l],this.newListener(n,a,u)},this),this}removeListener(e,t,i){let n=this.get(e);if(n instanceof d&&t){let a=O({name:e,callback:t,scope:i});n.forEach((s,u)=>{if(s.callback===a.callback&&s.scope===a.scope)return n.remove(u)})}return n}off(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let n,a,s=typeof e=="object"&&!Array.isArray(e),u=s?t:i;return s||(a=t),Object.keys(e).forEach(l=>{s?(n=l,a=e[l]):n=e[l],typeof a=="function"?this.removeListener(n,a,u):this.remove(n)},this),this}emit(e,...t){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(i=>{let n=this.get(i);n instanceof d&&n.forEach(a=>{let{callback:s,scope:u}=a;s.apply(u,t)})},this),this)}clear(){return x.methodCall(this,"clear"),super.clear(),this}},ae=L}),S=Q(P()),se=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],oe=e=>Array.isArray(e)?e:typeof e=="string"||e instanceof Node?se(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],j=(e,t)=>typeof e=="function"?e(...t):e,C=(e,t)=>{let i,n,a={},s=Object.keys(e);for(let u=0,l=s.length;u<l;u++)i=s[u],n=e[i],a[i]=j(n,t);return a},ue={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},le=e=>/^(ease|in|out)/.test(e)?ue[e]:e,ce={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},E=class{constructor(t={}){this.options={};this.targets=[];this.properties={};this.animations=new Map;this.duration=0;this.emitter=new S.EventEmitter;let{options:i,...n}=t;this.options=Object.assign({},ce,i instanceof E?i.getOptions():i,n),this.loop=this.loop.bind(this);let{loop:a,delay:s,speed:u,easing:l,endDelay:r,duration:o,direction:c,fillMode:f,onfinish:H,target:N,keyframes:D,autoplay:F,...I}=this.options;this.mainElement=document.createElement("div"),this.targets=oe(N),this.properties=I;let y=this.targets.length,g;for(let m=0;m<y;m++){let b=this.targets[m],p={easing:le(l),iterations:a===!0?Infinity:a,direction:c,endDelay:r,duration:o,delay:s,fill:f},k=j(D,[m,y,b]);g=k.length?k:this.properties,p=C(p,[m,y,b]),k.length>0||(g=C(g,[m,y,b]));let z=p.delay+p.duration*p.iterations+p.endDelay;this.duration<z&&(this.duration=z);let w=b.animate(g,p);w.onfinish=()=>{H(b,m,y)},this.animations.set(b,w)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(u),F?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((t,i)=>{try{this.finish=()=>(this.emit("finish",this.options),t(this.options))}catch(n){i(n)}})}getTargets(){return this.targets}then(t,i){return t=t==null?void 0:t.bind(this),i=i==null?void 0:i.bind(this),this.promise.then(t,i),this}catch(t){return t=t==null?void 0:t.bind(this),this.promise.catch(t),this}finally(t){return t=t==null?void 0:t.bind(this),this.promise.finally(t),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(t,i,n){return this.emitter.on(t,i,n!=null?n:this),this}off(t,i,n){return this.emitter.off(t,i,n!=null?n:this),this}emit(t,...i){return this.emitter.emit(t,...i),this}getAnimation(t){return this.animations.get(t)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(t=>{t.playState!=="finished"&&t.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(t=>{t.playState!=="finished"&&t.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach(i=>{i.currentTime=t}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t/100*this.duration,this.animations.forEach(i=>{i.currentTime=t*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach(i=>{i.playbackRate=t}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(t=>{t.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},q=(e={})=>new E(e),h=q({target:".div",keyframes(e,t,i){return[{transform:"translateX(0px)",opacity:0},{transform:"translateX(300px)",opacity:(e+1)/t}]},easing:"out-cubic",duration(e){return(e+1)*500},onfinish(e,t,i){e.style.opacity=`${(t+1)/i}`,e.style.transform="translateX(300px)"},loop:5,speed:1,direction:"alternate",delay(e){return e*200},autoplay:!0});h.then(()=>{let e=document.querySelector(".info"),t="Done, it was delayed because of the endDelay property.";e.textContent=t,e.style.color="red",console.log(t)});var me=document.querySelector(".progress");h.on("change",()=>{me.textContent=`${Math.round(h.getProgress()*100)}%`});var pe=document.querySelector("body");pe.addEventListener("click",()=>{let e=h.getPlayState();e==="running"?h.pause():e==="finished"?h.reset():h.play(),console.log(e)});
//# sourceMappingURL=main.js.map
