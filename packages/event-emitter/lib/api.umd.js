!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self)["@okikio/event-emitter"]={})}(this,function(t){function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}class n{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return[...this.map.keys()]}values(){return[...this.map.values()]}set(t,e){return this.map.set(t,e),this}add(t){return this.set(this.size,t),this}get size(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}prev(){return this.last(2)}delete(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=((...t)=>{}),e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}methodCall(t,...e){return this.forEach(n=>{n[t](...e)}),this}async asyncMethodCall(t,...e){for await(let[,n]of this.map)await n[t](...e);return this}}var r=function(){function t(t){var e=t.callback,n=t.scope,r=t.name;this.listener={callback:void 0===e?function(){}:e,scope:void 0===n?null:n,name:void 0===r?"event":r}}var e=t.prototype;return e.getCallback=function(){return this.listener.callback},e.getScope=function(){return this.listener.scope},e.getEventName=function(){return this.listener.name},e.toJSON=function(){return this.listener},t}(),i=function(t){function n(e){var n;return void 0===e&&(e="event"),(n=t.call(this)||this).name=e,n}return e(n,t),n}(n),s=function(t){function n(){return t.call(this)||this}e(n,t);var s=n.prototype;return s.getEvent=function(t){var e=this.get(t);return e instanceof i?e:(this.set(t,new i(t)),this.get(t))},s.newListener=function(t,e,n){var i=this.getEvent(t);return i.add(new r({name:t,callback:e,scope:n})),i},s.on=function(t,e,n){var r,i,s,o=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(a){"object"!=typeof t||Array.isArray(t)?(r=t[a],i=e,s=n):(r=a,i=t[a],s=e),o.newListener(r,i,s)},this)),this},s.removeListener=function(t,e,n){var i=this.getEvent(t);if(e){for(var s,o=0,a=i.size,c=new r({name:t,callback:e,scope:n});o<a&&(s=i.get(o),console.log(s),s.getCallback()!==c.getCallback()||s.getScope()!==c.getScope());o++);i.delete(o)}return i},s.off=function(t,e,n){var r,i,s,o=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(a){"object"!=typeof t||Array.isArray(t)?(r=t[a],i=e,s=n):(r=a,i=t[a],s=e),i?o.removeListener(r,i,s):o.delete(r)},this)),this},s.once=function(t,e,n){var r=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),this.on(t,function i(){r.off(t,i,n),e.apply(n,[].slice.call(arguments))},n)),this},s.emit=function(t){var e=this,n=[].slice.call(arguments,1);return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),t.forEach(function(t){var r=e.getEvent(t),i=new CustomEvent(t,{detail:n});window.dispatchEvent(i),r.forEach(function(t){var e=t.toJSON();e.callback.apply(e.scope,n)})},this)),this},n}(n);t.Event=i,t.EventEmitter=s,t.Listener=r});
//# sourceMappingURL=api.umd.js.map
