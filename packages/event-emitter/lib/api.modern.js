import e from"managerjs";class t{constructor({callback:e=(()=>{}),scope:t=null,name:s="event"}){this.listener={callback:e,scope:t,name:s}}getCallback(){return this.listener.callback}getScope(){return this.listener.scope}getEventName(){return this.listener.name}toJSON(){return this.listener}}class s extends e{constructor(e="event"){super(),this.name=e}}class r extends e{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof s?t:(this.set(e,new s(e)),this.get(e))}newListener(e,s,r){let n=this.getEvent(e);return n.add(new t({name:e,callback:s,scope:r})),n}on(e,t,s){if(void 0===e)return this;let r,n,i;return"string"==typeof e&&(e=e.split(/\s/g)),Object.keys(e).forEach(o=>{"object"!=typeof e||Array.isArray(e)?(r=e[o],n=t,i=s):(r=o,n=e[o],i=t),this.newListener(r,n,i)},this),this}removeListener(e,s,r){let n=this.getEvent(e);if(s){let i,o=0,l=n.size,c=new t({name:e,callback:s,scope:r});for(;o<l&&(i=n.get(o),console.log(i),i.getCallback()!==c.getCallback()||i.getScope()!==c.getScope());o++);n.delete(o)}return n}off(e,t,s){if(void 0===e)return this;let r,n,i;return"string"==typeof e&&(e=e.split(/\s/g)),Object.keys(e).forEach(o=>{"object"!=typeof e||Array.isArray(e)?(r=e[o],n=t,i=s):(r=o,n=e[o],i=t),n?this.removeListener(r,n,i):this.delete(r)},this),this}once(e,t,s){if(void 0===e)return this;"string"==typeof e&&(e=e.split(/\s/g));let r=(...n)=>{this.off(e,r,s),t.apply(s,n)};return this.on(e,r,s),this}emit(e,...t){return void 0===e||("string"==typeof e&&(e=e.split(/\s/g)),e.forEach(e=>{let s=this.getEvent(e);const r=new CustomEvent(e,{detail:t});window.dispatchEvent(r),s.forEach(e=>{let{callback:s,scope:r}=e.toJSON();s.apply(r,t)})},this)),this}}export{s as Event,r as EventEmitter,t as Listener};
//# sourceMappingURL=api.modern.js.map
