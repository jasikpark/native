{"version":3,"sources":["services.ts"],"names":[],"mappings":"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","file":"../services.js","sourcesContent":["import { Service } from \"../../lib/core.js\";\r\nimport { animate } from \"walijs\";\r\n\r\n//== Services\r\nexport class Splashscreen extends Service {\r\n    protected rootElement: HTMLElement;\r\n    protected innerEl: HTMLElement;\r\n    protected bgEl: HTMLElement;\r\n    protected minimalDuration: number = 1000; // ms\r\n\r\n    public boot() {\r\n        // Elements\r\n        this.rootElement = document.getElementById('splashscreen');\r\n        if (this.rootElement) {\r\n            this.innerEl = this.rootElement.querySelector('.splashscreen-inner');\r\n            this.bgEl = this.rootElement.querySelector('.splashscreen-bg');\r\n        }\r\n\r\n        this.rootElement.style.visibility = \"visible\";\r\n        this.rootElement.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n    public initEvents() {\r\n        if (this.rootElement) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    // You need to override this method\r\n    public async hide() {\r\n        await new Promise(resolve => {\r\n            window.setTimeout(() => {\r\n                this.EventEmitter.emit(\"BEFORE_SPLASHSCREEN_HIDE\");\r\n                resolve();\r\n            }, this.minimalDuration);\r\n        });\r\n\r\n        await new Promise(async resolve => {\r\n            animate({\r\n                target: this.innerEl,\r\n                opacity: [1, 0],\r\n                autoplay: true,\r\n                duration: 500,\r\n                onfinish(el) {\r\n                    el.style.opacity = \"0\";\r\n                }\r\n            });\r\n\r\n            this.EventEmitter.emit(\"START_SPLASHSCREEN_HIDE\");\r\n\r\n            await animate({\r\n                target: this.rootElement,\r\n                transform: [\"translateY(0%)\", \"translateY(100%)\"],\r\n                duration: 1200,\r\n                easing: \"in-out-cubic\" // in-out-cubic\r\n            });\r\n\r\n            this.rootElement.style.transform = \"translateY(100%)\";\r\n            this.rootElement.style.visibility = \"hidden\";\r\n            this.rootElement.style.pointerEvents = \"none\";\r\n            this.EventEmitter.emit(\"AFTER_SPLASHSCREEN_HIDE\");\r\n\r\n            resolve();\r\n        });\r\n    }\r\n}\r\n\r\nexport class IntroAnimation extends Service {\r\n    protected elements: Array<Element>;\r\n    protected rootElement: HTMLElement;\r\n\r\n    public boot() {\r\n        // Elements\r\n        this.elements = [...document.querySelectorAll('[data-block=\"IntroBlock\"]')];\r\n\r\n        // Bind methods\r\n        this.prepareToShow = this.prepareToShow.bind(this);\r\n        this.show = this.show.bind(this);\r\n    }\r\n\r\n    public initEvents() {\r\n        this.EventEmitter.on(\"BEFORE_SPLASHSCREEN_HIDE\", this.prepareToShow);\r\n        this.EventEmitter.on(\"START_SPLASHSCREEN_HIDE\", this.show);\r\n    }\r\n\r\n    public stopEvents() {\r\n        this.EventEmitter.off(\"BEFORE_SPLASHSCREEN_HIDE\", this.prepareToShow);\r\n        this.EventEmitter.off(\"START_SPLASHSCREEN_HIDE\", this.show);\r\n    }\r\n\r\n    public prepareToShow() {\r\n        for (let el of this.elements) {\r\n            (el as HTMLElement).style.transform = \"translateY(200px)\";\r\n            (el as HTMLElement).style.opacity = '0';\r\n        }\r\n    }\r\n\r\n    public show() {\r\n        animate({\r\n            target: (this.elements as HTMLElement[]),\r\n            keyframes: [\r\n                { transform: \"translateY(200px)\", opacity: 0 },\r\n                { transform: \"translateY(0px)\", opacity: 1 },\r\n            ],\r\n            // @ts-ignore\r\n            delay(i: number) {\r\n                return 200 * (i + 1);\r\n            },\r\n            onfinish(el: { style: { transform: string; opacity: string; }; }) {\r\n                el.style.transform = \"translateY(0px)\";\r\n                el.style.opacity = \"1\";\r\n            },\r\n            easing: \"out-cubic\",\r\n            duration: 500\r\n        });\r\n    }\r\n}"]}