(function(g,j){typeof exports==="object"&&typeof module!=="undefined"?j(exports):typeof define==="function"&&define.amd?define(["exports"],j):(g=g||self,j(g.EventEmitter={}))})(this,function(g){"use strict";class j{constructor(a){this.map=new Map(a)}getMap(){return this.map}get(a){return this.map.get(a)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(a,b){return this.map.set(a,b),this}add(a){let b=this.size,d=b;return this.set(d,a),this}get size(){return this.map.size}get length(){return this.map.size}last(a=1){let b=this.keys()[this.size-a];return this.get(b)}prev(){return this.last(2)}delete(a){return this.map.delete(a),this}clear(){return this.map.clear(),this}has(a){return this.map.has(a)}entries(){return this.map.entries()}forEach(a=(...d)=>{},b){return this.map.forEach(a,b),this}[Symbol.iterator](){return this.entries()}}const l=({callback:a=()=>{},scope:b=null,name:d="event"})=>({callback:a,scope:b,name:d});class k extends j{constructor(a="event"){super();this.name=a}}class m extends j{constructor(){super()}getEvent(a){let b=this.get(a);return b instanceof k?b:(this.set(a,new k(a)),this.get(a))}newListener(a,b,d){let c=this.getEvent(a);return c.add(l({name:a,callback:b,scope:d})),c}on(a,b,d){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let c,e,f=typeof a=="object"&&!Array.isArray(a),h=f?b:d;return f||(e=b),Object.keys(a).forEach(i=>{f?(c=i,e=a[i]):c=a[i],this.newListener(c,e,h)},this),this}removeListener(a,b,d){let c=this.get(a);if(c instanceof k&&b){let e=l({name:a,callback:b,scope:d});c.forEach((f,h)=>{if(f.callback===e.callback&&f.scope===e.scope)return c.delete(h)})}return c}off(a,b,d){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let c,e,f=typeof a=="object"&&!Array.isArray(a),h=f?b:d;return f||(e=b),Object.keys(a).forEach(i=>{f?(c=i,e=a[i]):c=a[i],typeof e==="function"?this.removeListener(c,e,h):this.delete(c)},this),this}emit(a,...b){return typeof a=="undefined"?this:(typeof a=="string"&&(a=a.trim().split(/\s/g)),a.forEach(d=>{let c=this.get(d);c instanceof k&&c.forEach(e=>{let{callback:f,scope:h}=e;f.apply(h,b)})},this),this)}}g.Event=k,g.EventEmitter=m,g.default=m,g.newListener=l,Object.defineProperty(g,"__esModule",{value:!0})});
//# sourceMappingURL=api.umd.js.map
