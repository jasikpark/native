class k{constructor(a){this.map=new Map(a)}getMap(){return this.map}get(a){return this.map.get(a)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(a,b){return this.map.set(a,b),this}add(a){let b=this.size,d=b;return this.set(d,a),this}get size(){return this.map.size}get length(){return this.map.size}last(a=1){let b=this.keys()[this.size-a];return this.get(b)}prev(){return this.last(2)}delete(a){return this.map.delete(a),this}clear(){return this.map.clear(),this}has(a){return this.map.has(a)}entries(){return this.map.entries()}forEach(a=(...d)=>{},b){return this.map.forEach(a,b),this}[Symbol.iterator](){return this.entries()}}const j=({callback:a=()=>{},scope:b=null,name:d="event"})=>({callback:a,scope:b,name:d});class i extends k{constructor(a="event"){super();this.name=a}}class l extends k{constructor(){super()}getEvent(a){let b=this.get(a);return b instanceof i?b:(this.set(a,new i(a)),this.get(a))}newListener(a,b,d){let c=this.getEvent(a);return c.add(j({name:a,callback:b,scope:d})),c}on(a,b,d){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let c,e,f=typeof a=="object"&&!Array.isArray(a),g=f?b:d;return f||(e=b),Object.keys(a).forEach(h=>{f?(c=h,e=a[h]):c=a[h],this.newListener(c,e,g)},this),this}removeListener(a,b,d){let c=this.get(a);if(c instanceof i&&b){let e=j({name:a,callback:b,scope:d});c.forEach((f,g)=>{if(f.callback===e.callback&&f.scope===e.scope)return c.delete(g)})}return c}off(a,b,d){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let c,e,f=typeof a=="object"&&!Array.isArray(a),g=f?b:d;return f||(e=b),Object.keys(a).forEach(h=>{f?(c=h,e=a[h]):c=a[h],typeof e==="function"?this.removeListener(c,e,g):this.delete(c)},this),this}emit(a,...b){return typeof a=="undefined"?this:(typeof a=="string"&&(a=a.trim().split(/\s/g)),a.forEach(d=>{let c=this.get(d);c instanceof i&&c.forEach(e=>{let{callback:f,scope:g}=e;f.apply(g,b)})},this),this)}}export default l;export{i as Event,l as EventEmitter,j as newListener};
//# sourceMappingURL=api.mjs.map
