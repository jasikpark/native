var $={wrapperAttr:"wrapper",noAjaxLinkAttr:"no-ajax-link",noPrefetchAttr:"no-prefetch",headers:[["x-partial","true"]],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",blockAttr:"block",timeout:3e4},F=e=>Object.assign({...$},e),V=(e,t,i=!0)=>{let{prefix:r}=e,n=`data${r?"-"+r:""}-${t}`;return i?`[${n}]`:n},p=(e,t,i=!0)=>{if(typeof t!="string")return e;let r=e[t];return typeof r=="string"?V(e,r,i):r};var f=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size,i=t;return this.set(i,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...i)=>{},t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},E=(e,t,...i)=>{e.forEach(r=>{r[t](...i)})},B=async(e,t,...i)=>{for(let[,r]of e)await r[t](...i)},v=class{constructor(){}install(){}register(t,i){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=i,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=void 0,this.manager=void 0,this.app=void 0,this.config=void 0,this.emitter=void 0}},w=class extends f{constructor(t){super();this.app=t,this.config=t.config,this.emitter=t.emitter}set(t,i){return super.set(t,i),i.register(this,t),this}};var c=(e=window.location.href)=>e instanceof URL?e:new URL(e,window.location.origin),m=e=>`${e.pathname}${e.hash}`,ut=e=>e.hash.slice(1),z=e=>e.toString().replace(/(\/#.*|\/|#.*)$/,""),P=(e,t)=>{let i=c(e),r=c(t);return z(i)===z(r)};var g=class extends v{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}},L=class extends w{constructor(t){super(t)}init(){return E(this,"init"),this}boot(){return E(this,"boot"),this}stop(){return E(this,"stop"),this}},d=(e=window.scrollX,t=window.scrollY)=>({x:e,y:t}),R=(e={url:m(c()),index:0,transition:"default",data:{scroll:d(),trigger:"HistoryManager"}})=>e,W=class extends g{constructor(){super(...arguments);this.pointer=-1}init(){this.states=[];let t=R();this.add(t,"replace")}get(t){return this.states[t]}add(t,i="push"){let r=R(t),n=this.length;this.states.push({...r}),this.pointer=n;let s={index:this.pointer,states:[...this.states]};return Y(i,r,s),this}remove(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this}replace(t){return this.states=t,this}set(t,i){return this.states[t]=i}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},Y=(e,t,i)=>{let r=m(c(t.url)),n=[i,"",r];if(window.history)switch(e){case"push":window.history.pushState.apply(window.history,n);break;case"replace":window.history.replaceState.apply(window.history,n);break}};var J=new DOMParser,C=class extends v{constructor(t=c(),i=document){super();this.url=t,typeof i=="string"?this.data=i:this.dom=i||document}build(){if(this.dom instanceof Node||(this.dom=J.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:t,head:i,body:r}=this.dom;this.title=t,this.head=i,this.body=r,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=p(this.config,"wrapperAttr")}uninstall(){this.url=void 0,this.title=void 0,this.head=void 0,this.body=void 0,this.dom=void 0,this.wrapper=void 0,this.data=void 0,this.wrapperAttr=void 0}},X=class extends g{constructor(){super(...arguments);this.loading=new f}install(){this.pages=new w(this.app),this.maxPages=this.config.maxPages??5;let t=c().pathname;this.set(t,new C),t=void 0}get(t){return this.pages.get(t)}add(t){return this.pages.add(t),this}set(t,i){return this.pages.set(t,i),this}remove(t){return this.pages.remove(t),this}has(t){return this.pages.has(t)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(t=c()){let i=c(t),r=i.pathname,n,s;if(this.has(r))return n=this.get(r),Promise.resolve(n);this.loading.has(r)?s=this.loading.get(r):(s=this.request(r),this.loading.set(r,s));let a=await s;if(this.loading.remove(r),n=new C(i,a),this.set(r,n),this.size>this.maxPages){let o=c(),h=this.keys(),l=P(o,h[0])?h[1]:h[0],u=this.get(l);u.unregister(),u=void 0,h=void 0,o=void 0,l=void 0}return n}async request(t){let i=new Headers(p(this.config,"headers")),r=window.setTimeout(()=>{throw window.clearTimeout(r),"Request Timed Out!"},p(this.config,"timeout"));try{let n=await fetch(t,{mode:"same-origin",method:"GET",headers:i,cache:"default",credentials:"same-origin"});if(window.clearTimeout(r),n.status>=200&&n.status<300)return await n.text();let s=new Error(n.statusText||""+n.status);throw s}catch(n){throw window.clearTimeout(r),n}}};var Q=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size,i=t;return this.set(i,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...i)=>{},t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},gt=(e,t,...i)=>{e.forEach(r=>{r[t](...i)})},D=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),M=class extends Q{constructor(e="event"){super();this.name=e}},U=class extends Q{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof M?t:(this.set(e,new M(e)),this.get(e))}newListener(e,t,i){let r=this.getEvent(e);return r.add(D({name:e,callback:t,scope:i})),r}on(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,s=typeof e=="object"&&!Array.isArray(e),a=s?t:i;return s||(n=t),Object.keys(e).forEach(o=>{s?(r=o,n=e[o]):r=e[o],this.newListener(r,n,a)},this),this}removeListener(e,t,i){let r=this.get(e);if(r instanceof M&&t){let n=D({name:e,callback:t,scope:i});r.forEach((s,a)=>{if(s.callback===n.callback&&s.scope===n.scope)return r.remove(a)})}return r}off(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,s=typeof e=="object"&&!Array.isArray(e),a=s?t:i;return s||(n=t),Object.keys(e).forEach(o=>{s?(r=o,n=e[o]):r=e[o],typeof n=="function"?this.removeListener(r,n,a):this.remove(r)},this),this}emit(e,...t){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(i=>{let r=this.get(i);r instanceof M&&r.forEach(n=>{let{callback:s,scope:a}=n;s.apply(a,t)})},this),this)}clear(){return gt(this,"clear"),super.clear(),this}};var O=(e,t=window.location.hash)=>{try{let i=t[0]=="#"?t:c(t).hash;if(i.length>1){let r=document.getElementById(i.slice(1));if(r)return d(r.offsetLeft,r.offsetTop)}}catch(i){console.warn("[hashAction] error",i)}return e??d(0,0)},mt={name:"default",scrollable:!0,out({done:e}){e()},in({scroll:e,done:t}){window.scroll(e.x,e.y),t()}},Z=class extends g{constructor(t){super();this._arg=t}install(){super.install();let t=this._arg&&this._arg.length?this._arg:p(this.config,"transitions")??[];t=[["default",mt]].concat(t),this.transitions=new f(t)}get(t){return this.transitions.get(t)}set(t,i){return this.transitions.set(t,i),this}add(t){return this.transitions.add(t),this}has(t){return this.transitions.has(t)}async animate(t,i){let r=this.transitions.get(t),n=i.scroll,s=i.ignoreHashAction;if(!("wrapper"in i.oldPage)||!("wrapper"in i.newPage))throw`[Page] either oldPage or newPage aren't instances of the Page Class.
 ${{newPage:i.newPage,oldPage:i.oldPage}}`;document.title=""+i.newPage.title;let a=i.oldPage.wrapper,o=i.newPage.wrapper;if(!(a instanceof Node)||!(o instanceof Node))throw`[Wrapper] the wrapper from the ${o instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${p(this.config,"wrapperAttr")}.`;return r.init&&r?.init(i),this.emitter.emit("BEFORE_TRANSITION_OUT"),r.out&&await new Promise(h=>{let l=r.out.call(r,{...i,from:i.oldPage,trigger:i.trigger,done:h});l?.then(h)}),this.emitter.emit("AFTER_TRANSITION_OUT"),await new Promise(h=>{a.insertAdjacentElement("beforebegin",o),this.emitter.emit("CONTENT_INSERT"),!s&&!/back|popstate|forward/.test(i.trigger)&&(n=O(n)),h()}),await new Promise(h=>{a.remove(),a=void 0,o=void 0,this.emitter.emit("CONTENT_REPLACED"),h()}),this.emitter.emit("BEFORE_TRANSITION_IN"),r.in&&await new Promise(async h=>{let l=r.in.call(r,{...i,from:i.oldPage,to:i.newPage,trigger:i.trigger,scroll:n,done:h});l?.then(h)}),this.emitter.emit("AFTER_TRANSITION_IN"),r}};var tt=class{constructor(t={}){this.register(t)}register(t={}){this.config=F(t),this.emitter=new U,this.services=new L(this);let i=(()=>{document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),this.emitter.emit("READY ready")}).bind(this);return document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i),this}get(t){return this.services.get(t)}set(t,i){return this.services.set(t,i),this}add(t){return this.services.add(t),this}boot(){return this.services.init(),this.services.boot(),this}stop(){return this.services.stop(),this.emitter.clear(),this}on(t,i){return this.emitter.on(t,i,this),this}off(t,i){return this.emitter.off(t,i,this),this}emit(t,...i){return this.emitter.emit(t,...i),this}};var et=class extends g{install(){super.install(),this.ignoreURLs=p(this.config,"ignoreURLs")??[],this.prefetchIgnore=p(this.config,"prefetchIgnore")??!1,this.stopOnTransitioning=p(this.config,"stopOnTransitioning")??!1,this.stickyScroll=p(this.config,"stickyScroll")??!1,this.forceOnError=p(this.config,"forceOnError")??!1,this.ignoreHashAction=p(this.config,"ignoreHashAction")??!1}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),super.boot()}getTransitionName(t){if(!t||!t.getAttribute)return null;let i=t.getAttribute(p(this.config,"transitionAttr",!1));return typeof i=="string"?i:null}validLink(t,i,r){let n=!window.history.pushState,s=!t||!r,a=i.metaKey||i.ctrlKey||i.shiftKey||i.altKey,o=t.hasAttribute("target")&&t.target==="_blank",h=t.protocol!==location.protocol||t.hostname!==location.hostname,l=typeof t.getAttribute("download")=="string",u=t.hasAttribute(p(this.config,"preventSelfAttr",!1)),x=Boolean(t.closest(p(this.config,"preventAllAttr"))),T=u&&x,A=m(c())===m(c(r));return!(s||n||a||o||h||l||T||A)}getHref(t){return t&&t.tagName&&t.tagName.toLowerCase()==="a"&&typeof t.href=="string"?t.href:null}getLink(t){let i=t.target,r=this.getHref(i);for(;i&&!r;)i=i.parentNode,r=this.getHref(i);return!i||!this.validLink(i,t,r)?void 0:i}onClick(t){let i=this.getLink(t);if(!i)return;if(this.isTransitioning&&this.stopOnTransitioning){t.preventDefault(),t.stopPropagation();return}let r=this.getHref(i);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:r,trigger:i,event:t})}getDirection(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"}force(t){window.location.assign(t)}go({href:t,trigger:i="HistoryManager",event:r}){if(this.isTransitioning&&this.stopOnTransitioning||!(this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager"))){this.force(t);return}let n=this.manager.get("HistoryManager"),s=d(0,0),a=n.current,o=a.url;if(P(o,t))return;let h;if(r&&r.state){this.emitter.emit("POPSTATE",r);let{state:l}=r,{index:u}=l,x=a.index,T=x-u,A=n.get(n.pointer);h=A.transition,s=A.data.scroll,n.replace(l.states),n.pointer=u,i=this.getDirection(T),this.emitter.emit(i==="back"?"POPSTATE_BACK":"POPSTATE_FORWARD",r)}else{h=this.getTransitionName(i),s=d();let l=R({url:t,transition:h,data:{scroll:s}});!this.stickyScroll&&(s=d(0,0)),n.add(l),this.emitter.emit("HISTORY_NEW_ITEM",r)}return r&&(r.stopPropagation(),r.preventDefault()),this.emitter.emit("GO",r),this.load({oldHref:o,href:t,trigger:i,transitionName:h,scroll:s})}async load({oldHref:t,href:i,trigger:r,transitionName:n="default",scroll:s={x:0,y:0}}){try{let a=this.manager.get("PageManager"),o,h;this.emitter.emit("NAVIGATION_START",{oldHref:t,href:i,trigger:r,transitionName:n});try{this.transitionStart(),h=await a.load(t),!(h.dom instanceof Element)&&h.build(),this.emitter.emit("PAGE_LOADING",{href:i,oldPage:h,trigger:r}),o=await a.load(i),await o.build(),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:o,oldPage:h,trigger:r})}catch(l){throw`[PJAX] page load error: ${l}`}try{let l=this.manager.get("TransitionManager");this.emitter.emit("TRANSITION_START",n);let u=await l.animate(l.has(n)?n:"default",{oldPage:h,newPage:o,trigger:r,scroll:s,ignoreHashAction:this.ignoreHashAction});u.scrollable||(!this.ignoreHashAction&&!/back|popstate|forward/.test(r)&&(s=O(s)),window.scroll(s.x,s.y)),this.emitter.emit("TRANSITION_END",{transition:u})}catch(l){throw`[PJAX] transition error: ${l}`}this.emitter.emit("NAVIGATION_END",{oldPage:h,newPage:o,trigger:r,transitionName:n})}catch(a){this.forceOnError?this.force(i):console.warn(a)}finally{this.transitionStop()}}ignoredURL({pathname:t}){return this.ignoreURLs.length&&this.ignoreURLs.some(i=>typeof i=="string"?i===t:i.exec(t)!==null)}onHover(t){let i=this.getLink(t);if(!i||!this.manager.has("PageManager"))return;let r=this.manager.get("PageManager"),n=c(this.getHref(i)),s=n.pathname;if(this.ignoredURL(n)||r.has(s))return;this.emitter.emit("ANCHOR_HOVER HOVER",t);try{r.load(n)}catch(a){console.warn("[PJAX] prefetch error,",a)}}onStateChange(t){this.go({href:window.location.href,trigger:"popstate",event:t})}initEvents(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}};var it=class extends g{constructor(t=[]){super();this.routes=new f;for(let i of t)this.add(i)}add({path:t,method:i}){let r=this.parse(t);return this.routes.set(r,i),this}parsePath(t){if(typeof t=="string")return new RegExp(t,"i");if(t instanceof RegExp||typeof t=="boolean")return t;throw"[Router] only regular expressions, strings and booleans are accepted as paths."}isPath(t){return typeof t=="string"||t instanceof RegExp||typeof t=="boolean"}parse(t){let i=t,r={from:/(.*)/g,to:/(.*)/g};if(this.isPath(t))r={from:!0,to:t};else if(this.isPath(i.from)&&this.isPath(i.to))r=i;else throw"[Router] path is neither a string, regular expression, or a { from, to } object.";let{from:n,to:s}=r;return{from:this.parsePath(n),to:this.parsePath(s)}}route(){if(this.manager.has("HistoryManager")){let t=this.manager.get("HistoryManager"),i=m(c((t.length>1?t.previous:t.current).url)),r=m(c());this.routes.forEach((n,s)=>{let a=s.from,o=s.to;if(typeof a=="boolean"&&typeof o=="boolean")throw`[Router] path ({ from: ${a}, to: ${o} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let h=a,l=o;a instanceof RegExp&&a.test(i)&&(h=a.exec(i)),o instanceof RegExp&&o.test(r)&&(l=o.exec(r)),(Array.isArray(l)&&Array.isArray(h)||Array.isArray(l)&&typeof h=="boolean"&&h||Array.isArray(h)&&typeof l=="boolean"&&l)&&n({from:h,to:l,path:{from:i,to:r}})})}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}};var rt=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size,i=t;return this.set(i,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...i)=>{},t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},ft=(e,t,...i)=>{e.forEach(r=>{r[t](...i)})},nt=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),H=class extends rt{constructor(e="event"){super();this.name=e}},dt=class extends rt{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof H?t:(this.set(e,new H(e)),this.get(e))}newListener(e,t,i){let r=this.getEvent(e);return r.add(nt({name:e,callback:t,scope:i})),r}on(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,s=typeof e=="object"&&!Array.isArray(e),a=s?t:i;return s||(n=t),Object.keys(e).forEach(o=>{s?(r=o,n=e[o]):r=e[o],this.newListener(r,n,a)},this),this}removeListener(e,t,i){let r=this.get(e);if(r instanceof H&&t){let n=nt({name:e,callback:t,scope:i});r.forEach((s,a)=>{if(s.callback===n.callback&&s.scope===n.scope)return r.remove(a)})}return r}off(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,s=typeof e=="object"&&!Array.isArray(e),a=s?t:i;return s||(n=t),Object.keys(e).forEach(o=>{s?(r=o,n=e[o]):r=e[o],typeof n=="function"?this.removeListener(r,n,a):this.remove(r)},this),this}emit(e,...t){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(i=>{let r=this.get(i);r instanceof H&&r.forEach(n=>{let{callback:s,scope:a}=n;s.apply(a,t)})},this),this)}clear(){return ft(this,"clear"),super.clear(),this}},st=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],at=e=>Array.isArray(e)?e:typeof e=="string"||e instanceof Node?st(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],_=(e,t)=>typeof e=="function"?e(...t):e,G=(e,t)=>{let i,r,n={},s=Object.keys(e);for(let a=0,o=s.length;a<o;a++)i=s[a],r=e[i],n[i]=_(r,t);return n},ot={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},ht=e=>/^(ease|in|out)/.test(e)?ot[e]:e,lt={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},q=class{constructor(e={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new dt;let{options:t,...i}=e;this.options=Object.assign({},lt,t instanceof q?t.getOptions():t,i),this.loop=this.loop.bind(this);let{loop:r,delay:n,speed:s,easing:a,endDelay:o,duration:h,direction:l,fillMode:u,onfinish:x,target:T,keyframes:A,autoplay:ct,...pt}=this.options;this.mainElement=document.createElement("div"),this.targets=at(T),this.properties=pt;let S=this.targets.length,k;for(let b=0;b<S;b++){let I=this.targets[b],y={easing:ht(a),iterations:r===!0?Infinity:r,direction:l,endDelay:o,duration:h,delay:n,fill:u},N=_(A,[b,S,I]);k=N.length?N:this.properties,y=G(y,[b,S,I]),N.length>0||(k=G(k,[b,S,I]));let j=y.delay+y.duration*y.iterations+y.endDelay;this.duration<j&&(this.duration=j);let K=I.animate(k,y);K.onfinish=()=>{x(I,b,S)},this.animations.set(I,K)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(s),ct?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((e,t)=>{try{this.finish=()=>(this.emit("finish",this.options),e(this.options))}catch(i){t(i)}})}getTargets(){return this.targets}then(e,t){return e=e?.bind(this),t=t?.bind(this),this.promise.then(e,t),this}catch(e){return e=e?.bind(this),this.promise.catch(e),this}finally(e){return e=e?.bind(this),this.promise.finally(e),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(e,t,i){return this.emitter.on(e,t,i??this),this}off(e,t,i){return this.emitter.off(e,t,i??this),this}emit(e,...t){return this.emitter.emit(e,...t),this}getAnimation(e){return this.animations.get(e)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(e=>{e.playState!=="finished"&&e.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(e=>{e.playState!=="finished"&&e.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(e){return this.mainAnimation.currentTime=e,this.animations.forEach(t=>{t.currentTime=e}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(e){return this.mainAnimation.currentTime=e/100*this.duration,this.animations.forEach(t=>{t.currentTime=e*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(e=1){return this.mainAnimation.playbackRate=e,this.animations.forEach(t=>{t.playbackRate=e}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(e=>{e.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},bt=(e={})=>new q(e);export{w as AdvancedManager,q as Animate,tt as App,$ as CONFIG_DEFAULTS,lt as DefaultAnimationOptions,M as Event,U as EventEmitter,W as HistoryManager,f as Manager,v as ManagerItem,J as PARSER,et as PJAX,C as Page,X as PageManager,it as Router,g as Service,L as ServiceManager,Z as TransitionManager,bt as animate,B as asyncMethodCall,Y as changeState,z as clean,_ as computeValue,ot as easings,P as equal,p as getConfig,ht as getEase,st as getElements,ut as getHash,m as getHashedPath,at as getTargets,O as hashAction,G as mapObject,E as methodCall,F as newConfig,d as newCoords,D as newListener,R as newState,c as newURL,V as toAttr};
//# sourceMappingURL=api.es.js.map
