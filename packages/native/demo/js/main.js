var Jt=Object.create,$=Object.defineProperty,Qt=Object.getPrototypeOf,Zt=Object.prototype.hasOwnProperty,te=Object.getOwnPropertyNames,ee=Object.getOwnPropertyDescriptor,dt=e=>$(e,"__esModule",{value:!0}),z=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),ie=(e,t)=>{dt(e);for(var i in t)$(e,i,{get:t[i],enumerable:!0})},u=(e,t,i)=>{if(dt(e),t&&typeof t=="object"||typeof t=="function")for(let r of te(t))!Zt.call(e,r)&&r!=="default"&&$(e,r,{get:()=>t[r],enumerable:!(i=ee(t,r))||i.enumerable});return e},S=e=>e&&e.__esModule?e:u($(e!=null?Jt(Qt(e)):{},"default",{value:e,enumerable:!0}),e),At=z(Et=>{var wt=Object.defineProperty,re=e=>wt(e,"__esModule",{value:!0}),ne=(e,t)=>{re(e);for(var i in t)wt(e,i,{get:t[i],enumerable:!0})};ne(Et,{Manager:()=>vt,asyncMethodCall:()=>ae,default:()=>oe,methodCall:()=>se});var vt=class{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size,i=t;return this.set(i,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e=(...i)=>{},t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}},se=(e,t,...i)=>{e.forEach(r=>{r[t](...i)})},ae=async(e,t,...i)=>{for(let[,r]of e)await r[t](...i)},oe=vt}),Lt=z(Pt=>{var he=Object.create,V=Object.defineProperty,pe=Object.getPrototypeOf,ce=Object.prototype.hasOwnProperty,ue=Object.getOwnPropertyNames,me=Object.getOwnPropertyDescriptor,Mt=e=>V(e,"__esModule",{value:!0}),ge=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),fe=(e,t)=>{Mt(e);for(var i in t)V(e,i,{get:t[i],enumerable:!0})},de=(e,t,i)=>{if(Mt(e),t&&typeof t=="object"||typeof t=="function")for(let r of ue(t))!ce.call(e,r)&&r!=="default"&&V(e,r,{get:()=>t[r],enumerable:!(i=me(t,r))||i.enumerable});return e},ye=e=>e&&e.__esModule?e:de(V(e!=null?he(pe(e)):{},"default",{value:e,enumerable:!0}),e),be=ge(e=>{var t=Object.defineProperty,i=s=>t(s,"__esModule",{value:!0}),r=(s,h)=>{i(s);for(var g in h)t(s,g,{get:h[g],enumerable:!0})};r(e,{Manager:()=>n,asyncMethodCall:()=>l,default:()=>p,methodCall:()=>o});var n=class{constructor(s){this.map=new Map(s)}getMap(){return this.map}get(s){return this.map.get(s)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(s,h){return this.map.set(s,h),this}add(s){let h=this.size,g=h;return this.set(g,s),this}get size(){return this.map.size}get length(){return this.map.size}last(s=1){let h=this.keys()[this.size-s];return this.get(h)}delete(s){return this.map.delete(s)}remove(s){return this.map.delete(s),this}clear(){return this.map.clear(),this}has(s){return this.map.has(s)}entries(){return this.map.entries()}forEach(s=(...g)=>{},h){return this.map.forEach(s,h),this}[Symbol.iterator](){return this.entries()}},o=(s,h,...g)=>{s.forEach(T=>{T[h](...g)})},l=async(s,h,...g)=>{for(let[,T]of s)await T[h](...g)},p=n});fe(Pt,{Event:()=>K,EventEmitter:()=>Rt,default:()=>Ee,newListener:()=>nt});var st=ye(be()),nt=({callback:e=()=>{},scope:t=null,name:i="event"})=>({callback:e,scope:t,name:i}),K=class extends st.Manager{constructor(e="event"){super();this.name=e}},Rt=class extends st.Manager{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof K?t:(this.set(e,new K(e)),this.get(e))}newListener(e,t,i){let r=this.getEvent(e);return r.add(nt({name:e,callback:t,scope:i})),r}on(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,o=typeof e=="object"&&!Array.isArray(e),l=o?t:i;return o||(n=t),Object.keys(e).forEach(p=>{o?(r=p,n=e[p]):r=e[p],this.newListener(r,n,l)},this),this}removeListener(e,t,i){let r=this.get(e);if(r instanceof K&&t){let n=nt({name:e,callback:t,scope:i});r.forEach((o,l)=>{if(o.callback===n.callback&&o.scope===n.scope)return r.remove(l)})}return r}off(e,t,i){if(typeof e=="undefined")return this;typeof e=="string"&&(e=e.trim().split(/\s/g));let r,n,o=typeof e=="object"&&!Array.isArray(e),l=o?t:i;return o||(n=t),Object.keys(e).forEach(p=>{o?(r=p,n=e[p]):r=e[p],typeof n=="function"?this.removeListener(r,n,l):this.remove(r)},this),this}emit(e,...t){return typeof e=="undefined"?this:(typeof e=="string"&&(e=e.trim().split(/\s/g)),e.forEach(i=>{let r=this.get(i);r instanceof K&&r.forEach(n=>{let{callback:o,scope:l}=n;o.apply(l,t)})},this),this)}clear(){return st.methodCall(this,"clear"),super.clear(),this}},Ee=Rt}),at=z(we=>{u(we,S(Lt()))}),Bt=z(_t=>{var Ae=Object.create,Q=Object.defineProperty,Ie=Object.getPrototypeOf,Te=Object.prototype.hasOwnProperty,Se=Object.getOwnPropertyNames,xe=Object.getOwnPropertyDescriptor,Dt=e=>Q(e,"__esModule",{value:!0}),Pe=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),Me=(e,t)=>{Dt(e);for(var i in t)Q(e,i,{get:t[i],enumerable:!0})},Re=(e,t,i)=>{if(Dt(e),t&&typeof t=="object"||typeof t=="function")for(let r of Se(t))!Te.call(e,r)&&r!=="default"&&Q(e,r,{get:()=>t[r],enumerable:!(i=xe(t,r))||i.enumerable});return e},Le=e=>e&&e.__esModule?e:Re(Q(e!=null?Ae(Ie(e)):{},"default",{value:e,enumerable:!0}),e),ke=Pe(e=>{var t=Object.create,i=Object.defineProperty,r=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,o=Object.getOwnPropertyNames,l=Object.getOwnPropertyDescriptor,p=a=>i(a,"__esModule",{value:!0}),s=(a,c)=>()=>(c||(c={exports:{}},a(c.exports,c)),c.exports),h=(a,c)=>{p(a);for(var f in c)i(a,f,{get:c[f],enumerable:!0})},g=(a,c,f)=>{if(p(a),c&&typeof c=="object"||typeof c=="function")for(let m of o(c))!n.call(a,m)&&m!=="default"&&i(a,m,{get:()=>c[m],enumerable:!(f=l(c,m))||f.enumerable});return a},T=a=>a&&a.__esModule?a:g(i(a!=null?t(r(a)):{},"default",{value:a,enumerable:!0}),a),M=s(a=>{var c=Object.defineProperty,f=d=>c(d,"__esModule",{value:!0}),m=(d,I)=>{f(d);for(var O in I)c(d,O,{get:I[O],enumerable:!0})};m(a,{Manager:()=>E,asyncMethodCall:()=>L,default:()=>k,methodCall:()=>v});var E=class{constructor(d){this.map=new Map(d)}getMap(){return this.map}get(d){return this.map.get(d)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(d,I){return this.map.set(d,I),this}add(d){let I=this.size,O=I;return this.set(O,d),this}get size(){return this.map.size}get length(){return this.map.size}last(d=1){let I=this.keys()[this.size-d];return this.get(I)}delete(d){return this.map.delete(d)}remove(d){return this.map.delete(d),this}clear(){return this.map.clear(),this}has(d){return this.map.has(d)}entries(){return this.map.entries()}forEach(d=(...O)=>{},I){return this.map.forEach(d,I),this}[Symbol.iterator](){return this.entries()}},v=(d,I,...O)=>{d.forEach(et=>{et[I](...O)})},L=async(d,I,...O)=>{for(let[,et]of d)await et[I](...O)},k=E});h(e,{Event:()=>N,EventEmitter:()=>H,default:()=>F,newListener:()=>q});var b=T(M()),q=({callback:a=()=>{},scope:c=null,name:f="event"})=>({callback:a,scope:c,name:f}),N=class extends b.Manager{constructor(a="event"){super();this.name=a}},H=class extends b.Manager{constructor(){super()}getEvent(a){let c=this.get(a);return c instanceof N?c:(this.set(a,new N(a)),this.get(a))}newListener(a,c,f){let m=this.getEvent(a);return m.add(q({name:a,callback:c,scope:f})),m}on(a,c,f){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let m,E,v=typeof a=="object"&&!Array.isArray(a),L=v?c:f;return v||(E=c),Object.keys(a).forEach(k=>{v?(m=k,E=a[k]):m=a[k],this.newListener(m,E,L)},this),this}removeListener(a,c,f){let m=this.get(a);if(m instanceof N&&c){let E=q({name:a,callback:c,scope:f});m.forEach((v,L)=>{if(v.callback===E.callback&&v.scope===E.scope)return m.remove(L)})}return m}off(a,c,f){if(typeof a=="undefined")return this;typeof a=="string"&&(a=a.trim().split(/\s/g));let m,E,v=typeof a=="object"&&!Array.isArray(a),L=v?c:f;return v||(E=c),Object.keys(a).forEach(k=>{v?(m=k,E=a[k]):m=a[k],typeof E=="function"?this.removeListener(m,E,L):this.remove(m)},this),this}emit(a,...c){return typeof a=="undefined"?this:(typeof a=="string"&&(a=a.trim().split(/\s/g)),a.forEach(f=>{let m=this.get(f);m instanceof N&&m.forEach(E=>{let{callback:v,scope:L}=E;v.apply(L,c)})},this),this)}clear(){return b.methodCall(this,"clear"),super.clear(),this}},F=H});Me(_t,{Animate:()=>ht,DefaultAnimationOptions:()=>qt,animate:()=>Gt,computeValue:()=>ot,default:()=>Oe,easings:()=>jt,getEase:()=>Ut,getElements:()=>Ft,getTargets:()=>zt,mapObject:()=>lt});var Ce=Le(ke()),Ft=e=>typeof e=="string"?Array.from(document.querySelectorAll(e)):[e],zt=e=>Array.isArray(e)?e:typeof e=="string"||e instanceof Node?Ft(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],ot=(e,t)=>typeof e=="function"?e(...t):e,lt=(e,t)=>{let i,r,n={},o=Object.keys(e);for(let l=0,p=o.length;l<p;l++)i=o[l],r=e[i],n[i]=ot(r,t);return n},jt={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},Ut=e=>/^(ease|in|out)/.test(e)?jt[e]:e,qt={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"},ht=class{constructor(e={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new Ce.EventEmitter;let{options:t,...i}=e;this.options=Object.assign({},qt,t instanceof ht?t.getOptions():t,i),this.loop=this.loop.bind(this);let{loop:r,delay:n,speed:o,easing:l,endDelay:p,duration:s,direction:h,fillMode:g,onfinish:T,target:M,keyframes:b,autoplay:q,...N}=this.options;this.mainElement=document.createElement("div"),this.targets=zt(M),this.properties=N;let H=this.targets.length,F;for(let a=0;a<H;a++){let c=this.targets[a],f={easing:Ut(l),iterations:r===!0?Infinity:r,direction:h,endDelay:p,duration:s,delay:n,fill:g},m=ot(b,[a,H,c]);F=m.length?m:this.properties,f=lt(f,[a,H,c]),m.length>0||(F=lt(F,[a,H,c]));let E=f.delay+f.duration*f.iterations+f.endDelay;this.duration<E&&(this.duration=E);let v=c.animate(F,f);v.onfinish=()=>{T(c,a,H)},this.animations.set(c,v)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(o),q?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{window.cancelAnimationFrame(this.animationFrame),this.finish()}}newPromise(){return new Promise((e,t)=>{try{this.finish=()=>(this.emit("finish",this.options),e(this.options))}catch(i){t(i)}})}getTargets(){return this.targets}then(e,t){return e=e==null?void 0:e.bind(this),t=t==null?void 0:t.bind(this),this.promise.then(e,t),this}catch(e){return e=e==null?void 0:e.bind(this),this.promise.catch(e),this}finally(e){return e=e==null?void 0:e.bind(this),this.promise.finally(e),this}loop(){this.animationFrame=window.requestAnimationFrame(this.loop),this.emit("tick change",this.getCurrentTime())}on(e,t,i){return this.emitter.on(e,t,i!=null?i:this),this}off(e,t,i){return this.emitter.off(e,t,i!=null?i:this),this}emit(e,...t){return this.emitter.emit(e,...t),this}getAnimation(e){return this.animations.get(e)}play(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop),this.animations.forEach(e=>{e.playState!=="finished"&&e.play()}),this.emit("play")),this}pause(){return this.mainAnimation.playState!=="finished"&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(e=>{e.playState!=="finished"&&e.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(e){return this.mainAnimation.currentTime=e,this.animations.forEach(t=>{t.currentTime=e}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(e){return this.mainAnimation.currentTime=e/100*this.duration,this.animations.forEach(t=>{t.currentTime=e*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(e=1){return this.mainAnimation.playbackRate=e,this.animations.forEach(t=>{t.playbackRate=e}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}stop(){for(this.animations.forEach(e=>{e.cancel()},this),this.mainAnimation.cancel(),window.cancelAnimationFrame(this.animationFrame),this.animations.clear();this.targets.length;)this.targets.pop();this.mainElement=void 0,this.animationFrame=void 0,this.emit("stop")}get[Symbol.toStringTag](){return"Animate"}},Gt=(e={})=>new ht(e),Oe=Gt}),Kt=z(He=>{u(He,S(Bt()))}),_=z(Ne=>{ie(Ne,{AdvancedManager:()=>U,App:()=>Ct,CONFIG_DEFAULTS:()=>yt,HistoryManager:()=>It,Manager:()=>A.Manager,ManagerItem:()=>j,PARSER:()=>St,PJAX:()=>Ht,Page:()=>W,PageManager:()=>xt,Router:()=>Nt,Service:()=>x,ServiceManager:()=>Y,TransitionManager:()=>kt,asyncMethodCall:()=>A.asyncMethodCall,changeState:()=>Tt,clean:()=>rt,equal:()=>G,getConfig:()=>w,getHash:()=>le,getHashedPath:()=>R,hashAction:()=>J,methodCall:()=>A.methodCall,newConfig:()=>it,newCoords:()=>C,newState:()=>B,newURL:()=>y,toAttr:()=>bt});u(Ne,S(at()));u(Ne,S(Kt()))}),yt={wrapperAttr:"wrapper",noAjaxLinkAttr:"no-ajax-link",noPrefetchAttr:"no-prefetch",headers:[["x-partial","true"]],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",blockAttr:"block",timeout:3e4},it=e=>Object.assign({...yt},e),bt=(e,t,i=!0)=>{let{prefix:r}=e,n=`data${r?"-"+r:""}-${t}`;return i?`[${n}]`:n},w=(e,t,i=!0)=>{if(typeof t!="string")return e;let r=e[t];return typeof r=="string"?bt(e,r,i):r},A=S(At()),j=class{constructor(){}install(){}register(t,i){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=i,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=void 0,this.manager=void 0,this.app=void 0,this.config=void 0,this.emitter=void 0}},U=class extends A.Manager{constructor(t){super();this.app=t,this.config=t.config,this.emitter=t.emitter}set(t,i){return super.set(t,i),i.register(this,t),this}},y=(e=window.location.href)=>e instanceof URL?e:new URL(e,window.location.origin),R=e=>`${e.pathname}${e.hash}`,le=e=>e.hash.slice(1),rt=e=>e.toString().replace(/(\/#.*|\/|#.*)$/,""),G=(e,t)=>{let i=y(e),r=y(t);return rt(i)===rt(r)},x=class extends j{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}},Y=class extends U{constructor(t){super(t)}init(){return A.methodCall(this,"init"),this}boot(){return A.methodCall(this,"boot"),this}stop(){return A.methodCall(this,"stop"),this}},C=(e=window.scrollX,t=window.scrollY)=>({x:e,y:t}),B=(e={url:R(y()),index:0,transition:"default",data:{scroll:C(),trigger:"HistoryManager"}})=>e,It=class extends x{constructor(){super(...arguments);this.pointer=-1}init(){this.states=[];let t=B();this.add(t,"replace")}get(t){return this.states[t]}add(t,i="push"){let r=B(t),n=this.length;this.states.push({...r}),this.pointer=n;let o={index:this.pointer,states:[...this.states]};return Tt(i,r,o),this}remove(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this}replace(t){return this.states=t,this}set(t,i){return this.states[t]=i}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},Tt=(e,t,i)=>{let r=R(y(t.url)),n=[i,"",r];if(window.history)switch(e){case"push":window.history.pushState.apply(window.history,n);break;case"replace":window.history.replaceState.apply(window.history,n);break}},St=new DOMParser,W=class extends j{constructor(t=y(),i=document){super();this.url=t,typeof i=="string"?this.data=i:this.dom=i||document}build(){if(this.dom instanceof Node||(this.dom=St.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:t,head:i,body:r}=this.dom;this.title=t,this.head=i,this.body=r,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=w(this.config,"wrapperAttr")}uninstall(){this.url=void 0,this.title=void 0,this.head=void 0,this.body=void 0,this.dom=void 0,this.wrapper=void 0,this.data=void 0,this.wrapperAttr=void 0}},xt=class extends x{constructor(){super(...arguments);this.loading=new A.Manager}install(){var i;this.pages=new U(this.app),this.maxPages=(i=this.config.maxPages)!=null?i:5;let t=y().pathname;this.set(t,new W),t=void 0}get(t){return this.pages.get(t)}add(t){return this.pages.add(t),this}set(t,i){return this.pages.set(t,i),this}remove(t){return this.pages.remove(t),this}has(t){return this.pages.has(t)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(t=y()){let i=y(t),r=i.pathname,n,o;if(this.has(r))return n=this.get(r),Promise.resolve(n);this.loading.has(r)?o=this.loading.get(r):(o=this.request(r),this.loading.set(r,o));let l=await o;if(this.loading.remove(r),n=new W(i,l),this.set(r,n),this.size>this.maxPages){let p=y(),s=this.keys(),h=G(p,s[0])?s[1]:s[0],g=this.get(h);g.unregister(),g=void 0,s=void 0,p=void 0,h=void 0}return n}async request(t){let i=new Headers(w(this.config,"headers")),r=window.setTimeout(()=>{throw window.clearTimeout(r),"Request Timed Out!"},w(this.config,"timeout"));try{let n=await fetch(t,{mode:"same-origin",method:"GET",headers:i,cache:"default",credentials:"same-origin"});if(window.clearTimeout(r),n.status>=200&&n.status<300)return await n.text();let o=new Error(n.statusText||""+n.status);throw o}catch(n){throw window.clearTimeout(r),n}}},J=(e,t=window.location.hash)=>{try{let i=t[0]=="#"?t:y(t).hash;if(i.length>1){let r=document.getElementById(i.slice(1));if(r)return C(r.offsetLeft,r.offsetTop)}}catch(i){console.warn("[hashAction] error",i)}return e!=null?e:C(0,0)},ve={name:"default",scrollable:!0,out({done:e}){e()},in({scroll:e,done:t}){window.scroll(e.x,e.y),t()}},kt=class extends x{constructor(t){super();this._arg=t}install(){var i;super.install();let t=this._arg&&this._arg.length?this._arg:(i=w(this.config,"transitions"))!=null?i:[];t=[["default",ve]].concat(t),this.transitions=new A.Manager(t)}get(t){return this.transitions.get(t)}set(t,i){return this.transitions.set(t,i),this}add(t){return this.transitions.add(t),this}has(t){return this.transitions.has(t)}async animate(t,i){let r=this.transitions.get(t),n=i.scroll,o=i.ignoreHashAction;if(!("wrapper"in i.oldPage)||!("wrapper"in i.newPage))throw`[Page] either oldPage or newPage aren't instances of the Page Class.
 ${{newPage:i.newPage,oldPage:i.oldPage}}`;document.title=""+i.newPage.title;let l=i.oldPage.wrapper,p=i.newPage.wrapper;if(!(l instanceof Node)||!(p instanceof Node))throw`[Wrapper] the wrapper from the ${p instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${w(this.config,"wrapperAttr")}.`;return r.init&&(r==null||r.init(i)),this.emitter.emit("BEFORE_TRANSITION_OUT"),r.out&&await new Promise(s=>{let h=r.out.call(r,{...i,from:i.oldPage,trigger:i.trigger,done:s});h==null||h.then(s)}),this.emitter.emit("AFTER_TRANSITION_OUT"),await new Promise(s=>{l.insertAdjacentElement("beforebegin",p),this.emitter.emit("CONTENT_INSERT"),!o&&!/back|popstate|forward/.test(i.trigger)&&(n=J(n)),s()}),await new Promise(s=>{l.remove(),l=void 0,p=void 0,this.emitter.emit("CONTENT_REPLACED"),s()}),this.emitter.emit("BEFORE_TRANSITION_IN"),r.in&&await new Promise(async s=>{let h=r.in.call(r,{...i,from:i.oldPage,to:i.newPage,trigger:i.trigger,scroll:n,done:s});h==null||h.then(s)}),this.emitter.emit("AFTER_TRANSITION_IN"),r}},Ot=S(at()),Ct=class{constructor(t={}){this.register(t)}register(t={}){this.config=it(t),this.emitter=new Ot.EventEmitter,this.services=new Y(this);let i=(()=>{document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),this.emitter.emit("READY ready")}).bind(this);return document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i),this}get(t){return this.services.get(t)}set(t,i){return this.services.set(t,i),this}add(t){return this.services.add(t),this}boot(){return this.services.init(),this.services.boot(),this}stop(){return this.services.stop(),this.emitter.clear(),this}on(t,i){return this.emitter.on(t,i,this),this}off(t,i){return this.emitter.off(t,i,this),this}emit(t,...i){return this.emitter.emit(t,...i),this}},Ht=class extends x{install(){var t,i,r,n,o,l;super.install(),this.ignoreURLs=(t=w(this.config,"ignoreURLs"))!=null?t:[],this.prefetchIgnore=(i=w(this.config,"prefetchIgnore"))!=null?i:!1,this.stopOnTransitioning=(r=w(this.config,"stopOnTransitioning"))!=null?r:!1,this.stickyScroll=(n=w(this.config,"stickyScroll"))!=null?n:!1,this.forceOnError=(o=w(this.config,"forceOnError"))!=null?o:!1,this.ignoreHashAction=(l=w(this.config,"ignoreHashAction"))!=null?l:!1}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),super.boot()}getTransitionName(t){if(!t||!t.getAttribute)return null;let i=t.getAttribute(w(this.config,"transitionAttr",!1));return typeof i=="string"?i:null}validLink(t,i,r){let n=!window.history.pushState,o=!t||!r,l=i.metaKey||i.ctrlKey||i.shiftKey||i.altKey,p=t.hasAttribute("target")&&t.target==="_blank",s=t.protocol!==location.protocol||t.hostname!==location.hostname,h=typeof t.getAttribute("download")!="undefined",g=t.hasAttribute(w(this.config,"preventSelfAttr",!1)),T=Boolean(t.closest(w(this.config,"preventAllAttr"))),M=g&&T,b=R(y())===R(y(r));return!(o||n||l||p||s||h||M||b)}getHref(t){return t&&t.tagName&&t.tagName.toLowerCase()==="a"&&typeof t.href=="string"?t.href:null}getLink(t){let i=t.target,r=this.getHref(i);for(;i&&!r;)i=i.parentNode,r=this.getHref(i);return!i||!this.validLink(i,t,r)?void 0:i}onClick(t){let i=this.getLink(t);if(!i)return;if(this.isTransitioning&&this.stopOnTransitioning){t.preventDefault(),t.stopPropagation();return}let r=this.getHref(i);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:r,trigger:i,event:t})}getDirection(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"}force(t){window.location.assign(t)}go({href:t,trigger:i="HistoryManager",event:r}){if(this.isTransitioning&&this.stopOnTransitioning||!this.manager.has("TransitionManager")||!this.manager.has("HistoryManager")||!this.manager.has("PageManager")){this.force(t);return}let n=this.manager.get("HistoryManager"),o=C(0,0),l=n.current,p=l.url;if(G(p,t))return;let s;if(r&&r.state){this.emitter.emit("POPSTATE",r);let{state:h}=r,{index:g}=h,T=l.index,M=T-g,b=n.get(n.pointer);s=b.transition,o=b.data.scroll,n.replace(h.states),n.pointer=g,i=this.getDirection(M),this.emitter.emit(i==="back"?"POPSTATE_BACK":"POPSTATE_FORWARD",r)}else{s=this.getTransitionName(i),o=C();let h=B({url:t,transition:s,data:{scroll:o}});!this.stickyScroll&&(o=C(0,0)),n.add(h),this.emitter.emit("HISTORY_NEW_ITEM",r)}return r&&(r.stopPropagation(),r.preventDefault()),this.emitter.emit("GO",r),this.load({oldHref:p,href:t,trigger:i,transitionName:s,scroll:o})}async load({oldHref:t,href:i,trigger:r,transitionName:n="default",scroll:o={x:0,y:0}}){try{let l=this.manager.get("PageManager"),p,s;this.emitter.emit("NAVIGATION_START",{oldHref:t,href:i,trigger:r,transitionName:n});try{this.transitionStart(),s=await l.load(t),!(s.dom instanceof Element)&&s.build(),this.emitter.emit("PAGE_LOADING",{href:i,oldPage:s,trigger:r}),p=await l.load(i),await p.build(),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:p,oldPage:s,trigger:r})}catch(h){throw`[PJAX] page load error: ${h}`}try{let h=this.manager.get("TransitionManager");this.emitter.emit("TRANSITION_START",n);let g=await h.animate(h.has(n)?n:"default",{oldPage:s,newPage:p,trigger:r,scroll:o,ignoreHashAction:this.ignoreHashAction});g.scrollable||(!this.ignoreHashAction&&!/back|popstate|forward/.test(r)&&(o=J(o)),window.scroll(o.x,o.y)),this.emitter.emit("TRANSITION_END",{transition:g})}catch(h){throw`[PJAX] transition error: ${h}`}this.emitter.emit("NAVIGATION_END",{oldPage:s,newPage:p,trigger:r,transitionName:n})}catch(l){this.forceOnError?this.force(i):console.warn(l)}finally{this.transitionStop()}}ignoredURL({pathname:t}){return this.ignoreURLs.length&&this.ignoreURLs.some(i=>typeof i=="string"?i===t:i.exec(t)!==null)}onHover(t){let i=this.getLink(t);if(!i||!this.manager.has("PageManager"))return;let r=this.manager.get("PageManager"),n=y(this.getHref(i)),o=n.pathname;if(this.ignoredURL(n)||r.has(o))return;this.emitter.emit("ANCHOR_HOVER HOVER",t);try{r.load(n)}catch(l){console.warn("[PJAX] prefetch error,",l)}}onStateChange(t){this.go({href:window.location.href,trigger:"popstate",event:t})}initEvents(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}},Nt=class extends x{constructor(t=[]){super();this.routes=new A.Manager;for(let i of t)this.add(i)}add({path:t,method:i}){let r=this.parse(t);return this.routes.set(r,i),this}parsePath(t){if(typeof t=="string")return new RegExp(t,"i");if(t instanceof RegExp||typeof t=="boolean")return t;throw"[Router] only regular expressions, strings and booleans are accepted as paths."}isPath(t){return typeof t=="string"||t instanceof RegExp||typeof t=="boolean"}parse(t){let i=t,r={from:/(.*)/g,to:/(.*)/g};if(this.isPath(t))r={from:!0,to:t};else if(this.isPath(i.from)&&this.isPath(i.to))r=i;else throw"[Router] path is neither a string, regular expression, or a { from, to } object.";let{from:n,to:o}=r;return{from:this.parsePath(n),to:this.parsePath(o)}}route(){if(this.manager.has("HistoryManager")){let t=this.manager.get("HistoryManager"),i=R(y((t.length>1?t.previous:t.current).url)),r=R(y());this.routes.forEach((n,o)=>{let l=o.from,p=o.to;if(typeof l=="boolean"&&typeof p=="boolean")throw`[Router] path ({ from: ${l}, to: ${p} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let s=l,h=p;l instanceof RegExp&&l.test(i)&&(s=l.exec(i)),p instanceof RegExp&&p.test(r)&&(h=p.exec(r)),(Array.isArray(h)&&Array.isArray(s)||Array.isArray(h)&&typeof s=="boolean"&&s||Array.isArray(s)&&typeof h=="boolean"&&h)&&n({from:s,to:h,path:{from:i,to:r}})})}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}},P=S(_()),X=S(_()),pt=class extends X.Service{constructor(){super(...arguments);this.minimalDuration=1e3}init(){super.init(),this.rootElement=document.getElementById("splashscreen"),this.rootElement&&(this.innerEl=this.rootElement.querySelector(".splashscreen-inner"),this.bgEl=this.rootElement.querySelector(".splashscreen-bg"),this.spinnerEl=[...this.rootElement.querySelectorAll(".spinner")]),this.rootElement.style.visibility="visible",this.rootElement.style.pointerEvents="auto"}boot(){this.rootElement&&this.hide()}async hide(){await new Promise(t=>{window.setTimeout(()=>{this.emitter.emit("BEFORE_SPLASHSCREEN_HIDE"),t()},this.minimalDuration)}),await new Promise(async t=>{X.animate({target:this.innerEl,opacity:[1,0],autoplay:!0,duration:500,onfinish(i){i.style.opacity="0"}}).then(function(){this.stop()}),this.emitter.emit("START_SPLASHSCREEN_HIDE"),await this.show(),t()})}async show(){let t=X.animate({target:this.rootElement,transform:["translateY(0%)","translateY(100%)"],duration:1200,easing:"in-out-cubic"});await t,t.stop(),this.rootElement.style.transform="translateY(100%)",this.rootElement.style.visibility="hidden",this.rootElement.style.pointerEvents="none"}},Z=S(_()),ct=class extends Z.Service{init(){super.init(),this.elements=[...document.querySelectorAll(".intro-animation")]}newPage(){this.init(),this.prepareToShow()}initEvents(){this.emitter.on("BEFORE_SPLASHSCREEN_HIDE",this.prepareToShow,this),this.emitter.on("CONTENT_REPLACED",this.newPage,this),this.emitter.on("START_SPLASHSCREEN_HIDE BEFORE_TRANSITION_IN",this.show,this)}stopEvents(){this.emitter.off("BEFORE_SPLASHSCREEN_HIDE",this.prepareToShow,this),this.emitter.off("CONTENT_REPLACED",this.newPage,this),this.emitter.off("START_SPLASHSCREEN_HIDE BEFORE_TRANSITION_IN",this.show,this)}stop(){requestAnimationFrame(()=>{for(let t of this.elements)t.style.transform="translateY(0px)",t.style.opacity="1"}),super.stop()}prepareToShow(){requestAnimationFrame(()=>{for(let t of this.elements)t.style.transform="translateY(200px)",t.style.opacity="0"})}async show(){let t=Z.animate({target:this.elements,keyframes:[{transform:"translateY(200px)",opacity:0},{transform:"translateY(0px)",opacity:1}],delay(r){return 300*(r+1)},onfinish(r){requestAnimationFrame(()=>{r.style.transform="translateY(0px)",r.style.opacity="1"})},easing:"out-cubic",duration:650}),i=await t;return t.stop(),i}},ut=S(_()),Xt={name:"default",duration:500,scrollable:!0,out({from:e}){let{duration:t}=this,i=e.wrapper;return ut.animate({target:i,opacity:[1,0],duration:t}).on("finish",function(){this.stop()})},in({to:e,scroll:t}){let{duration:i}=this,r=e.wrapper;return window.scroll(t.x,t.y),ut.animate({target:r,opacity:[0,1],duration:i}).then(function(){this.stop()})}},D=S(_()),$t={name:"big",delay:200,durationPerAnimation:700,scrollable:!0,init(){this.mainElement=document.getElementById("big-transition"),this.spinnerElement=this.mainElement.querySelector(".spinner"),this.horizontalElements=[...this.mainElement.querySelector("#big-transition-horizontal").querySelectorAll("div")],this.maxLength=this.horizontalElements.length},out({from:e,scroll:t}){let{durationPerAnimation:i,delay:r}=this,n=e.wrapper;window.scroll(t.x,t.y);let o=Object.assign({},n.style);return new Promise(async l=>{this.mainElement.style.opacity="1",this.mainElement.style.visibility="visible";let p=D.animate({target:n,opacity:[1,0],duration:i,onfinish(b){b.style.opacity="0"}});p.then(function(){this.stop()});let s=D.animate({target:this.horizontalElements,keyframes:[{transform:"scaleX(0)"},{transform:"scaleX(1)"}],delay(b){return r*(b+1)},onfinish(b){b.style.transform="scaleX(1)"},easing:"out-cubic",duration:500});await s,n.style.opacity="1",Object.assign(n.style,o),this.spinnerElement.style.visibility="visible";let h=500,g=D.animate({target:this.spinnerElement,opacity:[0,1],duration:h,onfinish(b){b.style.opacity="1"}}),T=await g,M=D.animate({options:T,opacity:[1,0],onfinish(b){b.style.opacity="0"},delay:1500});await M,this.spinnerElement.style.visibility="hidden",g.stop(),M.stop(),l()})},in({to:e,scroll:t}){let{durationPerAnimation:i,delay:r}=this,n=e.wrapper;return window.scroll(t.x,t.y),new Promise(async o=>{let l=D.animate({target:n,opacity:[0,1],duration:i}).then(()=>{l.stop()}),p=D.animate({target:this.horizontalElements,keyframes:[{transform:"scaleX(1)"},{transform:"scaleX(0)"}],delay(s){return r*(s+1)},onfinish(s){s.style.transform="scaleX(0)"},easing:"out-cubic",duration:500});await p,this.mainElement.style.opacity="0",this.mainElement.style.visibility="hidden",p.stop(),o()})}},mt=S(_()),tt={name:"slide",duration:500,direction:"right",scrollable:!0,init(e){let t=e.trigger;t instanceof Node&&t.hasAttribute("data-direction")?this.direction=t.getAttribute("data-direction"):this.direction="right"},out({from:e}){let{duration:t,direction:i}=this,r=e.wrapper;return mt.animate({target:r,keyframes:[{transform:"translateX(0%)",opacity:1},{transform:`translateX(${i==="left"?"-":""}25%)`,opacity:0}],duration:t,easing:"in-quint"}).then(function(){this.stop()})},in({to:e,scroll:t}){let{duration:i}=this,r=e.wrapper;return window.scroll(t.x,t.y),mt.animate({target:r,keyframes:[{transform:`translateX(${this.direction==="right"?"-":""}25%)`,opacity:0},{transform:"translateX(0%)",opacity:1}],duration:i,easing:"out-quint"}).then(function(){this.stop()})}},Yt={...tt,name:"slide-left",direction:"left"},Wt={...tt,name:"slide-right",direction:"right"},gt=new P.App,Vt,ft,_e;gt.add(new ct).add(Vt=new pt).set("HistoryManager",new P.HistoryManager).set("PageManager",new P.PageManager).set("TransitionManager",new P.TransitionManager([["default",Xt],["BigTransition",$t],["Slide",tt],["SlideLeft",Yt],["SlideRight",Wt]])).set("router",ft=new P.Router).add(_e=new P.PJAX);try{ft=gt.get("router");let e=document.querySelectorAll(".navbar .nav-link");for(let t of e){let i=t;ft.add({path:i.getAttribute("data-path")||i.pathname,method(){let r=i.classList.contains("active");r||i.classList.add("active");for(let n of e)n!==i&&n.classList.remove("active")}})}gt.boot()}catch(e){Vt.show(),console.warn("[App] boot failed,",e)}
//# sourceMappingURL=main.js.map
