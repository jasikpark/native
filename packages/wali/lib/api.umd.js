!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self)["@okikio/event-emitter"]={})}(this,function(t){function n(t,n){if(null==t)return{};var e,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n.indexOf(e=o[i])>=0||(r[e]=t[e]);return r}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(t,n,e){return function(t,n){!function(t){function n(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var e=function(t,n,e){return function(t,n){t.exports=function(){function t(t){var n;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(n=t[Symbol.asyncIterator]))return n.call(t);if(Symbol.iterator&&null!=(n=t[Symbol.iterator]))return n.call(t)}throw new TypeError("Object is not async iterable")}function n(t,e,r){if(!t.s){if(r instanceof i){if(!r.s)return void(r.o=n.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(n.bind(null,t,e),n.bind(null,t,2));t.s=e,t.v=r;var o=t.o;o&&o(t)}}var e=function(){function n(t){this.map=new Map(t)}var e,i=n.prototype;return i.getMap=function(){return this.map},i.get=function(t){return this.map.get(t)},i.keys=function(){return[].concat(this.map.keys())},i.values=function(){return[].concat(this.map.values())},i.set=function(t,n){return this.map.set(t,n),this},i.add=function(t){return this.set(this.size,t),this},i.last=function(t){void 0===t&&(t=1);var n=this.keys()[this.size-t];return this.get(n)},i.prev=function(){return this.last(2)},i.delete=function(t){return this.map.delete(t),this},i.clear=function(){return this.map.clear(),this},i.has=function(t){return this.map.has(t)},i.entries=function(){return this.map.entries()},i.forEach=function(t,n){return void 0===t&&(t=function(){}),this.map.forEach(t,n),this},i[Symbol.iterator]=function(){return this.entries()},i.methodCall=function(t){var n=arguments;return this.forEach(function(e){e[t].apply(e,[].slice.call(n,1))}),this},i.asyncMethodCall=function(n){try{var e,i,r,s,c,f=this,h=arguments,l=!0,p=!1,m=u(function(){return a(function(){i=t(f.map);var e=o(function(){return!!Promise.resolve(i.next()).then(function(t){return l=r.done,r=t,Promise.resolve(r.value).then(function(t){return s=t,!l})})},function(){return!!(l=!0)},function(){var t=s[1];return Promise.resolve(t[n].apply(t,[].slice.call(h,1))).then(function(){})});if(e&&e.then)return e.then(function(){})},function(t){p=!0,c=t})},function(t,n){function r(i){if(e)return i;if(t)throw n;return n}var o=u(function(){var t=function(){if(!l&&null!=i.return)return Promise.resolve(i.return()).then(function(){})}();if(t&&t.then)return t.then(function(){})},function(t,n){if(p)throw c;if(t)throw n;return n});return o&&o.then?o.then(r):r(o)});return Promise.resolve(m&&m.then?m.then(function(t){return e?t:f}):e?m:f)}catch(t){return Promise.reject(t)}},(e=[{key:"size",get:function(){return this.map.size}}])&&function(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(n.prototype,e),n}(),i=function(){function t(){}return t.prototype.then=function(e,i){var r=new t,o=this.s;if(o){var a=1&o?e:i;if(a){try{n(r,1,a(this.v))}catch(t){n(r,2,t)}return r}return this}return this.o=function(t){try{var o=t.v;1&t.s?n(r,1,e?e(o):o):i?n(r,1,i(o)):n(r,2,o)}catch(t){n(r,2,t)}},r},t}();function r(t){return t instanceof i&&1&t.s}function o(t,e,o){for(var a;;){var u=t();if(r(u)&&(u=u.v),!u)return s;if(u.then){a=0;break}var s=o();if(s&&s.then){if(!r(s)){a=1;break}s=s.s}if(e){var c=e();if(c&&c.then&&!r(c)){a=2;break}}}var f=new i,h=n.bind(null,f,2);return(0===a?u.then(p):1===a?s.then(l):c.then(m)).then(void 0,h),f;function l(i){s=i;do{if(e&&(c=e())&&c.then&&!r(c))return void c.then(m).then(void 0,h);if(!(u=t())||r(u)&&!u.v)return void n(f,1,s);if(u.then)return void u.then(p).then(void 0,h);r(s=o())&&(s=s.v)}while(!s||!s.then);s.then(l).then(void 0,h)}function p(t){t?(s=o())&&s.then?s.then(l).then(void 0,h):l(s):n(f,1,s)}function m(){(u=t())?u.then?u.then(p).then(void 0,h):p(u):n(f,1,s)}}function a(t,n){try{var e=t()}catch(t){return n(t)}return e&&e.then?e.then(void 0,n):e}function u(t,n){try{var e=t()}catch(t){return n(!0,t)}return e&&e.then?e.then(n.bind(null,!1),n.bind(null,!0)):n(!1,e)}return e}()}(e={path:void 0,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),e.exports}(),i=function(){function t(t){var n=t.callback,e=t.scope,i=t.name;this.listener={callback:void 0===n?function(){}:n,scope:void 0===e?null:e,name:void 0===i?"event":i}}var n=t.prototype;return n.getCallback=function(){return this.listener.callback},n.getScope=function(){return this.listener.scope},n.getEventName=function(){return this.listener.name},n.toJSON=function(){return this.listener},t}(),r=function(t){function e(n){var e;return void 0===n&&(n="event"),(e=t.call(this)||this).name=n,e}return n(e,t),e}(e),o=function(t){function e(){return t.call(this)||this}n(e,t);var o=e.prototype;return o.getEvent=function(t){var n=this.get(t);return n instanceof r?n:(this.set(t,new r(t)),this.get(t))},o.newListener=function(t,n,e){var r=this.getEvent(t);return r.add(new i({name:t,callback:n,scope:e})),r},o.on=function(t,n,e){var i,r,o,a=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(u){"object"!=typeof t||Array.isArray(t)?(i=t[u],r=n,o=e):(i=u,r=t[u],o=n),a.newListener(i,r,o)},this)),this},o.removeListener=function(t,n,e){var r=this.getEvent(t);if(n){for(var o,a=0,u=r.size,s=new i({name:t,callback:n,scope:e});a<u&&(o=r.get(a),console.log(o),o.getCallback()!==s.getCallback()||o.getScope()!==s.getScope());a++);r.delete(a)}return r},o.off=function(t,n,e){var i,r,o,a=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(u){"object"!=typeof t||Array.isArray(t)?(i=t[u],r=n,o=e):(i=u,r=t[u],o=n),r?a.removeListener(i,r,o):a.delete(i)},this)),this},o.once=function(t,n,e){var i=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),this.on(t,function r(){i.off(t,r,e),n.apply(e,[].slice.call(arguments))},e)),this},o.emit=function(t){var n=this,e=[].slice.call(arguments,1);return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),t.forEach(function(t){var i=n.getEvent(t),r=new CustomEvent(t,{detail:e});window.dispatchEvent(r),i.forEach(function(t){var n=t.toJSON();n.callback.apply(n.scope,e)})},this)),this},e}(e);t.Event=r,t.EventEmitter=o,t.Listener=i}(n)}(e={path:void 0,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},e.exports),e.exports}(),i=function(t){return"string"==typeof t?Array.from(document.querySelectorAll(t)):[t]},r=function(t){return Array.isArray(t)?t:"string"==typeof t||t instanceof Node?i(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[]},o=function(t,n){return"function"==typeof t?t.apply(void 0,n):t},a=function(t,n){for(var e,i={},r=Object.keys(t),a=0,u=r.length;a<u;a++)i[e=r[a]]=o(t[e],n);return i},u={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},s=function(t){return/^(ease|in|out)/.test(t)?u[t]:t},c={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish:function(){},fillMode:"auto",direction:"normal"},f=function(){function t(t){var i=this;void 0===t&&(t={}),this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new e.EventEmitter;var u=t.options,f=n(t,["options"]);this.options=Object.assign({},c,u,f);var h,l=this.options,p=l.loop,m=l.delay,d=l.speed,v=l.easing,y=l.endDelay,b=l.duration,g=l.direction,w=l.fillMode,k=l.onfinish,E=l.target,z=l.keyframes,A=l.autoplay,S=n(l,["loop","delay","speed","easing","endDelay","duration","direction","fillMode","onfinish","target","keyframes","autoplay"]);this.mainElement=document.createElement("span"),this.targets=r(E),this.properties=S;for(var q=function(t,n){var e=i.targets[t],r={easing:s(v),iterations:!0===p?Infinity:p,direction:g,endDelay:y,duration:b,delay:m,fill:w},u=o(z,[t,n,e]);h=u.length?u:i.properties,r=a(r,[t,n,e]),u.length>0||(h=a(h,[t,n,e]));var c=r.delay+r.duration*r.iterations+r.endDelay;i.duration<c&&(i.duration=c);var f=e.animate(h,r);f.onfinish=function(){k(e,t,n)},i.animations.set(e,f)},O=0,j=this.targets.length;O<j;O++)q(O,j);this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(d),A?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=function(){i.finish(i.options),window.cancelAnimationFrame(i.animationFrame)}}var i=t.prototype;return i.newPromise=function(){var t=this;return new Promise(function(n,e){try{t.finish=function(e){return t.emit("finish",e),n(e)}}catch(t){e(t)}})},i.then=function(t,n){return this.promise.then(t,n)},i.catch=function(t){return this.promise.catch(t)},i.finally=function(t){return this.promise.finally(t)},i.loop=function(){this.animationFrame=window.requestAnimationFrame(this.loop.bind(this)),this.emit("tick change",this.getCurrentTime())},i.on=function(t,n,e){return this.emitter.on(t,n,e),this},i.off=function(t,n,e){return this.emitter.off(t,n,e),this},i.emit=function(t){var n;return(n=this.emitter).emit.apply(n,[t].concat([].slice.call(arguments,1))),this},i.getAnimation=function(t){return this.animations.get(t)},i.play=function(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop.bind(this)),this.animations.forEach(function(t){"finished"!==t.playState&&t.play()}),this.emit("play")),this},i.pause=function(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(function(t){"finished"!==t.playState&&t.pause()}),this.emit("pause")),this},i.getDuration=function(){return this.duration},i.getCurrentTime=function(){return this.mainAnimation.currentTime},i.setCurrentTime=function(t){return this.mainAnimation.currentTime=t,this.animations.forEach(function(n){n.currentTime=t}),this},i.getProgress=function(){return this.getCurrentTime()/this.duration},i.setProgress=function(t){var n=this;return this.mainAnimation.currentTime=t*this.duration,this.animations.forEach(function(e){e.currentTime=t*n.duration}),this},i.getSpeed=function(){return this.mainAnimation.playbackRate},i.setSpeed=function(t){return void 0===t&&(t=1),this.mainAnimation.playbackRate=t,this.animations.forEach(function(n){n.playbackRate=t}),this},i.reset=function(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()},i.getPlayState=function(){return this.mainAnimation.playState},i.getOptions=function(){return this.options},i.toJSON=function(){return this.getOptions()},t}();t.Animate=f,t.DefaultAnimationOptions=c,t.animate=function(t){return void 0===t&&(t={}),new f(t)},t.computeValue=o,t.easings=u,t.getEase=s,t.getElements=i,t.getTargets=r,t.mapObject=a});
//# sourceMappingURL=api.umd.js.map
