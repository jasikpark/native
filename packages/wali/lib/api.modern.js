class t{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return[...this.map.keys()]}values(){return[...this.map.values()]}set(t,e){return this.map.set(t,e),this}add(t){return this.set(this.size,t),this}get size(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}prev(){return this.last(2)}delete(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t=((...t)=>{}),e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}methodCall(t,...e){return this.forEach(i=>{i[t](...e)}),this}async asyncMethodCall(t,...e){for await(let[,i]of this.map)await i[t](...e);return this}}class e{constructor({callback:t=(()=>{}),scope:e=null,name:i="event"}){this.listener={callback:t,scope:e,name:i}}getCallback(){return this.listener.callback}getScope(){return this.listener.scope}getEventName(){return this.listener.name}toJSON(){return this.listener}}class i extends t{constructor(t="event"){super(),this.name=t}}class n extends t{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof i?e:(this.set(t,new i(t)),this.get(t))}newListener(t,i,n){let s=this.getEvent(t);return s.add(new e({name:t,callback:i,scope:n})),s}on(t,e,i){if(void 0===t)return this;let n,s,r;return"string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(a=>{"object"!=typeof t||Array.isArray(t)?(n=t[a],s=e,r=i):(n=a,s=t[a],r=e),this.newListener(n,s,r)},this),this}removeListener(t,i,n){let s=this.getEvent(t);if(i){let r,a=0,o=s.size,h=new e({name:t,callback:i,scope:n});for(;a<o&&(r=s.get(a),console.log(r),r.getCallback()!==h.getCallback()||r.getScope()!==h.getScope());a++);s.delete(a)}return s}off(t,e,i){if(void 0===t)return this;let n,s,r;return"string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(a=>{"object"!=typeof t||Array.isArray(t)?(n=t[a],s=e,r=i):(n=a,s=t[a],r=e),s?this.removeListener(n,s,r):this.delete(n)},this),this}once(t,e,i){if(void 0===t)return this;"string"==typeof t&&(t=t.split(/\s/g));let n=(...s)=>{this.off(t,n,i),e.apply(i,s)};return this.on(t,n,i),this}emit(t,...e){return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),t.forEach(t=>{let i=this.getEvent(t);const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n),i.forEach(t=>{let{callback:i,scope:n}=t.toJSON();i.apply(n,e)})},this)),this}}const s=t=>"string"==typeof t?Array.from(document.querySelectorAll(t)):[t],r=t=>Array.isArray(t)?t:"string"==typeof t||t instanceof Node?s(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[],a=(t,e)=>"function"==typeof t?t(...e):t,o=(t,e)=>{let i,n,s={},r=Object.keys(t);for(let o=0,h=r.length;o<h;o++)i=r[o],n=t[i],s[i]=a(n,e);return s},h={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},c=t=>/^(ease|in|out)/.test(t)?h[t]:t,u={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"};class l{constructor(t={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new n;let{options:e,...i}=t;this.options=Object.assign({},u,e,i);let s,{loop:h,delay:l,speed:m,easing:p,endDelay:b,duration:d,direction:f,fillMode:y,onfinish:g,target:z,keyframes:A,autoplay:k,...w}=this.options;this.mainElement=document.createElement("span"),this.targets=r(z),this.properties=w;for(let t=0,e=this.targets.length;t<e;t++){let i=this.targets[t],n={easing:c(p),iterations:!0===h?Infinity:h,direction:f,endDelay:b,duration:d,delay:l,fill:y},r=a(A,[t,e,i]);s=r.length?r:this.properties,n=o(n,[t,e,i]),r.length>0||(s=o(s,[t,e,i]));let u=n.delay+n.duration*n.iterations+n.endDelay;this.duration<u&&(this.duration=u);let m=i.animate(s,n);m.onfinish=()=>{g(i,t,e)},this.animations.set(i,m)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(m),k?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.finish(this.options),window.cancelAnimationFrame(this.animationFrame)}}newPromise(){return new Promise((t,e)=>{try{this.finish=e=>(this.emit("finish",e),t(e))}catch(t){e(t)}})}then(t,e){return this.promise.then(t,e)}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}loop(){this.animationFrame=window.requestAnimationFrame(this.loop.bind(this)),this.emit("tick change",this.getCurrentTime())}on(t,e,i){return this.emitter.on(t,e,i),this}off(t,e,i){return this.emitter.off(t,e,i),this}emit(t,...e){return this.emitter.emit(t,...e),this}getAnimation(t){return this.animations.get(t)}play(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop.bind(this)),this.animations.forEach(t=>{"finished"!==t.playState&&t.play()}),this.emit("play")),this}pause(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(t=>{"finished"!==t.playState&&t.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach(e=>{e.currentTime=t}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t*this.duration,this.animations.forEach(e=>{e.currentTime=t*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach(e=>{e.playbackRate=t}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}}const m=(t={})=>new l(t);export{l as Animate,u as DefaultAnimationOptions,m as animate,a as computeValue,h as easings,c as getEase,s as getElements,r as getTargets,o as mapObject};
//# sourceMappingURL=api.modern.js.map
