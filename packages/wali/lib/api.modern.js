"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t,e=(function(t){function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=function(t,e,i){return function(t,e){t.exports=function(){function t(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}function e(t,i,r){if(!t.s){if(r instanceof n){if(!r.s)return void(r.o=e.bind(null,t,i));1&i&&(i=r.s),r=r.v}if(r&&r.then)return void r.then(e.bind(null,t,i),e.bind(null,t,2));t.s=i,t.v=r;var o=t.o;o&&o(t)}}var i=function(){function e(t){this.map=new Map(t)}var i,n=e.prototype;return n.getMap=function(){return this.map},n.get=function(t){return this.map.get(t)},n.keys=function(){return[].concat(this.map.keys())},n.values=function(){return[].concat(this.map.values())},n.set=function(t,e){return this.map.set(t,e),this},n.add=function(t){return this.set(this.size,t),this},n.last=function(t){void 0===t&&(t=1);var e=this.keys()[this.size-t];return this.get(e)},n.prev=function(){return this.last(2)},n.delete=function(t){return this.map.delete(t),this},n.clear=function(){return this.map.clear(),this},n.has=function(t){return this.map.has(t)},n.entries=function(){return this.map.entries()},n.forEach=function(t,e){return void 0===t&&(t=function(){}),this.map.forEach(t,e),this},n[Symbol.iterator]=function(){return this.entries()},n.methodCall=function(t){var e=arguments;return this.forEach(function(i){i[t].apply(i,[].slice.call(e,1))}),this},n.asyncMethodCall=function(e){try{var i,n,r,u,c,h=this,l=arguments,f=!0,p=!1,m=a(function(){return s(function(){n=t(h.map);var i=o(function(){return!!Promise.resolve(n.next()).then(function(t){return f=r.done,r=t,Promise.resolve(r.value).then(function(t){return u=t,!f})})},function(){return!!(f=!0)},function(){var t=u[1];return Promise.resolve(t[e].apply(t,[].slice.call(l,1))).then(function(){})});if(i&&i.then)return i.then(function(){})},function(t){p=!0,c=t})},function(t,e){function r(n){if(i)return n;if(t)throw e;return e}var o=a(function(){var t=function(){if(!f&&null!=n.return)return Promise.resolve(n.return()).then(function(){})}();if(t&&t.then)return t.then(function(){})},function(t,e){if(p)throw c;if(t)throw e;return e});return o&&o.then?o.then(r):r(o)});return Promise.resolve(m&&m.then?m.then(function(t){return i?t:h}):i?m:h)}catch(t){return Promise.reject(t)}},(i=[{key:"size",get:function(){return this.map.size}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,i),e}(),n=function(){function t(){}return t.prototype.then=function(i,n){var r=new t,o=this.s;if(o){var s=1&o?i:n;if(s){try{e(r,1,s(this.v))}catch(t){e(r,2,t)}return r}return this}return this.o=function(t){try{var o=t.v;1&t.s?e(r,1,i?i(o):o):n?e(r,1,n(o)):e(r,2,o)}catch(t){e(r,2,t)}},r},t}();function r(t){return t instanceof n&&1&t.s}function o(t,i,o){for(var s;;){var a=t();if(r(a)&&(a=a.v),!a)return u;if(a.then){s=0;break}var u=o();if(u&&u.then){if(!r(u)){s=1;break}u=u.s}if(i){var c=i();if(c&&c.then&&!r(c)){s=2;break}}}var h=new n,l=e.bind(null,h,2);return(0===s?a.then(p):1===s?u.then(f):c.then(m)).then(void 0,l),h;function f(n){u=n;do{if(i&&(c=i())&&c.then&&!r(c))return void c.then(m).then(void 0,l);if(!(a=t())||r(a)&&!a.v)return void e(h,1,u);if(a.then)return void a.then(p).then(void 0,l);r(u=o())&&(u=u.v)}while(!u||!u.then);u.then(f).then(void 0,l)}function p(t){t?(u=o())&&u.then?u.then(f).then(void 0,l):f(u):e(h,1,u)}function m(){(a=t())?a.then?a.then(p).then(void 0,l):p(a):e(h,1,u)}}function s(t,e){try{var i=t()}catch(t){return e(t)}return i&&i.then?i.then(void 0,e):i}function a(t,e){try{var i=t()}catch(t){return e(!0,t)}return i&&i.then?i.then(e.bind(null,!1),e.bind(null,!0)):e(!1,i)}return i}()}(i={path:void 0,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),i.exports}(),n=function(){function t(t){var e=t.callback,i=t.scope,n=t.name;this.listener={callback:void 0===e?function(){}:e,scope:void 0===i?null:i,name:void 0===n?"event":n}}var e=t.prototype;return e.getCallback=function(){return this.listener.callback},e.getScope=function(){return this.listener.scope},e.getEventName=function(){return this.listener.name},e.toJSON=function(){return this.listener},t}(),r=function(t){function i(e){var i;return void 0===e&&(e="event"),(i=t.call(this)||this).name=e,i}return e(i,t),i}(i),o=function(t){function i(){return t.call(this)||this}e(i,t);var o=i.prototype;return o.getEvent=function(t){var e=this.get(t);return e instanceof r?e:(this.set(t,new r(t)),this.get(t))},o.newListener=function(t,e,i){var r=this.getEvent(t);return r.add(new n({name:t,callback:e,scope:i})),r},o.on=function(t,e,i){var n,r,o,s=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(a){"object"!=typeof t||Array.isArray(t)?(n=t[a],r=e,o=i):(n=a,r=t[a],o=e),s.newListener(n,r,o)},this)),this},o.removeListener=function(t,e,i){var r=this.getEvent(t);if(e){for(var o,s=0,a=r.size,u=new n({name:t,callback:e,scope:i});s<a&&(o=r.get(s),console.log(o),o.getCallback()!==u.getCallback()||o.getScope()!==u.getScope());s++);r.delete(s)}return r},o.off=function(t,e,i){var n,r,o,s=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),Object.keys(t).forEach(function(a){"object"!=typeof t||Array.isArray(t)?(n=t[a],r=e,o=i):(n=a,r=t[a],o=e),r?s.removeListener(n,r,o):s.delete(n)},this)),this},o.once=function(t,e,i){var n=this;return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),this.on(t,function r(){n.off(t,r,i),e.apply(i,[].slice.call(arguments))},i)),this},o.emit=function(t){var e=this,i=[].slice.call(arguments,1);return void 0===t||("string"==typeof t&&(t=t.split(/\s/g)),t.forEach(function(t){var n=e.getEvent(t),r=new CustomEvent(t,{detail:i});window.dispatchEvent(r),n.forEach(function(t){var e=t.toJSON();e.callback.apply(e.scope,i)})},this)),this},i}(i);t.Event=r,t.EventEmitter=o,t.Listener=n}((t={path:void 0,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}).exports),t.exports);const i=t=>"string"==typeof t?Array.from(document.querySelectorAll(t)):[t],n=t=>Array.isArray(t)?t:"string"==typeof t||t instanceof Node?i(t):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[],r=(t,e)=>"function"==typeof t?t(...e):t,o=(t,e)=>{let i,n,o={},s=Object.keys(t);for(let a=0,u=s.length;a<u;a++)i=s[a],n=t[i],o[i]=r(n,e);return o},s={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","in-out-expo":"cubic-bezier(1, 0, 0, 1)","in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},a=t=>/^(ease|in|out)/.test(t)?s[t]:t,u={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,onfinish(){},fillMode:"auto",direction:"normal"};class c{constructor(t={}){this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new e.EventEmitter;let{options:i,...s}=t;this.options=Object.assign({},u,i,s);let c,{loop:h,delay:l,speed:f,easing:p,endDelay:m,duration:d,direction:b,fillMode:y,onfinish:v,target:g,keyframes:w,autoplay:E,...k}=this.options;this.mainElement=document.createElement("span"),this.targets=n(g),this.properties=k;for(let t=0,e=this.targets.length;t<e;t++){let i=this.targets[t],n={easing:a(p),iterations:!0===h?Infinity:h,direction:b,endDelay:m,duration:d,delay:l,fill:y},s=r(w,[t,e,i]);c=s.length?s:this.properties,n=o(n,[t,e,i]),s.length>0||(c=o(c,[t,e,i]));let u=n.delay+n.duration*n.iterations+n.endDelay;this.duration<u&&(this.duration=u);let f=i.animate(c,n);f.onfinish=()=>{v(i,t,e)},this.animations.set(i,f)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(f),E?this.play():this.pause(),this.promise=this.newPromise(),this.mainAnimation.onfinish=()=>{this.finish(this.options),window.cancelAnimationFrame(this.animationFrame)}}newPromise(){return new Promise((t,e)=>{try{this.finish=e=>(this.emit("finish",e),t(e))}catch(t){e(t)}})}then(t,e){return this.promise.then(t,e)}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}loop(){this.animationFrame=window.requestAnimationFrame(this.loop.bind(this)),this.emit("tick change",this.getCurrentTime())}on(t,e,i){return this.emitter.on(t,e,i),this}off(t,e,i){return this.emitter.off(t,e,i),this}emit(t,...e){return this.emitter.emit(t,...e),this}getAnimation(t){return this.animations.get(t)}play(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop.bind(this)),this.animations.forEach(t=>{"finished"!==t.playState&&t.play()}),this.emit("play")),this}pause(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(t=>{"finished"!==t.playState&&t.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(t){return this.mainAnimation.currentTime=t,this.animations.forEach(e=>{e.currentTime=t}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(t){return this.mainAnimation.currentTime=t*this.duration,this.animations.forEach(e=>{e.currentTime=t*this.duration}),this}getSpeed(){return this.mainAnimation.playbackRate}setSpeed(t=1){return this.mainAnimation.playbackRate=t,this.animations.forEach(e=>{e.playbackRate=t}),this}reset(){this.setCurrentTime(0),this.promise=this.newPromise(),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.getOptions()}}const h=(t={})=>new c(t);export{c as Animate,u as DefaultAnimationOptions,h as animate,r as computeValue,s as easings,a as getEase,i as getElements,n as getTargets,o as mapObject};
//# sourceMappingURL=api.modern.js.map
