/*!
 * walijs v0.0.0
 * (c) 2020 Okiki Ojo
 * Released under the MIT license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).walijs={})}(this,(function(e){"use strict";
/*!
     * @okikio/event-emitter v1.0.3
     * (c) 2020 Okiki Ojo
     * Released under the MIT license
     */
/*!
     * managerjs v1.0.7
     * (c) 2020 Okiki Ojo
     * Released under the MIT license
     */class t extends Map{constructor(...e){super(...e)}keys(){return Array.from(super.keys.call(this))}values(){return Array.from(super.values.call(this))}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}prev(){return this.last(2)}add(e){return super.set.call(this,this.size,e),this}methodCall(e,...t){return this.forEach(i=>{i[e](...t)}),this}async asyncMethodCall(e,...t){for await(let[,i]of this)await i[e](...t);return this}}class i{constructor({callback:e=(()=>{}),scope:t=null,name:i="event"}){this.listener={callback:e,scope:t,name:i}}getCallback(){return this.listener.callback}getScope(){return this.listener.scope}getEventName(){return this.listener.name}toJSON(){return this.listener}}class s extends t{constructor(e="event"){super(),this.name=e}}class n extends t{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof s?t:(this.set(e,new s(e)),this.get(e))}newListener(e,t,s){let n=this.getEvent(e);return n.add(new i({name:e,callback:t,scope:s})),n}on(e,t,i){if(void 0===e)return this;let s,n,a;return"string"==typeof e&&(e=e.split(/\s/g)),Object.keys(e).forEach(r=>{"object"!=typeof e||Array.isArray(e)?(s=e[r],n=t,a=i):(s=r,n=e[r],a=t),this.newListener(s,n,a)},this),this}removeListener(e,t,s){let n=this.getEvent(e);if(t){let a,r=0,o=n.size,c=new i({name:e,callback:t,scope:s});for(;r<o&&(a=n.get(r),console.log(a),a.getCallback()!==c.getCallback()||a.getScope()!==c.getScope());r++);n.delete(r)}return n}off(e,t,i){if(void 0===e)return this;let s,n,a;return"string"==typeof e&&(e=e.split(/\s/g)),Object.keys(e).forEach(r=>{"object"!=typeof e||Array.isArray(e)?(s=e[r],n=t,a=i):(s=r,n=e[r],a=t),n?this.removeListener(s,n,a):this.delete(s)},this),this}once(e,t,i){if(void 0===e)return this;"string"==typeof e&&(e=e.split(/\s/g));let s=(...n)=>{this.off(e,s,i),t.apply(i,n)};return this.on(e,s,i),this}emit(e,...t){return void 0===e||("string"==typeof e&&(e=e.split(/\s/g)),e.forEach(e=>{let i=this.getEvent(e);const s=new CustomEvent(e,{detail:t});window.dispatchEvent(s),i.forEach(e=>{let{callback:i,scope:s}=e.toJSON();i.apply(s,t)})},this)),this}}const a=e=>"string"==typeof e?Array.from(document.querySelectorAll(e)):[e],r=e=>Array.isArray(e)?e:"string"==typeof e||e instanceof Node?a(e):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[],o=(e,...t)=>"function"==typeof e?e(...t):e,c=(e,t)=>{let i=Object.keys(e);for(let s=0,n=i.length;s<n;s++){let n=i[s],a=e[n];e[n]=t(a)}return e},u={ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},h={keyframes:[],loop:1,delay:0,speed:1,endDelay:0,easing:"ease",autoplay:!0,duration:1e3,fill:"forwards",direction:"normal"};class l extends Promise{constructor(e={},t){super(e=>{t=e}),this.options={},this.targets=[],this.properties={},this.animations=new Map,this.duration=0,this.emitter=new n,this.finish=(...e)=>(this.emit("finish",...e),t(...e));let{animation:i,...s}=e;this.options=Object.assign({},h,i,s);let a,{loop:l,delay:m,speed:p,easing:b,endDelay:d,duration:f,direction:y,fill:g,target:A,keyframes:z,autoplay:k,...w}=this.options;this.mainElement=document.createElement("span"),this.targets=r(A),this.properties=w;for(let e=0,t=this.targets.length;e<t;e++){let i=this.targets[e],s={easing:b.startsWith("ease")?u[b]:b,iterations:!0===l?1/0:l,direction:y,endDelay:d,duration:f,delay:m,fill:g};a=z.length?z:this.properties;let n=s=>o(s,e,t,i);c(s,n),c(a,n);let r=s.delay+s.duration*s.iterations+s.endDelay;this.duration<r&&(this.duration=r);let h=i.animate(a,s);this.animations.set(i,h)}this.mainAnimation=this.mainElement.animate([{opacity:"0"},{opacity:"1"}],{duration:this.duration,easing:"linear"}),this.setSpeed(p),k?this.play():this.pause(),this.mainAnimation.onfinish=()=>{this.finish(this.options),window.cancelAnimationFrame(this.animationFrame)}}static get[Symbol.species](){return Promise}get[Symbol.toStringTag](){return"MyPromise"}loop(){this.animationFrame=window.requestAnimationFrame(this.loop.bind(this)),this.emit("loop change",this.getCurrentTime())}on(e,t,i){return this.emitter.on(e,t,i),this}off(e,t,i){return this.emitter.off(e,t,i),this}emit(e,...t){return this.emitter.emit(e,...t),this}getAnimation(e){return this.animations.get(e)}play(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.play(),this.animationFrame=requestAnimationFrame(this.loop.bind(this)),this.animations.forEach(e=>{"finished"!==e.playState&&e.play()}),this.emit("play")),this}pause(){return"finished"!==this.mainAnimation.playState&&(this.mainAnimation.pause(),window.cancelAnimationFrame(this.animationFrame),this.animations.forEach(e=>{"finished"!==e.playState&&e.pause()}),this.emit("pause")),this}getDuration(){return this.duration}getCurrentTime(){return this.mainAnimation.currentTime}setCurrentTime(e){return this.mainAnimation.currentTime=e,this.animations.forEach(t=>{t.currentTime=e}),this}getProgress(){return this.getCurrentTime()/this.duration}setProgress(e){return this.mainAnimation.currentTime=e*this.duration,this.animations.forEach(t=>{t.currentTime=e*this.duration}),this}setSpeed(e=1){return this.mainAnimation.playbackRate=e,this.animations.forEach(t=>{t.playbackRate=e}),this}reset(){this.setCurrentTime(0),this.options.autoplay?this.play():this.pause()}getPlayState(){return this.mainAnimation.playState}getOptions(){return this.options}toJSON(){return this.options}}const m=(e={})=>new l(e);e.Animate=l,e.DefaultAnimationOptions=h,e.animate=m,e.computeValue=o,e.default=m,e.easings=u,e.getElements=a,e.getTargets=r,e.mapObject=c,Object.defineProperty(e,"__esModule",{value:!0})}));
