---
import Icon from './Icon.astro';
const { class: className, ...rest } = Astro.props;
---
<style lang="scss">
    .playback-block {
        @apply bg-elevated-2 p-5 rounded-xl overflow-hidden;
    }

    .playback-canvas {
        @apply pb-8;
        height: min(200px, 20vh);
    }

    .playback {
        display: grid;
        grid-template-columns: 40px 1fr min-content;
        gap: 10px;
        align-items: center;
    }

    .control-btn {
        display: grid;
        place-content: center;

        :global(.icon) {
            display: none;
        }
    }

    .control-btn {
        @apply bg-quaternary text-blue-500 hover:text-blue-600 hover:bg-tertiary;
        width: 40px;
        height: 40px;
        @apply rounded-md;
    }

    .playback[data-state="play"] :global(.icon.pause),
    .playback[data-state="pause"] :global(.icon.play),
    .playback[data-state="replay"] :global(.icon.replay) {
        display: inline-block;
    }

    .progress-output {
        @apply text-center tabular-nums;
    }
</style>

<div class={`playback-block ${className}`} native-scrollbar {...rest}>
    <div class="playback-canvas">
        <slot />
    </div>

    <section class="playback" data-state="pause">
        <button class="control-btn">
            <Icon name="play" />
            <Icon name="pause" />
            <Icon name="replay" />
        </button>

        <input class="progress-bar" type="range" value="0" min="0" max="100" step="0.001">

        <div class="progress-output">Loading...</div>
    </section>
</div>